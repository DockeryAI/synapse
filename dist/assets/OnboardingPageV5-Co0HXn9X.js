var ce=Object.defineProperty;var de=(n,t,a)=>t in n?ce(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a;var W=(n,t,a)=>de(n,typeof t!="symbol"?t+"":t,a);import{r as h,a as e,a8 as z,aC as me,aD as xe,ar as ue,aE as ge,a3 as Y,k as pe,a0 as he,an as fe,U as Q,as as ye,N as J,$ as be,aF as L,aa as ve,au as we,A as K,ad as je,aG as Ne,ah as X,aH as ke,aB as Se,aI as Ce,H as Pe,f as Te,aJ as Ae,B as Ee,a9 as Ue,a2 as Re,a4 as _e,aK as Ve}from"./vendor-Ck9QY3SP.js";import{I as Ie,B as O}from"./content-DNJ5jCle.js";import{I as De,a as $e}from"./IndustrySelector-ByuZZs2o.js";import{m as y,A as Oe}from"./ui-animations-D6YYT028.js";import{E as _,a as Le}from"./campaign-CpExTzZS.js";import{l as Me}from"./synapse-CMLSaE2R.js";import{g as qe}from"./analytics-BeoNQ3KZ.js";import"./vendor-misc-Ce8oRwJD.js";import"./radix-ui-BA32w1ww.js";import"./calendar-libs-Dd4YSJ5A.js";import"./ui-utils-BZoEee2W.js";import"./supabase-CviTlR-N.js";const $=[{id:"analyzing",label:"Analyzing website...",icon:e.jsx(xe,{className:"w-5 h-5"})},{id:"finding_services",label:"Finding services...",icon:e.jsx(ue,{className:"w-5 h-5"})},{id:"identifying_customers",label:"Identifying customers...",icon:e.jsx(ge,{className:"w-5 h-5"})},{id:"analyzing_competitors",label:"Analyzing competitors...",icon:e.jsx(Y,{className:"w-5 h-5"})},{id:"complete",label:"Detection complete!",icon:e.jsx(pe,{className:"w-5 h-5"})}],Fe=({onComplete:n,onUrlSubmit:t})=>{const[a,i]=h.useState(""),[o,r]=h.useState(null),[c,d]=h.useState("idle"),[m,s]=h.useState(null),x=async u=>{if(u.preventDefault(),!a.trim()){s("Please enter your website URL");return}if(!o){s("Please select your business type");return}const j=a.startsWith("http")?a:`https://${a}`;try{new URL(j)}catch{s("Please enter a valid website URL");return}if(s(null),t){t(j,o);return}await P(j)},P=async u=>{const j=["analyzing","finding_services","identifying_customers","analyzing_competitors","complete"];for(const p of j)d(p),await new Promise(S=>setTimeout(S,p==="analyzing"?1500:1e3));const g={url:u,businessName:"Acme Business",industry:"Professional Services",location:"San Francisco, CA",services:["Service A","Service B","Service C"],competitors:["Competitor 1","Competitor 2"],sources:{website:u,verified:!0}};await new Promise(p=>setTimeout(p,800)),n(g)},b=$.findIndex(u=>u.id===c),N=c!=="idle"&&c!=="complete";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:[e.jsxs(y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-3 sm:mb-4",children:"Welcome to Synapse"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-xl mx-auto px-4",children:"Let's create content that drives results. Just enter your website URL to get started."})]}),e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6 sm:p-8 md:p-10 border border-gray-200 dark:border-slate-700",children:e.jsx(Oe,{mode:"wait",children:c==="idle"?e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-center",children:"What's your website URL?"}),e.jsx(Ie,{id:"website-url",type:"text",value:a,onChange:u=>i(u.target.value),placeholder:"www.yourbusiness.com",className:"text-center text-lg sm:text-xl py-6 sm:py-8 px-4 rounded-xl border-2 border-gray-300 dark:border-slate-600 focus:border-purple-500 dark:focus:border-purple-500 transition-colors",autoFocus:!0,disabled:N})]}),e.jsx("div",{children:e.jsx(De,{websiteUrl:a,onIndustrySelected:u=>{r(u),s(null)},className:"industry-selector-inline"})}),m&&e.jsx(y.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 dark:text-red-400 text-sm mt-2 text-center",children:m}),e.jsx(O,{type:"submit",size:"lg",className:"w-full py-6 sm:py-8 text-base sm:text-lg rounded-xl bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl min-h-[56px]",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:["Get Started",e.jsx(me,{className:"w-5 h-5 sm:w-6 sm:h-6 ml-2"})]})})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:"45s"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Average setup time"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:"100%"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Source verified"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-violet-600 dark:text-violet-400 mb-1",children:"No BS"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Real data only"})]})]})})]},"input"):e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:$.map((u,j)=>{const g=c===u.id,p=j<b,S=j>b;return e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:j*.1},className:`
                          flex items-center gap-4 p-4 rounded-xl transition-all duration-300
                          ${g?"bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500":""}
                          ${p?"bg-green-50 dark:bg-green-900/20":""}
                          ${S?"opacity-40":""}
                        `,children:[e.jsx("div",{className:`
                          flex-shrink-0 flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full transition-colors
                          ${g?"bg-purple-500 text-white animate-pulse":""}
                          ${p?"bg-green-500 text-white":""}
                          ${S?"bg-gray-200 dark:bg-slate-700 text-gray-400":""}
                        `,children:g?e.jsx(z,{className:"w-5 h-5 sm:w-6 sm:h-6 animate-spin"}):u.icon}),e.jsx("span",{className:`
                          text-sm sm:text-base font-medium
                          ${g?"text-purple-700 dark:text-purple-300":""}
                          ${p?"text-green-700 dark:text-green-300":""}
                          ${S?"text-gray-500 dark:text-gray-400":""}
                        `,children:u.label})]},u.id)})}),e.jsxs("div",{className:"relative pt-2",children:[e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx(y.div,{className:"h-full bg-gradient-to-r from-purple-600 to-blue-600",initial:{width:0},animate:{width:`${(b+1)/$.length*100}%`},transition:{duration:.5}})}),e.jsxs("p",{className:"text-xs sm:text-sm text-center text-gray-600 dark:text-gray-400 mt-3",children:[Math.round((b+1)/$.length*100),"% complete"]})]}),e.jsxs("div",{className:"text-center pt-4 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Analyzing"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate",children:a})]})]},"detection")})}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center mt-6 sm:mt-8",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"All data sourced from your website. No fabrication. Ever."})})]})})},Be=[{id:"campaign",title:"Generate Full Campaign",subtitle:"Multi-post calendar with scheduling",icon:e.jsx(J,{className:"w-8 h-8"}),benefits:["7-14 days of content","Auto-scheduled posts","Platform-optimized","Consistent brand voice","Higher engagement"],recommended:!0},{id:"single_post",title:"Create Single Post",subtitle:"Quick single piece of content",icon:e.jsx(be,{className:"w-8 h-8"}),benefits:["Ready in 30 seconds","Perfect for quick needs","Test new ideas","Fill content gaps","Flexible timing"]}],He=({onSelectPath:n})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsxs(y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 rounded-full mb-4",children:[e.jsx(he,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Step 2 of 3"})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4",children:"Choose Your Path"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Select how you want to create content today"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Be.map((t,a)=>e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"relative",children:[t.recommended&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-10",children:e.jsx("div",{className:"px-4 py-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-medium rounded-full shadow-lg",children:"⭐ Recommended"})}),e.jsxs("button",{onClick:()=>n(t.id),className:`
                  w-full text-left p-6 sm:p-8 rounded-2xl border-2 transition-all duration-200
                  bg-white dark:bg-slate-800
                  hover:border-purple-500 hover:shadow-xl hover:scale-[1.02]
                  focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2
                  min-h-[56px]
                  ${t.recommended?"border-purple-300 dark:border-purple-700 shadow-lg":"border-gray-200 dark:border-slate-700"}
                `,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:`
                    flex-shrink-0 p-3 rounded-xl
                    ${t.recommended?"bg-gradient-to-br from-purple-500 to-blue-500 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300"}
                  `,children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:t.subtitle})]})]}),e.jsx("div",{className:"space-y-3",children:t.benefits.map((i,o)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:`
                        w-5 h-5 flex-shrink-0
                        ${t.recommended?"text-purple-500":"text-gray-400 dark:text-gray-500"}
                      `}),e.jsx("span",{className:"text-sm sm:text-base text-gray-700 dark:text-gray-300",children:i})]},o))}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:t.id==="campaign"?"2-3 min":"30 sec"})]}),e.jsx("div",{className:`
                      font-medium
                      ${t.recommended?"text-purple-600 dark:text-purple-400":"text-gray-900 dark:text-white"}
                    `,children:"Select →"})]})})]})]},t.id))}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-gray-200 dark:border-slate-700",children:[e.jsx(ye,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Both paths use 100% source-verified content"})]})})]})}),We=[{id:"customer_success",title:"Customer Success Story",description:"Share real results from actual customers. Builds trust through proof.",badge:{text:"User Input Required",type:"user_input"},icon:e.jsx(ve,{className:"w-6 h-6"}),example:'"How [Customer] achieved [Result] with our [Service]"',requiresModal:!0},{id:"service_spotlight",title:"Service Spotlight",description:"Highlight a specific service with verified website data.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(we,{className:"w-6 h-6"}),example:'"What makes our [Service] different: [Key Benefits]"',requiresModal:!1},{id:"problem_solution",title:"Problem/Solution Post",description:"Address customer pain points with your verified solutions.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(K,{className:"w-6 h-6"}),example:`"Struggling with [Problem]? Here's how we solve it..."`,requiresModal:!1},{id:"value_proposition",title:"Value Proposition Post",description:"Showcase what makes you unique using verified differentiators.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(Y,{className:"w-6 h-6"}),example:'"Why choose us? [Verified Differentiators]"',requiresModal:!1},{id:"community_engagement",title:"Community Engagement",description:"Ask fact-based questions to engage your audience.",badge:{text:"Fact-Based",type:"fact_based"},icon:e.jsx(je,{className:"w-6 h-6"}),example:`"What's your biggest challenge with [Topic]?"`,requiresModal:!1},{id:"blog_article",title:"Blog Article",description:"In-depth article based on your expertise and verified content.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(Ne,{className:"w-6 h-6"}),example:'"The Complete Guide to [Service/Topic]"',requiresModal:!1},{id:"newsletter",title:"Newsletter Content",description:"Email newsletter with updates, tips, or insights from your business.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(X,{className:"w-6 h-6"}),example:`"This month's updates and tips from [Business]"`,requiresModal:!1},{id:"educational_tip",title:"Educational Tip",description:"Quick, valuable tip or insight related to your expertise.",badge:{text:"Source Verified",type:"source_verified"},icon:e.jsx(ke,{className:"w-6 h-6"}),example:'"Pro tip: [Expert advice from your experience]"',requiresModal:!1}],ze=({onSelectType:n})=>{const t=i=>{switch(i){case"user_input":return"bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-700";case"source_verified":return"bg-green-100 text-green-700 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-700";case"fact_based":return"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-700"}},a=i=>{switch(i){case"user_input":return e.jsx(Ce,{className:"w-3 h-3"});case"source_verified":return e.jsx(L,{className:"w-3 h-3"});case"fact_based":return e.jsx(Se,{className:"w-3 h-3"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 p-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3",children:"Choose Your Post Type"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:"All content is source-verified. No fabrication. Ever."})]}),e.jsx("div",{className:"space-y-4",children:We.map((i,o)=>e.jsx(y.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},onClick:()=>n(i.id),className:"w-full text-left p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl border-2 border-gray-200 dark:border-slate-700 hover:border-purple-500 hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[56px]",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white",children:i.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:i.title}),e.jsxs("span",{className:`
                        inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border whitespace-nowrap
                        ${t(i.badge.type)}
                      `,children:[a(i.badge.type),i.badge.text]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:i.description}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-900/50 rounded-lg border border-gray-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium",children:"Example:"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic",children:i.example})]})]})]})},i.id))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-gray-200 dark:border-slate-700",children:[e.jsx(L,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"100% Authentic Content - Sources Always Visible"})]})})]})})},Ge=({content:n,onCopy:t,onSaveToCalendar:a,onEmailCapture:i})=>{var j;const[o,r]=h.useState(!1),[c,d]=h.useState(!1),[m,s]=h.useState(!1),[x,P]=h.useState(""),b=()=>{navigator.clipboard.writeText(n.content),r(!0),setTimeout(()=>r(!1),2e3),t()},N=()=>{s(!0)},u=g=>{g.preventDefault(),x.trim()&&i&&(i(x),a())};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 p-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:[e.jsx(L,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"All Facts Verified"})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3",children:n.type==="campaign"?"Your Campaign is Ready!":"Your Post is Ready!"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:n.type==="campaign"?"Review your campaign calendar below":"Copy and post now, or save to your calendar"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden mb-6",children:n.type==="single_post"?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-200 dark:border-slate-700 whitespace-pre-wrap",children:n.content})}),n.platform&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Platform:"}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",children:n.platform})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(J,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"7-Day Campaign Calendar"})]}),e.jsx("div",{className:"space-y-4",children:(j=n.posts)==null?void 0:j.map((g,p)=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:g.day}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Day ",g.day]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.platform})]})]})}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:g.content})]},p))})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden mb-6",children:[e.jsxs("button",{onClick:()=>d(!c),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-900/50 transition-colors min-h-[56px]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:["Sources (",n.sources.length,")"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All content verified from these sources"})]})]}),c?e.jsx(Pe,{className:"w-5 h-5 text-gray-400"}):e.jsx(Te,{className:"w-5 h-5 text-gray-400"})]}),c&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-gray-200 dark:border-slate-700 p-6",children:e.jsx("div",{className:"space-y-3",children:n.sources.map((g,p)=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-slate-900/50 rounded-lg border border-gray-200 dark:border-slate-700",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm mb-1",children:g.title}),e.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-600 dark:text-purple-400 hover:underline truncate block",children:g.url}),e.jsx("span",{className:"inline-block mt-2 px-2 py-1 bg-gray-200 dark:bg-slate-700 text-xs text-gray-600 dark:text-gray-400 rounded",children:g.type.replace("_"," ")})]})]},p))})})]}),m?e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"One Last Step!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get full calendar access"})]})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("input",{type:"email",value:x,onChange:g=>P(g.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-slate-600 rounded-lg focus:border-purple-500 dark:focus:border-purple-500 focus:outline-none min-h-[48px] bg-white dark:bg-slate-900 text-gray-900 dark:text-white"}),e.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 min-h-[56px]",children:"Access Full Calendar"})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-4",children:"We'll never spam you. Just your calendar access + occasional tips."})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(O,{onClick:b,variant:"outline",className:"flex-1 min-h-[56px]",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-5 h-5 mr-2 text-green-600"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-5 h-5 mr-2"}),"Copy & Post Now"]})}),e.jsxs(O,{onClick:N,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 min-h-[56px]",children:[e.jsx(Re,{className:"w-5 h-5 mr-2"}),"Save to Calendar"]})]})]})})};async function Ye(n){console.log("[websiteScraper] Starting scrape for:",n);try{const t=n.startsWith("http")?n:`https://${n}`;console.log("[websiteScraper] Fetching:",t);const a=[`https://corsproxy.io/?${encodeURIComponent(t)}`,`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,`https://cors-anywhere.herokuapp.com/${t}`];let i=null,o=null;for(const b of a)try{if(console.log("[websiteScraper] Trying proxy:",b.split("?")[0]),i=await fetch(b,{method:"GET",headers:{Accept:"text/html"}}),i.ok){console.log("[websiteScraper] Proxy successful:",b.split("?")[0]);break}}catch(N){o=N,console.log("[websiteScraper] Proxy failed, trying next...");continue}if(!i||!i.ok)throw o||new Error("All proxies failed");if(!i.ok)throw new Error(`Failed to fetch website: ${i.status} ${i.statusText}`);const r=await i.text();console.log("[websiteScraper] HTML fetched, length:",r.length);const d=new DOMParser().parseFromString(r,"text/html"),m=Qe(d);console.log("[websiteScraper] Metadata extracted:",m);const s=Je(d);console.log("[websiteScraper] Content extracted:",{headings:s.headings.length,paragraphs:s.paragraphs.length,links:s.links.length,images:s.images.length});const x=Ke(d,t);console.log("[websiteScraper] Design extracted:",x);const P=Xe(d);return console.log("[websiteScraper] Structure extracted:",P),{url:t,html:r,metadata:m,content:s,design:x,structure:P}}catch(t){throw console.error("[websiteScraper] Error:",t),new Error(`Website scraping failed: ${t instanceof Error?t.message:"Unknown error"}`)}}function Qe(n){var d;const t=((d=n.querySelector("title"))==null?void 0:d.textContent)||"",a=n.querySelector('meta[name="description"]')||n.querySelector('meta[property="og:description"]'),i=(a==null?void 0:a.getAttribute("content"))||"",o=n.querySelector('meta[name="keywords"]'),c=((o==null?void 0:o.getAttribute("content"))||"").split(",").map(m=>m.trim()).filter(Boolean);return{title:t,description:i,keywords:c}}function Je(n){const t=[];n.querySelectorAll("h1, h2, h3").forEach(r=>{var d;const c=(d=r.textContent)==null?void 0:d.trim();c&&t.push(c)});const a=[];n.querySelectorAll("p").forEach(r=>{var d;const c=(d=r.textContent)==null?void 0:d.trim();c&&c.length>20&&a.push(c)});const i=[];n.querySelectorAll("a[href]").forEach(r=>{var m;const c=r.getAttribute("href"),d=(m=r.textContent)==null?void 0:m.trim();d&&c&&i.push(d)});const o=[];return n.querySelectorAll("img[src]").forEach(r=>{const c=r.getAttribute("src"),d=r.getAttribute("alt");c&&o.push(d||c)}),{headings:t.slice(0,20),paragraphs:a.slice(0,30),links:i.slice(0,50),images:o.slice(0,20)}}function Ke(n,t){var b;const a=[],i=[];let o;const r=n.querySelector('img[alt*="logo" i], img[class*="logo" i], .logo img, header img');r!=null&&r.src&&(o=new URL(r.src,t).href);const c=/#([0-9a-f]{3}|[0-9a-f]{6})\b/gi,d=((b=n.body)==null?void 0:b.innerHTML)||"",m=d.match(c);if(m){const N=[...new Set(m)];a.push(...N.slice(0,10))}const s=/font-family:\s*([^;}"']+)/gi,x=[...d.matchAll(s)],P=new Set;return x.forEach(N=>{const u=N[1].trim().split(",")[0].replace(/['"]/g,"");u&&!u.includes("inherit")&&!u.includes("initial")&&P.add(u)}),i.push(...Array.from(P).slice(0,5)),a.length===0&&a.push("#2563eb","#7c3aed","#059669","#f59e0b"),i.length===0&&i.push("Inter","Roboto","Open Sans"),{colors:a,fonts:i,logo:o}}function Xe(n){const t=[],a=[];return n.querySelectorAll("section, article, main").forEach(i=>{const o=i.querySelector("h1, h2, h3");o!=null&&o.textContent&&t.push(o.textContent.trim())}),n.querySelectorAll("nav a, header a").forEach(i=>{var r;const o=(r=i.textContent)==null?void 0:r.trim();o&&o.length<50&&a.push(o)}),{sections:t.slice(0,10),navigation:[...new Set(a)].slice(0,15)}}class Ze{constructor(){W(this,"apiKey");this.apiKey="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"}async extractUVP(t,a){console.log("[SmartUVPExtractor] Starting extraction for:",t.websiteUrl);const{websiteUrl:i,maxPagesToAnalyze:o=10,minConfidence:r=.6,requireSources:c=!0,includeTestimonials:d=!0}=t;try{const m=await _.executeWithRetry(()=>Ye(i),{maxAttempts:3},a);if(!m)throw new Error("Failed to scrape website");console.log("[SmartUVPExtractor] Website scraped:",{title:m.metadata.title,headings:m.content.headings.length,paragraphs:m.content.paragraphs.length});const s=await _.executeWithRetry(()=>this.extractWithSources(i,m),{maxAttempts:3},a);return s.customerTypes=s.customerTypes.filter(x=>x.confidence>=r),s.services=s.services.filter(x=>x.confidence>=r),s.problemsSolved=s.problemsSolved.filter(x=>x.confidence>=r),s.testimonials=s.testimonials.filter(x=>x.confidence>=r),s.differentiators=s.differentiators.filter(x=>x.confidence>=r),c&&(s.customerTypes=s.customerTypes.filter(x=>this.hasValidSource(x)),s.services=s.services.filter(x=>this.hasValidSource(x)),s.problemsSolved=s.problemsSolved.filter(x=>this.hasValidSource(x)),s.testimonials=s.testimonials.filter(x=>this.hasValidSource(x)),s.differentiators=s.differentiators.filter(x=>this.hasValidSource(x))),s.overallConfidence=this.calculateOverallConfidence(s),s.verificationRate=this.calculateVerificationRate(s),s.completeness=this.calculateCompleteness(s),s.sourceQuality=this.assessSourceQuality(s),s.verificationRate<.8&&s.warnings.push(`Only ${(s.verificationRate*100).toFixed(0)}% of extracted data has verified sources`),s.customerTypes.length===0&&s.warnings.push("No customer types found - UVP will be less effective"),s.differentiators.length===0&&s.warnings.push("No differentiators found - consider adding manually"),console.log("[SmartUVPExtractor] Extraction complete:",{customers:s.customerTypes.length,services:s.services.length,problems:s.problemsSolved.length,testimonials:s.testimonials.length,differentiators:s.differentiators.length,confidence:s.overallConfidence,verification:s.verificationRate}),s}catch(m){throw console.error("[SmartUVPExtractor] Extraction failed:",m),_.logError(m,{websiteUrl:i}),this.createError("extraction",m)}}async extractUVPWithCache(t,a){const i=`uvp-${t.websiteUrl}`;try{return await _.executeWithRetry(()=>this.extractUVP(t,a),{maxAttempts:3},a,[_.createCacheFallback(i,async o=>{const r=localStorage.getItem(o);return r?JSON.parse(r):null})])}catch{return console.error("[SmartUVPExtractor] All extraction attempts failed, using minimal data"),this.createMinimalUVPData(t.websiteUrl)}}createMinimalUVPData(t){return{websiteUrl:t,extractedAt:new Date,customerTypes:[],services:[],problemsSolved:[],testimonials:[],differentiators:[],overallConfidence:0,verificationRate:0,completeness:0,sourcesAnalyzed:[t],sourceQuality:"low",warnings:["Extraction failed. Using minimal data. Please add details manually."]}}async extractWithSources(t,a){const i=this.buildExtractionPrompt(t,a),o=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,"HTTP-Referer":window.location.origin},body:JSON.stringify({model:"anthropic/claude-3.5-sonnet",messages:[{role:"system",content:`You are a UVP extraction specialist. Your job is to extract UVP components from website content.

CRITICAL RULES:
1. EVERY extracted item MUST include the source URL and context where it was found
2. NEVER fabricate data - only extract what is ACTUALLY on the website
3. Include confidence scores (0-1) based on how clearly the information is stated
4. If source cannot be determined, DO NOT include the item
5. Be specific - extract exact text, not paraphrased versions

Return JSON only, no markdown.`},{role:"user",content:i}],temperature:.3,response_format:{type:"json_object"}})});if(!o.ok)throw new Error(`OpenRouter API error: ${o.statusText}`);const r=await o.json(),c=JSON.parse(r.choices[0].message.content);return this.parseAIResponse(t,c)}buildExtractionPrompt(t,a){const i=a.content.headings.slice(0,30).join(`
`),o=a.content.paragraphs.slice(0,50).join(`
`),r=a.structure.navigation.join(", ");return`Analyze this website and extract UVP components with SOURCE ATTRIBUTION:

WEBSITE: ${t}
TITLE: ${a.metadata.title}
DESCRIPTION: ${a.metadata.description}

HEADINGS:
${i}

CONTENT PARAGRAPHS:
${o}

NAVIGATION:
${r}

Extract the following with MANDATORY source attribution:

Return JSON with this exact structure:
{
  "customerTypes": [
    {
      "text": "exact text from website",
      "confidence": 0.85,
      "category": "demographic|industry|role|business-size|other",
      "sourceUrl": "${t}",
      "sourceContext": "Found in 'About Us' section under 'Who We Serve' heading",
      "pageTitle": "About Us | Company Name",
      "sectionHeading": "Who We Serve"
    }
  ],
  "services": [
    {
      "text": "exact service name",
      "confidence": 0.9,
      "type": "service|product|package",
      "category": "Emergency Services",
      "sourceUrl": "${t}/services",
      "sourceContext": "Listed in main services navigation",
      "pageTitle": "Services | Company Name",
      "sectionHeading": "Our Services"
    }
  ],
  "problemsSolved": [
    {
      "text": "specific problem they solve",
      "confidence": 0.8,
      "severity": "high|medium|low",
      "sourceUrl": "${t}",
      "sourceContext": "Mentioned in hero section",
      "pageTitle": "Home | Company Name",
      "sectionHeading": "The Problem"
    }
  ],
  "testimonials": [
    {
      "text": "full testimonial text",
      "confidence": 0.95,
      "customerName": "John Doe",
      "customerRole": "CEO",
      "customerCompany": "Acme Corp",
      "hasMetrics": true,
      "metrics": [{"text": "increased revenue 40%", "value": 40, "unit": "%"}],
      "sourceUrl": "${t}/testimonials",
      "sourceContext": "Featured testimonial on testimonials page",
      "pageTitle": "Testimonials | Company Name",
      "sectionHeading": "What Our Clients Say"
    }
  ],
  "differentiators": [
    {
      "text": "what makes them unique",
      "confidence": 0.85,
      "category": "speed|quality|price|expertise|service|technology|other",
      "isQuantifiable": true,
      "quantification": "24/7 service",
      "sourceUrl": "${t}/about",
      "sourceContext": "Listed in 'Why Choose Us' section",
      "pageTitle": "About | Company Name",
      "sectionHeading": "Why Choose Us"
    }
  ]
}

CRITICAL REQUIREMENTS:
- Every item MUST have sourceUrl and sourceContext
- Use actual URLs from the navigation/links where possible
- Extract EXACT text, don't paraphrase
- Confidence based on clarity (explicit statement = 0.9+, implied = 0.6-0.8)
- If you can't determine the source, DON'T include the item
- Maximum 10 items per category`}parseAIResponse(t,a){const i=new Date,o=(a.customerTypes||[]).map(s=>({text:s.text,confidence:s.confidence,category:s.category||"other",source:{sourceUrl:s.sourceUrl||t,sourceContext:s.sourceContext||"Unknown source",extractedAt:i,pageTitle:s.pageTitle,sectionHeading:s.sectionHeading},isVerified:!0,isUserConfirmed:!1})),r=(a.services||[]).map(s=>({text:s.text,confidence:s.confidence,type:s.type||"service",category:s.category,source:{sourceUrl:s.sourceUrl||t,sourceContext:s.sourceContext||"Unknown source",extractedAt:i,pageTitle:s.pageTitle,sectionHeading:s.sectionHeading},isVerified:!0,isUserConfirmed:!1})),c=(a.problemsSolved||[]).map(s=>({text:s.text,confidence:s.confidence,severity:s.severity||"medium",source:{sourceUrl:s.sourceUrl||t,sourceContext:s.sourceContext||"Unknown source",extractedAt:i,pageTitle:s.pageTitle,sectionHeading:s.sectionHeading},isVerified:!0,isUserConfirmed:!1})),d=(a.testimonials||[]).map(s=>({text:s.text,confidence:s.confidence,customerName:s.customerName,customerRole:s.customerRole,customerCompany:s.customerCompany,hasMetrics:s.hasMetrics||!1,metrics:s.metrics,rating:s.rating,source:{sourceUrl:s.sourceUrl||t,sourceContext:s.sourceContext||"Unknown source",extractedAt:i,pageTitle:s.pageTitle,sectionHeading:s.sectionHeading},isVerified:!0,isUserConfirmed:!1})),m=(a.differentiators||[]).map(s=>({text:s.text,confidence:s.confidence,category:s.category||"other",isQuantifiable:s.isQuantifiable||!1,quantification:s.quantification,source:{sourceUrl:s.sourceUrl||t,sourceContext:s.sourceContext||"Unknown source",extractedAt:i,pageTitle:s.pageTitle,sectionHeading:s.sectionHeading},isVerified:!0,isUserConfirmed:!1}));return{websiteUrl:t,extractedAt:i,customerTypes:o,services:r,problemsSolved:c,testimonials:d,differentiators:m,overallConfidence:0,verificationRate:0,completeness:0,sourcesAnalyzed:[t],sourceQuality:"medium",warnings:[]}}hasValidSource(t){return!!(t.source&&t.source.sourceUrl&&t.source.sourceUrl.startsWith("http")&&t.source.sourceContext&&t.source.sourceContext!=="Unknown source")}calculateOverallConfidence(t){const a=[...t.customerTypes,...t.services,...t.problemsSolved,...t.testimonials,...t.differentiators];return a.length===0?0:a.reduce((o,r)=>o+r.confidence,0)/a.length}calculateVerificationRate(t){const a=[...t.customerTypes,...t.services,...t.problemsSolved,...t.testimonials,...t.differentiators];return a.length===0?0:a.filter(o=>this.hasValidSource(o)).length/a.length}calculateCompleteness(t){let a=0,i=5;return t.customerTypes.length>0&&a++,t.services.length>0&&a++,t.problemsSolved.length>0&&a++,t.testimonials.length>0&&a++,t.differentiators.length>0&&a++,a/i}assessSourceQuality(t){const a=t.verificationRate,i=t.overallConfidence;return a>=.9&&i>=.8?"high":a>=.7&&i>=.6?"medium":"low"}createError(t,a){return{type:t,message:a.message||"Unknown error",details:a}}}const G=({progress:n,operation:t})=>{var c;const[a,i]=h.useState(n.nextRetryIn?Math.ceil(n.nextRetryIn/1e3):0);h.useEffect(()=>{if(!n.nextRetryIn){i(0);return}i(Math.ceil(n.nextRetryIn/1e3));const d=setInterval(()=>{i(m=>m<=1?(clearInterval(d),0):m-1)},1e3);return()=>clearInterval(d)},[n.nextRetryIn]);const o=a>0,r=!!n.error;return e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o?e.jsx(_e,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 animate-spin"}):e.jsx(K,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-orange-900 dark:text-orange-300 mb-1",children:o?`Retrying ${t}...`:`Attempting ${t}`}),r&&((c=n.error)==null?void 0:c.userMessage)&&e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-400 mb-2",children:n.error.userMessage}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-orange-700 dark:text-orange-500",children:["Attempt ",n.attempt," of ",n.maxAttempts]})}),o&&a>0&&e.jsxs(y.div,{initial:{scale:.9},animate:{scale:1},className:"flex items-center gap-2 px-3 py-1 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:[e.jsx(Q,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsxs("span",{className:"text-orange-900 dark:text-orange-300 font-medium tabular-nums",children:["Next attempt in ",a,"s"]})]})]}),e.jsx("div",{className:"mt-3 w-full h-2 bg-orange-200 dark:bg-orange-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${n.attempt/n.maxAttempts*100}%`},transition:{duration:.5},className:"h-full bg-gradient-to-r from-orange-500 to-orange-600 rounded-full"})}),n.attempt===n.maxAttempts&&!o&&e.jsx("p",{className:"mt-2 text-xs text-orange-700 dark:text-orange-500",children:"This is the final attempt. If it fails, we'll use cached data or minimal information."})]})]})})},gt=()=>{const n=Ve(),[t,a]=h.useState("url_input"),[i,o]=h.useState(""),[r,c]=h.useState(null),[d,m]=h.useState(null),[s,x]=h.useState(null),[P,b]=h.useState(!1),[N,u]=h.useState(null),[j,g]=h.useState([]),[p,S]=h.useState(null),[A,M]=h.useState(null),[F,q]=h.useState(!1),E=qe(),T=(l,w,f)=>{g(U=>U.find(v=>v.step===l)?U.map(v=>v.step===l?{...v,status:w,details:f}:v):[...U,{step:l,status:w,details:f}])},Z=async l=>{var w,f,U;console.log("[OnboardingPageV5] URL submitted:",l),await E.trackOnboardingStep("url_input",{url:l}),o(l),a("uvp_extraction"),b(!0),u(null),g([{step:"Extracting UVP Data",status:"pending"},{step:"Detecting Location",status:"pending"},{step:"Detecting Industry",status:"pending"},{step:"Finalizing Discovery",status:"pending"}]);try{await E.trackOnboardingStep("extraction_started",{url:l}),T("Understanding your unique offerings","in_progress","Reading your website content...");const v=await new Ze().extractUVPWithCache({websiteUrl:l,minConfidence:.6,requireSources:!0},k=>{S(k),k.attempt>1&&T("Understanding your unique offerings","in_progress",`Retry attempt ${k.attempt}/${k.maxAttempts}...`)});S(null),T("Understanding your unique offerings","complete",`Found ${v.customerTypes.length} customers, ${v.services.length} services, ${v.problemsSolved.length} problems`),console.log("[OnboardingPageV5] UVP extracted:",{customers:v.customerTypes.length,services:v.services.length,problems:v.problemsSolved.length}),T("Detecting Location","in_progress","Analyzing website for location data...");const C=await Me.detectLocation(l),le=C?C.city?`${C.city}, ${C.state}`:C.state:"Not detected";T("Detecting Location","complete",le),console.log("[OnboardingPageV5] Location detected:",C),T("Detecting Industry","in_progress","Matching services to industry codes...");let V="General Business";if(v.services.length>0){const k=await $e.findMatch(v.services.map(B=>B.text).join(", "));k&&k.match&&(V=k.match.display_name)}T("Detecting Industry","complete",V),console.log("[OnboardingPageV5] Industry detected:",V);const I={url:l,businessName:(k=>{try{const D=new URL(k).hostname.split("."),H=D.length>2?D[D.length-2]:D[0];return H.charAt(0).toUpperCase()+H.slice(1)}catch{return"Your Business"}})(l),industry:V,location:C?C.city?`${C.city}, ${C.state}`:C.state:"Location not detected",services:v.services.map(k=>k.text),competitors:[],uvpData:v,sources:{website:l,verified:v.verificationRate>.7}};T("Finalizing Discovery","in_progress","Preparing summary..."),c(I),T("Finalizing Discovery","complete","Discovery complete!"),await new Promise(k=>setTimeout(k,1e3)),b(!1),S(null),await E.trackOnboardingStep("extraction_complete",{customersFound:(w=I.uvpData)==null?void 0:w.customerTypes.length,servicesFound:(f=I.uvpData)==null?void 0:f.services.length,problemsFound:(U=I.uvpData)==null?void 0:U.problemsSolved.length}),a("path_selection")}catch(R){console.error("[OnboardingPageV5] URL submission error:",R),b(!1),p&&p.error?u(p.error.userMessage):u(R instanceof Error?R.message:"Failed to analyze website. Please try again or check the URL."),a("url_input"),S(null),T("Understanding your unique offerings","error","Analysis failed")}},ee=l=>{console.log("[OnboardingPageV5] Business detected (legacy):",l),c(l),a("path_selection")},te=async l=>{console.log("[OnboardingPageV5] Path selected:",l),m(l),l==="campaign"?(await E.trackOnboardingStep("campaign_selected",{path:l}),await ae()):(await E.trackOnboardingStep("post_selected",{path:l}),a("post_type_selection"))},se=(l,w)=>{console.log("[OnboardingPageV5] Post type selected:",l,w),x(l),re(l)},ae=async()=>{if(console.log("[OnboardingPageV5] Generating campaign..."),!r||!r.uvpData){console.error("[OnboardingPageV5] No business data available for generation");return}q(!0),await E.trackOnboardingStep("generation_started",{campaignType:"authority_builder",businessName:r.businessName});try{const l={businessData:{businessName:r.businessName,specialization:r.industry,location:r.location,selectedServices:r.services,selectedCustomers:r.uvpData.customerTypes.map(f=>f.text),selectedValueProps:r.uvpData.differentiators.map(f=>f.text),selectedTestimonials:r.uvpData.testimonials.map(f=>f.text)},uvpData:r.uvpData,websiteAnalysis:null,specialization:r.industry},w=await Le.generateCampaign({campaignId:`campaign-${Date.now()}`,campaignType:"authority_builder",businessContext:l,options:{postsPerCampaign:5,platforms:["linkedin","facebook"],includeVisuals:!1,saveToDatabase:!1}},f=>{M(f),console.log(`[OnboardingPageV5] Generation progress: ${f.progress}% - ${f.stage}`)},f=>{S(f),console.log(`[OnboardingPageV5] Retry attempt: ${f.attempt}/${f.maxAttempts}`)});console.log("[OnboardingPageV5] Campaign generated:",w),await E.trackOnboardingStep("generation_complete",{campaignId:w.id,postsGenerated:w.posts.length,campaignType:w.campaignType}),q(!1),M(null),S(null),a("content_preview"),await E.trackOnboardingStep("preview_viewed",{campaignId:w.id})}catch(l){console.error("[OnboardingPageV5] Campaign generation failed:",l),q(!1),M(null),S(null),u(l instanceof Error?l.message:"Failed to generate campaign. Please try again.")}},re=async(l,w)=>{console.log("[OnboardingPageV5] Generating single post:",l),a("content_preview")},ie=()=>{console.log("[OnboardingPageV5] Content copied")},ne=()=>{console.log("[OnboardingPageV5] Saving to calendar..."),a("complete"),setTimeout(()=>{n("/campaign/new")},2e3)},oe=l=>{console.log("[OnboardingPageV5] Email captured:",l)};return e.jsxs("div",{className:"min-h-screen",children:[t==="url_input"&&e.jsx(Fe,{onUrlSubmit:Z,onComplete:ee}),t==="uvp_extraction"&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Discovering Your Business..."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"AI-powered analysis in progress"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-4",children:j.map((l,w)=>e.jsxs("div",{className:`flex items-start gap-4 pb-4 ${w<j.length-1?"border-b border-gray-200 dark:border-gray-700":""}`,children:[e.jsxs("div",{className:"flex-shrink-0 mt-1",children:[l.status==="pending"&&e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600"}),l.status==="in_progress"&&e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-purple-600 border-t-transparent animate-spin"}),l.status==="complete"&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),l.status==="error"&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-lg font-semibold ${l.status==="in_progress"?"text-purple-600 dark:text-purple-400":l.status==="complete"?"text-green-600 dark:text-green-400":l.status==="error"?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:l.step}),l.details&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:l.details})]})]},l.step))}),p&&p.attempt>1&&e.jsx("div",{className:"mt-4",children:e.jsx(G,{progress:p,operation:"website analysis"})}),N&&e.jsxs("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-3",children:N}),e.jsx("button",{onClick:()=>a("url_input"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})]})}),F&&A&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Generating Your Campaign..."}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["AI is crafting ",A.totalPosts," personalized posts"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"capitalize",children:A.stage.replace(/_/g," ")}),e.jsxs("span",{children:[A.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${A.progress}%`}})})]}),A.currentPost&&A.currentPost>0&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:["Generating post ",A.currentPost," of ",A.totalPosts]})]}),p&&p.attempt>1&&e.jsx("div",{className:"mt-4",children:e.jsx(G,{progress:p,operation:"content generation"})})]})}),t==="path_selection"&&r&&!F&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-lg rounded-lg p-6 max-w-4xl mx-auto my-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Discovery Complete! 🎉"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Business"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.businessName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Industry"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.industry})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Services Found"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.services.length})]})]}),r.uvpData&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"UVP Data Extracted:"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["• ",r.uvpData.customerTypes.length," customer types"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["• ",r.uvpData.services.length," services"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["• ",r.uvpData.problemsSolved.length," problems solved"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["• ",r.uvpData.testimonials.length," testimonials"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["• Verification Rate: ",((r.uvpData.verificationRate||0)*100).toFixed(0),"%"]})]})]})]}),e.jsx(He,{onSelectPath:te})]}),t==="post_type_selection"&&e.jsx(ze,{onSelectType:se}),t==="content_preview"&&e.jsx(Ge,{content:{type:d==="campaign"?"campaign":"single_post",content:"Generated content will appear here...",sources:r!=null&&r.sources.website?[{url:r.sources.website,title:r.businessName,type:"website"}]:[]},onCopy:ie,onSaveToCalendar:ne,onEmailCapture:oe}),t==="complete"&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"All Set! 🎉"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecting to your campaign..."})]})})]})};export{gt as OnboardingPageV5};
//# sourceMappingURL=OnboardingPageV5-Co0HXn9X.js.map
