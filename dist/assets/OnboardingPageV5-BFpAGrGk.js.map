{"version":3,"file":"OnboardingPageV5-BFpAGrGk.js","sources":["../../src/components/onboarding-v5/OnboardingFlow.tsx","../../src/components/onboarding-v5/PathSelector.tsx","../../src/components/onboarding-v5/SinglePostTypeSelector.tsx","../../src/components/onboarding-v5/ContentPreview.tsx","../../src/services/scraping/websiteScraper.ts","../../src/services/uvp-wizard/SmartUVPExtractor.ts","../../src/components/onboarding-v5/RetryProgress.tsx","../../src/pages/OnboardingPageV5.tsx"],"sourcesContent":["/**\n * OnboardingFlow Component\n *\n * Single URL input landing page with progressive status indicators.\n * Auto-detects business data and transitions to smart confirmation.\n *\n * CORE PRINCIPLES:\n * - Single URL input (no manual forms)\n * - Progressive status updates during detection\n * - Auto-transition when complete\n * - Mobile-first with thumb-friendly targets\n * - Source verification from website data\n */\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Globe, Search, Users, TrendingUp, CheckCircle, Loader2, ArrowRight } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { IndustrySelector, type IndustryOption } from './IndustrySelector';\n\ninterface OnboardingFlowProps {\n  onComplete?: (businessData: DetectedBusinessData) => void;\n  onUrlSubmit?: (url: string, industry: IndustryOption) => void;\n}\n\ninterface DetectedBusinessData {\n  url: string;\n  businessName: string;\n  industry: string;\n  location: string;\n  services: string[];\n  competitors: string[];\n  sources: {\n    website: string;\n    verified: boolean;\n  };\n}\n\ntype DetectionStatus =\n  | 'idle'\n  | 'analyzing'\n  | 'finding_services'\n  | 'identifying_customers'\n  | 'analyzing_competitors'\n  | 'complete';\n\ninterface StatusStep {\n  id: DetectionStatus;\n  label: string;\n  icon: React.ReactNode;\n}\n\nconst DETECTION_STEPS: StatusStep[] = [\n  { id: 'analyzing', label: 'Analyzing website...', icon: <Globe className=\"w-5 h-5\" /> },\n  { id: 'finding_services', label: 'Finding services...', icon: <Search className=\"w-5 h-5\" /> },\n  {\n    id: 'identifying_customers',\n    label: 'Identifying customers...',\n    icon: <Users className=\"w-5 h-5\" />,\n  },\n  {\n    id: 'analyzing_competitors',\n    label: 'Analyzing competitors...',\n    icon: <TrendingUp className=\"w-5 h-5\" />,\n  },\n  { id: 'complete', label: 'Detection complete!', icon: <CheckCircle className=\"w-5 h-5\" /> },\n];\n\nexport const OnboardingFlow: React.FC<OnboardingFlowProps> = ({ onComplete, onUrlSubmit }) => {\n  const [url, setUrl] = useState('');\n  const [selectedIndustry, setSelectedIndustry] = useState<IndustryOption | null>(null);\n  const [status, setStatus] = useState<DetectionStatus>('idle');\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!url.trim()) {\n      setError('Please enter your website URL');\n      return;\n    }\n\n    if (!selectedIndustry) {\n      setError('Please select your business type');\n      return;\n    }\n\n    // Validate URL format\n    const fullUrl = url.startsWith('http') ? url : `https://${url}`;\n    try {\n      new URL(fullUrl);\n    } catch {\n      setError('Please enter a valid website URL');\n      return;\n    }\n\n    setError(null);\n\n    // If onUrlSubmit is provided, use that (new flow with real extraction)\n    if (onUrlSubmit) {\n      onUrlSubmit(fullUrl, selectedIndustry);\n      return;\n    }\n\n    // Otherwise fall back to legacy simulation\n    await runDetection(fullUrl);\n  };\n\n  const runDetection = async (websiteUrl: string) => {\n    // Simulate progressive detection with status updates\n    const steps: DetectionStatus[] = [\n      'analyzing',\n      'finding_services',\n      'identifying_customers',\n      'analyzing_competitors',\n      'complete',\n    ];\n\n    for (const step of steps) {\n      setStatus(step);\n\n      // Simulate detection time (in production, this would be real API calls)\n      await new Promise((resolve) => setTimeout(resolve, step === 'analyzing' ? 1500 : 1000));\n    }\n\n    // Mock detected data (in production, this comes from SmartUVPExtractor)\n    const detectedData: DetectedBusinessData = {\n      url: websiteUrl,\n      businessName: 'Acme Business',\n      industry: 'Professional Services',\n      location: 'San Francisco, CA',\n      services: ['Service A', 'Service B', 'Service C'],\n      competitors: ['Competitor 1', 'Competitor 2'],\n      sources: {\n        website: websiteUrl,\n        verified: true,\n      },\n    };\n\n    // Wait a moment to show complete state\n    await new Promise((resolve) => setTimeout(resolve, 800));\n\n    // Auto-transition to next step\n    onComplete(detectedData);\n  };\n\n  const currentStepIndex = DETECTION_STEPS.findIndex((step) => step.id === status);\n  const isDetecting = status !== 'idle' && status !== 'complete';\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"w-full max-w-2xl\"\n      >\n        {/* Logo/Title */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-8 sm:mb-12\"\n        >\n          <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-3 sm:mb-4\">\n            Welcome to Synapse\n          </h1>\n          <p className=\"text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-xl mx-auto px-4\">\n            Let's create content that drives results. Just enter your website URL to get started.\n          </p>\n        </motion.div>\n\n        {/* Main Content Card */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6 sm:p-8 md:p-10 border border-gray-200 dark:border-slate-700\"\n        >\n          <AnimatePresence mode=\"wait\">\n            {status === 'idle' ? (\n              // URL Input Form\n              <motion.div\n                key=\"input\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n              >\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  {/* Large URL Input */}\n                  <div>\n                    <label\n                      htmlFor=\"website-url\"\n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-center\"\n                    >\n                      What's your website URL?\n                    </label>\n                    <Input\n                      id=\"website-url\"\n                      type=\"text\"\n                      value={url}\n                      onChange={(e) => setUrl(e.target.value)}\n                      placeholder=\"www.yourbusiness.com\"\n                      className=\"text-center text-lg sm:text-xl py-6 sm:py-8 px-4 rounded-xl border-2 border-gray-300 dark:border-slate-600 focus:border-purple-500 dark:focus:border-purple-500 transition-colors\"\n                      autoFocus\n                      disabled={isDetecting}\n                    />\n                  </div>\n\n                  {/* Industry Selector */}\n                  <div>\n                    <IndustrySelector\n                      websiteUrl={url}\n                      onIndustrySelected={(industry) => {\n                        setSelectedIndustry(industry);\n                        setError(null);\n                      }}\n                      className=\"industry-selector-inline\"\n                    />\n                  </div>\n\n                  {error && (\n                    <motion.p\n                      initial={{ opacity: 0, y: -10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"text-red-600 dark:text-red-400 text-sm mt-2 text-center\"\n                    >\n                      {error}\n                    </motion.p>\n                  )}\n\n\n                  {/* Submit Button */}\n                  <Button\n                    type=\"submit\"\n                    size=\"lg\"\n                    className=\"w-full py-6 sm:py-8 text-base sm:text-lg rounded-xl bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl min-h-[56px]\"\n                    disabled={isDetecting}\n                  >\n                    {isDetecting ? (\n                      <>\n                        <Loader2 className=\"w-5 h-5 sm:w-6 sm:h-6 mr-2 animate-spin\" />\n                        Analyzing...\n                      </>\n                    ) : (\n                      <>\n                        Get Started\n                        <ArrowRight className=\"w-5 h-5 sm:w-6 sm:h-6 ml-2\" />\n                      </>\n                    )}\n                  </Button>\n                </form>\n\n                {/* Trust Indicators */}\n                <div className=\"mt-8 pt-8 border-t border-gray-200 dark:border-slate-700\">\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center\">\n                    <div>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-purple-600 dark:text-purple-400 mb-1\">\n                        45s\n                      </div>\n                      <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                        Average setup time\n                      </div>\n                    </div>\n                    <div>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-blue-600 dark:text-blue-400 mb-1\">\n                        100%\n                      </div>\n                      <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                        Source verified\n                      </div>\n                    </div>\n                    <div>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-violet-600 dark:text-violet-400 mb-1\">\n                        No BS\n                      </div>\n                      <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                        Real data only\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            ) : (\n              // Detection Progress\n              <motion.div\n                key=\"detection\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"space-y-6\"\n              >\n                {/* Progress Steps */}\n                <div className=\"space-y-4\">\n                  {DETECTION_STEPS.map((step, index) => {\n                    const isActive = status === step.id;\n                    const isComplete = index < currentStepIndex;\n                    const isPending = index > currentStepIndex;\n\n                    return (\n                      <motion.div\n                        key={step.id}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: index * 0.1 }}\n                        className={`\n                          flex items-center gap-4 p-4 rounded-xl transition-all duration-300\n                          ${isActive ? 'bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500' : ''}\n                          ${isComplete ? 'bg-green-50 dark:bg-green-900/20' : ''}\n                          ${isPending ? 'opacity-40' : ''}\n                        `}\n                      >\n                        {/* Icon */}\n                        <div\n                          className={`\n                          flex-shrink-0 flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full transition-colors\n                          ${isActive ? 'bg-purple-500 text-white animate-pulse' : ''}\n                          ${isComplete ? 'bg-green-500 text-white' : ''}\n                          ${isPending ? 'bg-gray-200 dark:bg-slate-700 text-gray-400' : ''}\n                        `}\n                        >\n                          {isActive ? (\n                            <Loader2 className=\"w-5 h-5 sm:w-6 sm:h-6 animate-spin\" />\n                          ) : (\n                            step.icon\n                          )}\n                        </div>\n\n                        {/* Label */}\n                        <span\n                          className={`\n                          text-sm sm:text-base font-medium\n                          ${isActive ? 'text-purple-700 dark:text-purple-300' : ''}\n                          ${isComplete ? 'text-green-700 dark:text-green-300' : ''}\n                          ${isPending ? 'text-gray-500 dark:text-gray-400' : ''}\n                        `}\n                        >\n                          {step.label}\n                        </span>\n                      </motion.div>\n                    );\n                  })}\n                </div>\n\n                {/* Progress Bar */}\n                <div className=\"relative pt-2\">\n                  <div className=\"h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden\">\n                    <motion.div\n                      className=\"h-full bg-gradient-to-r from-purple-600 to-blue-600\"\n                      initial={{ width: 0 }}\n                      animate={{\n                        width: `${((currentStepIndex + 1) / DETECTION_STEPS.length) * 100}%`,\n                      }}\n                      transition={{ duration: 0.5 }}\n                    />\n                  </div>\n                  <p className=\"text-xs sm:text-sm text-center text-gray-600 dark:text-gray-400 mt-3\">\n                    {Math.round(((currentStepIndex + 1) / DETECTION_STEPS.length) * 100)}% complete\n                  </p>\n                </div>\n\n                {/* Detected URL */}\n                <div className=\"text-center pt-4 border-t border-gray-200 dark:border-slate-700\">\n                  <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1\">\n                    Analyzing\n                  </p>\n                  <p className=\"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate\">\n                    {url}\n                  </p>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </motion.div>\n\n        {/* Footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"text-center mt-6 sm:mt-8\"\n        >\n          <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n            All data sourced from your website. No fabrication. Ever.\n          </p>\n        </motion.div>\n      </motion.div>\n    </div>\n  );\n};\n","/**\n * PathSelector Component\n *\n * Presents two clear path options: Full Campaign vs Single Post\n * Clean, mobile-friendly selection interface with benefits display\n */\n\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport { Calendar, Zap, CheckCircle2, Clock, Target, Sparkles } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\nexport type ContentPath = 'campaign' | 'single_post';\n\ninterface PathSelectorProps {\n  onSelectPath: (path: ContentPath) => void;\n}\n\ninterface PathOption {\n  id: ContentPath;\n  title: string;\n  subtitle: string;\n  icon: React.ReactNode;\n  benefits: string[];\n  recommended?: boolean;\n}\n\nconst PATH_OPTIONS: PathOption[] = [\n  {\n    id: 'campaign',\n    title: 'Generate Full Campaign',\n    subtitle: 'Multi-post calendar with scheduling',\n    icon: <Calendar className=\"w-8 h-8\" />,\n    benefits: [\n      '7-14 days of content',\n      'Auto-scheduled posts',\n      'Platform-optimized',\n      'Consistent brand voice',\n      'Higher engagement',\n    ],\n    recommended: true,\n  },\n  {\n    id: 'single_post',\n    title: 'Create Single Post',\n    subtitle: 'Quick single piece of content',\n    icon: <Zap className=\"w-8 h-8\" />,\n    benefits: [\n      'Ready in 30 seconds',\n      'Perfect for quick needs',\n      'Test new ideas',\n      'Fill content gaps',\n      'Flexible timing',\n    ],\n  },\n];\n\nexport const PathSelector: React.FC<PathSelectorProps> = ({ onSelectPath }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"w-full max-w-5xl\"\n      >\n        {/* Header */}\n        <div className=\"text-center mb-8 sm:mb-12\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 rounded-full mb-4\"\n          >\n            <Sparkles className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\n            <span className=\"text-sm font-medium text-purple-700 dark:text-purple-300\">\n              Step 2 of 3\n            </span>\n          </motion.div>\n\n          <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4\">\n            Choose Your Path\n          </h1>\n          <p className=\"text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto\">\n            Select how you want to create content today\n          </p>\n        </div>\n\n        {/* Path Options */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6\">\n          {PATH_OPTIONS.map((option, index) => (\n            <motion.div\n              key={option.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"relative\"\n            >\n              {/* Recommended Badge */}\n              {option.recommended && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 z-10\">\n                  <div className=\"px-4 py-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-medium rounded-full shadow-lg\">\n                    ⭐ Recommended\n                  </div>\n                </div>\n              )}\n\n              {/* Card */}\n              <button\n                onClick={() => onSelectPath(option.id)}\n                className={`\n                  w-full text-left p-6 sm:p-8 rounded-2xl border-2 transition-all duration-200\n                  bg-white dark:bg-slate-800\n                  hover:border-purple-500 hover:shadow-xl hover:scale-[1.02]\n                  focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2\n                  min-h-[56px]\n                  ${option.recommended\n                    ? 'border-purple-300 dark:border-purple-700 shadow-lg'\n                    : 'border-gray-200 dark:border-slate-700'\n                  }\n                `}\n              >\n                {/* Icon & Title */}\n                <div className=\"flex items-start gap-4 mb-6\">\n                  <div\n                    className={`\n                    flex-shrink-0 p-3 rounded-xl\n                    ${option.recommended\n                      ? 'bg-gradient-to-br from-purple-500 to-blue-500 text-white'\n                      : 'bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300'\n                    }\n                  `}\n                  >\n                    {option.icon}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-1\">\n                      {option.title}\n                    </h3>\n                    <p className=\"text-sm sm:text-base text-gray-600 dark:text-gray-400\">\n                      {option.subtitle}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Benefits */}\n                <div className=\"space-y-3\">\n                  {option.benefits.map((benefit, idx) => (\n                    <div key={idx} className=\"flex items-center gap-3\">\n                      <CheckCircle2\n                        className={`\n                        w-5 h-5 flex-shrink-0\n                        ${option.recommended\n                          ? 'text-purple-500'\n                          : 'text-gray-400 dark:text-gray-500'\n                        }\n                      `}\n                      />\n                      <span className=\"text-sm sm:text-base text-gray-700 dark:text-gray-300\">\n                        {benefit}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n\n                {/* CTA */}\n                <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                      <Clock className=\"w-4 h-4\" />\n                      <span>{option.id === 'campaign' ? '2-3 min' : '30 sec'}</span>\n                    </div>\n                    <div\n                      className={`\n                      font-medium\n                      ${option.recommended\n                        ? 'text-purple-600 dark:text-purple-400'\n                        : 'text-gray-900 dark:text-white'\n                      }\n                    `}\n                    >\n                      Select →\n                    </div>\n                  </div>\n                </div>\n              </button>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Footer Info */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"mt-8 text-center\"\n        >\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-gray-200 dark:border-slate-700\">\n            <Target className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Both paths use 100% source-verified content\n            </span>\n          </div>\n        </motion.div>\n      </motion.div>\n    </div>\n  );\n};\n","/**\n * SinglePostTypeSelector Component\n *\n * 5 post types with SOURCE REQUIREMENT badges.\n * Customer Success Stories REQUIRE user input or source link - NO FABRICATION.\n */\n\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Star,\n  Lightbulb,\n  AlertCircle,\n  TrendingUp,\n  MessageCircle,\n  Shield,\n  Link as LinkIcon,\n  Edit3,\n  BookOpen,\n  Mail,\n  GraduationCap,\n} from 'lucide-react';\n\nexport type PostType =\n  | 'customer_success'\n  | 'service_spotlight'\n  | 'problem_solution'\n  | 'value_proposition'\n  | 'community_engagement'\n  | 'blog_article'\n  | 'newsletter'\n  | 'educational_tip';\n\ninterface PostTypeOption {\n  id: PostType;\n  title: string;\n  description: string;\n  badge: {\n    text: string;\n    type: 'user_input' | 'source_verified' | 'fact_based';\n  };\n  icon: React.ReactNode;\n  example: string;\n  requiresModal: boolean;\n}\n\nconst POST_TYPES: PostTypeOption[] = [\n  {\n    id: 'customer_success',\n    title: 'Customer Success Story',\n    description: 'Share real results from actual customers. Builds trust through proof.',\n    badge: { text: 'User Input Required', type: 'user_input' },\n    icon: <Star className=\"w-6 h-6\" />,\n    example: '\"How [Customer] achieved [Result] with our [Service]\"',\n    requiresModal: true,\n  },\n  {\n    id: 'service_spotlight',\n    title: 'Service Spotlight',\n    description: 'Highlight a specific service with verified website data.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <Lightbulb className=\"w-6 h-6\" />,\n    example: '\"What makes our [Service] different: [Key Benefits]\"',\n    requiresModal: false,\n  },\n  {\n    id: 'problem_solution',\n    title: 'Problem/Solution Post',\n    description: 'Address customer pain points with your verified solutions.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <AlertCircle className=\"w-6 h-6\" />,\n    example: '\"Struggling with [Problem]? Here\\'s how we solve it...\"',\n    requiresModal: false,\n  },\n  {\n    id: 'value_proposition',\n    title: 'Value Proposition Post',\n    description: 'Showcase what makes you unique using verified differentiators.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <TrendingUp className=\"w-6 h-6\" />,\n    example: '\"Why choose us? [Verified Differentiators]\"',\n    requiresModal: false,\n  },\n  {\n    id: 'community_engagement',\n    title: 'Community Engagement',\n    description: 'Ask fact-based questions to engage your audience.',\n    badge: { text: 'Fact-Based', type: 'fact_based' },\n    icon: <MessageCircle className=\"w-6 h-6\" />,\n    example: '\"What\\'s your biggest challenge with [Topic]?\"',\n    requiresModal: false,\n  },\n  {\n    id: 'blog_article',\n    title: 'Blog Article',\n    description: 'In-depth article based on your expertise and verified content.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <BookOpen className=\"w-6 h-6\" />,\n    example: '\"The Complete Guide to [Service/Topic]\"',\n    requiresModal: false,\n  },\n  {\n    id: 'newsletter',\n    title: 'Newsletter Content',\n    description: 'Email newsletter with updates, tips, or insights from your business.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <Mail className=\"w-6 h-6\" />,\n    example: '\"This month\\'s updates and tips from [Business]\"',\n    requiresModal: false,\n  },\n  {\n    id: 'educational_tip',\n    title: 'Educational Tip',\n    description: 'Quick, valuable tip or insight related to your expertise.',\n    badge: { text: 'Source Verified', type: 'source_verified' },\n    icon: <GraduationCap className=\"w-6 h-6\" />,\n    example: '\"Pro tip: [Expert advice from your experience]\"',\n    requiresModal: false,\n  },\n];\n\ninterface SinglePostTypeSelectorProps {\n  onSelectType: (type: PostType) => void;\n}\n\nexport const SinglePostTypeSelector: React.FC<SinglePostTypeSelectorProps> = ({ onSelectType }) => {\n  const getBadgeStyles = (type: 'user_input' | 'source_verified' | 'fact_based') => {\n    switch (type) {\n      case 'user_input':\n        return 'bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-700';\n      case 'source_verified':\n        return 'bg-green-100 text-green-700 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-700';\n      case 'fact_based':\n        return 'bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-700';\n    }\n  };\n\n  const getBadgeIcon = (type: 'user_input' | 'source_verified' | 'fact_based') => {\n    switch (type) {\n      case 'user_input':\n        return <Edit3 className=\"w-3 h-3\" />;\n      case 'source_verified':\n        return <Shield className=\"w-3 h-3\" />;\n      case 'fact_based':\n        return <LinkIcon className=\"w-3 h-3\" />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 p-4 py-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3\">\n            Choose Your Post Type\n          </h1>\n          <p className=\"text-base sm:text-lg text-gray-600 dark:text-gray-400\">\n            All content is source-verified. No fabrication. Ever.\n          </p>\n        </div>\n\n        {/* Post Types Grid */}\n        <div className=\"space-y-4\">\n          {POST_TYPES.map((postType, index) => (\n            <motion.button\n              key={postType.id}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: index * 0.05 }}\n              onClick={() => onSelectType(postType.id)}\n              className=\"w-full text-left p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl border-2 border-gray-200 dark:border-slate-700 hover:border-purple-500 hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[56px]\"\n            >\n              <div className=\"flex flex-col sm:flex-row gap-4\">\n                {/* Icon */}\n                <div className=\"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white\">\n                  {postType.icon}\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2\">\n                    <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 dark:text-white\">\n                      {postType.title}\n                    </h3>\n\n                    {/* Badge */}\n                    <span\n                      className={`\n                        inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border whitespace-nowrap\n                        ${getBadgeStyles(postType.badge.type)}\n                      `}\n                    >\n                      {getBadgeIcon(postType.badge.type)}\n                      {postType.badge.text}\n                    </span>\n                  </div>\n\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">\n                    {postType.description}\n                  </p>\n\n                  {/* Example */}\n                  <div className=\"p-3 bg-gray-50 dark:bg-slate-900/50 rounded-lg border border-gray-200 dark:border-slate-700\">\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium\">\n                      Example:\n                    </p>\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 italic\">\n                      {postType.example}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </motion.button>\n          ))}\n        </div>\n\n        {/* Footer Note */}\n        <div className=\"mt-8 text-center\">\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-gray-200 dark:border-slate-700\">\n            <Shield className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n              100% Authentic Content - Sources Always Visible\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * ContentPreview Component\n *\n * Displays generated content (campaign OR single post) with SOURCE ATTRIBUTION.\n * Critical: All content shows sources - \"All facts verified\" badge.\n */\n\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Copy,\n  Check,\n  Calendar,\n  Shield,\n  ExternalLink,\n  ChevronDown,\n  ChevronUp,\n  Save,\n  Mail,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface ContentSource {\n  url: string;\n  title: string;\n  type: 'website' | 'testimonial' | 'review' | 'case_study' | 'user_input';\n}\n\ninterface GeneratedContent {\n  type: 'campaign' | 'single_post';\n  content: string;\n  platform?: string;\n  sources: ContentSource[];\n  posts?: Array<{\n    day: number;\n    content: string;\n    platform: string;\n  }>;\n}\n\ninterface ContentPreviewProps {\n  content: GeneratedContent;\n  onCopy: () => void;\n  onSaveToCalendar: () => void;\n  onEmailCapture?: (email: string) => void;\n}\n\nexport const ContentPreview: React.FC<ContentPreviewProps> = ({\n  content,\n  onCopy,\n  onSaveToCalendar,\n  onEmailCapture,\n}) => {\n  const [copied, setCopied] = useState(false);\n  const [showSources, setShowSources] = useState(false);\n  const [showEmailCapture, setShowEmailCapture] = useState(false);\n  const [email, setEmail] = useState('');\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(content.content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n    onCopy();\n  };\n\n  const handleSave = () => {\n    setShowEmailCapture(true);\n  };\n\n  const handleEmailSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (email.trim() && onEmailCapture) {\n      onEmailCapture(email);\n      onSaveToCalendar();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 p-4 py-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 rounded-full mb-4\">\n            <Shield className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\n            <span className=\"text-sm font-medium text-green-700 dark:text-green-300\">\n              All Facts Verified\n            </span>\n          </div>\n\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3\">\n            {content.type === 'campaign' ? 'Your Campaign is Ready!' : 'Your Post is Ready!'}\n          </h1>\n          <p className=\"text-base sm:text-lg text-gray-600 dark:text-gray-400\">\n            {content.type === 'campaign'\n              ? 'Review your campaign calendar below'\n              : 'Copy and post now, or save to your calendar'}\n          </p>\n        </div>\n\n        {/* Content Display */}\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden mb-6\">\n          {content.type === 'single_post' ? (\n            // Single Post View\n            <div className=\"p-6\">\n              <div className=\"prose dark:prose-invert max-w-none\">\n                <div className=\"p-6 bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-200 dark:border-slate-700 whitespace-pre-wrap\">\n                  {content.content}\n                </div>\n              </div>\n\n              {content.platform && (\n                <div className=\"mt-4 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                  <span className=\"font-medium\">Platform:</span>\n                  <span className=\"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full\">\n                    {content.platform}\n                  </span>\n                </div>\n              )}\n            </div>\n          ) : (\n            // Campaign Calendar View\n            <div className=\"p-6\">\n              <div className=\"flex items-center gap-2 mb-6\">\n                <Calendar className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  7-Day Campaign Calendar\n                </h3>\n              </div>\n\n              <div className=\"space-y-4\">\n                {content.posts?.map((post, index) => (\n                  <div\n                    key={index}\n                    className=\"p-4 bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-200 dark:border-slate-700\"\n                  >\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold\">\n                          {post.day}\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-900 dark:text-white\">Day {post.day}</p>\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400\">{post.platform}</p>\n                        </div>\n                      </div>\n                    </div>\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                      {post.content}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Source Attribution Section */}\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden mb-6\">\n          <button\n            onClick={() => setShowSources(!showSources)}\n            className=\"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-900/50 transition-colors min-h-[56px]\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <Shield className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n              <div className=\"text-left\">\n                <h3 className=\"font-bold text-gray-900 dark:text-white\">Sources ({content.sources.length})</h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  All content verified from these sources\n                </p>\n              </div>\n            </div>\n            {showSources ? (\n              <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n            ) : (\n              <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n            )}\n          </button>\n\n          {showSources && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: 'auto', opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n              className=\"border-t border-gray-200 dark:border-slate-700 p-6\"\n            >\n              <div className=\"space-y-3\">\n                {content.sources.map((source, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-start gap-3 p-4 bg-gray-50 dark:bg-slate-900/50 rounded-lg border border-gray-200 dark:border-slate-700\"\n                  >\n                    <ExternalLink className=\"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-medium text-gray-900 dark:text-white text-sm mb-1\">\n                        {source.title}\n                      </p>\n                      <a\n                        href={source.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-xs text-purple-600 dark:text-purple-400 hover:underline truncate block\"\n                      >\n                        {source.url}\n                      </a>\n                      <span className=\"inline-block mt-2 px-2 py-1 bg-gray-200 dark:bg-slate-700 text-xs text-gray-600 dark:text-gray-400 rounded\">\n                        {source.type.replace('_', ' ')}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </div>\n\n        {/* Actions */}\n        {!showEmailCapture ? (\n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <Button\n              onClick={handleCopy}\n              variant=\"outline\"\n              className=\"flex-1 min-h-[56px]\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"w-5 h-5 mr-2 text-green-600\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Copy className=\"w-5 h-5 mr-2\" />\n                  Copy & Post Now\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={handleSave}\n              className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 min-h-[56px]\"\n            >\n              <Save className=\"w-5 h-5 mr-2\" />\n              Save to Calendar\n            </Button>\n          </div>\n        ) : (\n          // Email Capture Form\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-slate-700 p-6\"\n          >\n            <div className=\"flex items-center gap-3 mb-6\">\n              <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center\">\n                <Mail className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"font-bold text-gray-900 dark:text-white\">One Last Step!</h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Get full calendar access\n                </p>\n              </div>\n            </div>\n\n            <form onSubmit={handleEmailSubmit} className=\"space-y-4\">\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"your@email.com\"\n                required\n                className=\"w-full px-4 py-3 border-2 border-gray-300 dark:border-slate-600 rounded-lg focus:border-purple-500 dark:focus:border-purple-500 focus:outline-none min-h-[48px] bg-white dark:bg-slate-900 text-gray-900 dark:text-white\"\n              />\n\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 min-h-[56px]\"\n              >\n                Access Full Calendar\n              </Button>\n            </form>\n\n            <p className=\"text-xs text-center text-gray-500 dark:text-gray-400 mt-4\">\n              We'll never spam you. Just your calendar access + occasional tips.\n            </p>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n","/**\n * Website Scraper Service\n * Fetches and analyzes website content for brand analysis\n */\n\nexport interface WebsiteData {\n  url: string\n  html: string\n  metadata: {\n    title: string\n    description: string\n    keywords: string[]\n  }\n  content: {\n    headings: string[]\n    paragraphs: string[]\n    links: string[]\n    images: string[]\n  }\n  design: {\n    colors: string[]\n    fonts: string[]\n    logo?: string\n  }\n  structure: {\n    sections: string[]\n    navigation: string[]\n  }\n}\n\n/**\n * Scrape a website and extract structured data\n */\nexport async function scrapeWebsite(domain: string): Promise<WebsiteData> {\n  console.log('[websiteScraper] Starting scrape for:', domain)\n\n  try {\n    // Ensure domain has protocol\n    const url = domain.startsWith('http') ? domain : `https://${domain}`\n\n    console.log('[websiteScraper] Fetching:', url)\n\n    // Try multiple CORS proxies for client-side fetching\n    // In production, this should be a backend service\n    const proxies = [\n      `https://corsproxy.io/?${encodeURIComponent(url)}`,\n      `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,\n      `https://cors-anywhere.herokuapp.com/${url}`\n    ]\n\n    let response: Response | null = null\n    let lastError: Error | null = null\n\n    // Try each proxy until one works\n    for (const proxyUrl of proxies) {\n      try {\n        console.log('[websiteScraper] Trying proxy:', proxyUrl.split('?')[0])\n        response = await fetch(proxyUrl, {\n          method: 'GET',\n          headers: {\n            'Accept': 'text/html',\n          },\n        })\n        if (response.ok) {\n          console.log('[websiteScraper] Proxy successful:', proxyUrl.split('?')[0])\n          break\n        }\n      } catch (err) {\n        lastError = err as Error\n        console.log('[websiteScraper] Proxy failed, trying next...')\n        continue\n      }\n    }\n\n    if (!response || !response.ok) {\n      throw lastError || new Error('All proxies failed')\n    }\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch website: ${response.status} ${response.statusText}`)\n    }\n\n    const html = await response.text()\n    console.log('[websiteScraper] HTML fetched, length:', html.length)\n\n    // Parse HTML using DOMParser (built-in browser API)\n    const parser = new DOMParser()\n    const doc = parser.parseFromString(html, 'text/html')\n\n    // Extract metadata\n    const metadata = extractMetadata(doc)\n    console.log('[websiteScraper] Metadata extracted:', metadata)\n\n    // Extract content\n    const content = extractContent(doc)\n    console.log('[websiteScraper] Content extracted:', {\n      headings: content.headings.length,\n      paragraphs: content.paragraphs.length,\n      links: content.links.length,\n      images: content.images.length,\n    })\n\n    // Extract design elements\n    const design = extractDesign(doc, url)\n    console.log('[websiteScraper] Design extracted:', design)\n\n    // Extract structure\n    const structure = extractStructure(doc)\n    console.log('[websiteScraper] Structure extracted:', structure)\n\n    return {\n      url,\n      html,\n      metadata,\n      content,\n      design,\n      structure,\n    }\n  } catch (error) {\n    console.error('[websiteScraper] Error:', error)\n    throw new Error(`Website scraping failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n  }\n}\n\n/**\n * Extract metadata from HTML document\n */\nfunction extractMetadata(doc: Document): WebsiteData['metadata'] {\n  const title = doc.querySelector('title')?.textContent || ''\n\n  const descriptionMeta = doc.querySelector('meta[name=\"description\"]') ||\n                         doc.querySelector('meta[property=\"og:description\"]')\n  const description = descriptionMeta?.getAttribute('content') || ''\n\n  const keywordsMeta = doc.querySelector('meta[name=\"keywords\"]')\n  const keywordsContent = keywordsMeta?.getAttribute('content') || ''\n  const keywords = keywordsContent.split(',').map(k => k.trim()).filter(Boolean)\n\n  return {\n    title,\n    description,\n    keywords,\n  }\n}\n\n/**\n * Extract content from HTML document\n */\nfunction extractContent(doc: Document): WebsiteData['content'] {\n  // Get all headings\n  const headings: string[] = []\n  doc.querySelectorAll('h1, h2, h3').forEach(h => {\n    const text = h.textContent?.trim()\n    if (text) headings.push(text)\n  })\n\n  // Get paragraphs\n  const paragraphs: string[] = []\n  doc.querySelectorAll('p').forEach(p => {\n    const text = p.textContent?.trim()\n    if (text && text.length > 20) { // Only meaningful paragraphs\n      paragraphs.push(text)\n    }\n  })\n\n  // Get links\n  const links: string[] = []\n  doc.querySelectorAll('a[href]').forEach(a => {\n    const href = a.getAttribute('href')\n    const text = a.textContent?.trim()\n    if (text && href) {\n      links.push(text)\n    }\n  })\n\n  // Get images\n  const images: string[] = []\n  doc.querySelectorAll('img[src]').forEach(img => {\n    const src = img.getAttribute('src')\n    const alt = img.getAttribute('alt')\n    if (src) {\n      images.push(alt || src)\n    }\n  })\n\n  return {\n    headings: headings.slice(0, 20), // Top 20 headings\n    paragraphs: paragraphs.slice(0, 30), // Top 30 paragraphs\n    links: links.slice(0, 50), // Top 50 links\n    images: images.slice(0, 20), // Top 20 images\n  }\n}\n\n/**\n * Extract design elements (colors, fonts, logo)\n */\nfunction extractDesign(doc: Document, url: string): WebsiteData['design'] {\n  const colors: string[] = []\n  const fonts: string[] = []\n  let logo: string | undefined\n\n  // Try to find logo\n  const logoImg = doc.querySelector('img[alt*=\"logo\" i], img[class*=\"logo\" i], .logo img, header img') as HTMLImageElement\n  if (logoImg?.src) {\n    logo = new URL(logoImg.src, url).href\n  }\n\n  // Extract colors from inline styles (basic extraction)\n  const colorRegex = /#([0-9a-f]{3}|[0-9a-f]{6})\\b/gi\n  const bodyHTML = doc.body?.innerHTML || ''\n  const colorMatches = bodyHTML.match(colorRegex)\n  if (colorMatches) {\n    const uniqueColors = [...new Set(colorMatches)]\n    colors.push(...uniqueColors.slice(0, 10))\n  }\n\n  // Extract font families from computed styles (limited in cross-origin context)\n  // We'll make educated guesses from common patterns\n  const fontRegex = /font-family:\\s*([^;}\"']+)/gi\n  const fontMatches = [...bodyHTML.matchAll(fontRegex)]\n  const uniqueFonts = new Set<string>()\n\n  fontMatches.forEach(match => {\n    const fontFamily = match[1].trim().split(',')[0].replace(/['\"]/g, '')\n    if (fontFamily && !fontFamily.includes('inherit') && !fontFamily.includes('initial')) {\n      uniqueFonts.add(fontFamily)\n    }\n  })\n\n  fonts.push(...Array.from(uniqueFonts).slice(0, 5))\n\n  // If no colors found, use defaults\n  if (colors.length === 0) {\n    colors.push('#2563eb', '#7c3aed', '#059669', '#f59e0b')\n  }\n\n  // If no fonts found, use defaults\n  if (fonts.length === 0) {\n    fonts.push('Inter', 'Roboto', 'Open Sans')\n  }\n\n  return {\n    colors,\n    fonts,\n    logo,\n  }\n}\n\n/**\n * Extract structure (sections, navigation)\n */\nfunction extractStructure(doc: Document): WebsiteData['structure'] {\n  const sections: string[] = []\n  const navigation: string[] = []\n\n  // Get section headings\n  doc.querySelectorAll('section, article, main').forEach(section => {\n    const heading = section.querySelector('h1, h2, h3')\n    if (heading?.textContent) {\n      sections.push(heading.textContent.trim())\n    }\n  })\n\n  // Get navigation links\n  doc.querySelectorAll('nav a, header a').forEach(a => {\n    const text = a.textContent?.trim()\n    if (text && text.length < 50) { // Reasonable nav link length\n      navigation.push(text)\n    }\n  })\n\n  return {\n    sections: sections.slice(0, 10),\n    navigation: [...new Set(navigation)].slice(0, 15),\n  }\n}\n","/**\n * Smart UVP Extractor with Source Verification\n *\n * CORE PRINCIPLE: ALL extracted data MUST include source URL attribution.\n * NO fabricated data allowed. Every piece of information must be traceable to its source.\n *\n * Extends existing website analyzer with source tracking and verification.\n */\n\nimport { scrapeWebsite } from '@/services/scraping/websiteScraper';\nimport { ErrorHandlerService, RetryProgress } from '../errors/error-handler.service';\nimport type {\n  ExtractedUVPData,\n  UVPExtractionOptions,\n  CustomerType,\n  ServiceProduct,\n  ProblemSolved,\n  Testimonial,\n  Differentiator,\n  SourceAttribution,\n  UVPExtractionError,\n  createEmptyUVPData,\n} from '@/types/smart-uvp.types';\n\nexport class SmartUVPExtractor {\n  private apiKey: string;\n\n  constructor() {\n    this.apiKey = import.meta.env.VITE_OPENROUTER_API_KEY || '';\n  }\n\n  /**\n   * Extract UVP components from website with full source verification\n   */\n  async extractUVP(\n    options: UVPExtractionOptions,\n    onProgress?: (progress: RetryProgress) => void\n  ): Promise<ExtractedUVPData> {\n    console.log('[SmartUVPExtractor] Starting extraction for:', options.websiteUrl);\n\n    const {\n      websiteUrl,\n      maxPagesToAnalyze = 10,\n      minConfidence = 0.6,\n      requireSources = true,\n      includeTestimonials = true,\n    } = options;\n\n    try {\n      // Step 1: Scrape the website\n      const scrapedData = await ErrorHandlerService.executeWithRetry(\n        () => scrapeWebsite(websiteUrl),\n        { maxAttempts: 3 },\n        onProgress\n      );\n      if (!scrapedData) {\n        throw new Error('Failed to scrape website');\n      }\n\n      console.log('[SmartUVPExtractor] Website scraped:', {\n        title: scrapedData.metadata.title,\n        headings: scrapedData.content.headings.length,\n        paragraphs: scrapedData.content.paragraphs.length,\n      });\n\n      // Step 2: Extract UVP components with AI + source tracking\n      const uvpData = await ErrorHandlerService.executeWithRetry(\n        () => this.extractWithSources(websiteUrl, scrapedData),\n        { maxAttempts: 3 },\n        onProgress\n      );\n\n      // Step 3: Filter by minimum confidence\n      uvpData.customerTypes = uvpData.customerTypes.filter((c) => c.confidence >= minConfidence);\n      uvpData.services = uvpData.services.filter((s) => s.confidence >= minConfidence);\n      uvpData.problemsSolved = uvpData.problemsSolved.filter((p) => p.confidence >= minConfidence);\n      uvpData.testimonials = uvpData.testimonials.filter((t) => t.confidence >= minConfidence);\n      uvpData.differentiators = uvpData.differentiators.filter((d) => d.confidence >= minConfidence);\n\n      // Step 4: Verify all sources (if required)\n      if (requireSources) {\n        uvpData.customerTypes = uvpData.customerTypes.filter((c) => this.hasValidSource(c));\n        uvpData.services = uvpData.services.filter((s) => this.hasValidSource(s));\n        uvpData.problemsSolved = uvpData.problemsSolved.filter((p) => this.hasValidSource(p));\n        uvpData.testimonials = uvpData.testimonials.filter((t) => this.hasValidSource(t));\n        uvpData.differentiators = uvpData.differentiators.filter((d) => this.hasValidSource(d));\n      }\n\n      // Step 5: Calculate overall metrics\n      uvpData.overallConfidence = this.calculateOverallConfidence(uvpData);\n      uvpData.verificationRate = this.calculateVerificationRate(uvpData);\n      uvpData.completeness = this.calculateCompleteness(uvpData);\n      uvpData.sourceQuality = this.assessSourceQuality(uvpData);\n\n      // Step 6: Add warnings if needed\n      if (uvpData.verificationRate < 0.8) {\n        uvpData.warnings.push(\n          `Only ${(uvpData.verificationRate * 100).toFixed(0)}% of extracted data has verified sources`\n        );\n      }\n\n      if (uvpData.customerTypes.length === 0) {\n        uvpData.warnings.push('No customer types found - UVP will be less effective');\n      }\n\n      if (uvpData.differentiators.length === 0) {\n        uvpData.warnings.push('No differentiators found - consider adding manually');\n      }\n\n      console.log('[SmartUVPExtractor] Extraction complete:', {\n        customers: uvpData.customerTypes.length,\n        services: uvpData.services.length,\n        problems: uvpData.problemsSolved.length,\n        testimonials: uvpData.testimonials.length,\n        differentiators: uvpData.differentiators.length,\n        confidence: uvpData.overallConfidence,\n        verification: uvpData.verificationRate,\n      });\n\n      return uvpData;\n    } catch (error) {\n      console.error('[SmartUVPExtractor] Extraction failed:', error);\n      ErrorHandlerService.logError(error, { websiteUrl });\n      throw this.createError('extraction', error);\n    }\n  }\n\n  /**\n   * Extract UVP with cache fallback\n   */\n  async extractUVPWithCache(\n    options: UVPExtractionOptions,\n    onProgress?: (progress: RetryProgress) => void\n  ): Promise<ExtractedUVPData> {\n    const cacheKey = `uvp-${options.websiteUrl}`;\n\n    try {\n      return await ErrorHandlerService.executeWithRetry(\n        () => this.extractUVP(options, onProgress),\n        { maxAttempts: 3 },\n        onProgress,\n        [\n          ErrorHandlerService.createCacheFallback(\n            cacheKey,\n            async (key) => {\n              // Try to get from localStorage or intelligence cache\n              const cached = localStorage.getItem(key);\n              return cached ? JSON.parse(cached) : null;\n            }\n          )\n        ]\n      );\n    } catch (error) {\n      // If all retries and cache fail, return minimal data\n      console.error('[SmartUVPExtractor] All extraction attempts failed, using minimal data');\n      return this.createMinimalUVPData(options.websiteUrl);\n    }\n  }\n\n  private createMinimalUVPData(websiteUrl: string): ExtractedUVPData {\n    return {\n      websiteUrl,\n      extractedAt: new Date(),\n      customerTypes: [],\n      services: [],\n      problemsSolved: [],\n      testimonials: [],\n      differentiators: [],\n      overallConfidence: 0,\n      verificationRate: 0,\n      completeness: 0,\n      sourcesAnalyzed: [websiteUrl],\n      sourceQuality: 'low',\n      warnings: ['Extraction failed. Using minimal data. Please add details manually.'],\n    };\n  }\n\n  /**\n   * Extract UVP components with source attribution using AI\n   */\n  private async extractWithSources(websiteUrl: string, scrapedData: any): Promise<ExtractedUVPData> {\n    const prompt = this.buildExtractionPrompt(websiteUrl, scrapedData);\n\n    const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.apiKey}`,\n        'HTTP-Referer': window.location.origin,\n      },\n      body: JSON.stringify({\n        model: 'anthropic/claude-3.5-sonnet',\n        messages: [\n          {\n            role: 'system',\n            content: `You are a UVP extraction specialist. Your job is to extract UVP components from website content.\n\nCRITICAL RULES:\n1. EVERY extracted item MUST include the source URL and context where it was found\n2. NEVER fabricate data - only extract what is ACTUALLY on the website\n3. Include confidence scores (0-1) based on how clearly the information is stated\n4. If source cannot be determined, DO NOT include the item\n5. Be specific - extract exact text, not paraphrased versions\n\nReturn JSON only, no markdown.`,\n          },\n          {\n            role: 'user',\n            content: prompt,\n          },\n        ],\n        temperature: 0.3, // Low temperature for accuracy\n        response_format: { type: 'json_object' },\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`OpenRouter API error: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    const aiResponse = JSON.parse(data.choices[0].message.content);\n\n    // Parse AI response into structured data\n    return this.parseAIResponse(websiteUrl, aiResponse);\n  }\n\n  /**\n   * Build comprehensive extraction prompt\n   */\n  private buildExtractionPrompt(websiteUrl: string, scrapedData: any): string {\n    const headings = scrapedData.content.headings.slice(0, 30).join('\\n');\n    const paragraphs = scrapedData.content.paragraphs.slice(0, 50).join('\\n');\n    const navigation = scrapedData.structure.navigation.join(', ');\n\n    return `Analyze this website and extract UVP components with SOURCE ATTRIBUTION:\n\nWEBSITE: ${websiteUrl}\nTITLE: ${scrapedData.metadata.title}\nDESCRIPTION: ${scrapedData.metadata.description}\n\nHEADINGS:\n${headings}\n\nCONTENT PARAGRAPHS:\n${paragraphs}\n\nNAVIGATION:\n${navigation}\n\nExtract the following with MANDATORY source attribution:\n\nReturn JSON with this exact structure:\n{\n  \"customerTypes\": [\n    {\n      \"text\": \"exact text from website\",\n      \"confidence\": 0.85,\n      \"category\": \"demographic|industry|role|business-size|other\",\n      \"sourceUrl\": \"${websiteUrl}\",\n      \"sourceContext\": \"Found in 'About Us' section under 'Who We Serve' heading\",\n      \"pageTitle\": \"About Us | Company Name\",\n      \"sectionHeading\": \"Who We Serve\"\n    }\n  ],\n  \"services\": [\n    {\n      \"text\": \"exact service name\",\n      \"confidence\": 0.9,\n      \"type\": \"service|product|package\",\n      \"category\": \"Emergency Services\",\n      \"sourceUrl\": \"${websiteUrl}/services\",\n      \"sourceContext\": \"Listed in main services navigation\",\n      \"pageTitle\": \"Services | Company Name\",\n      \"sectionHeading\": \"Our Services\"\n    }\n  ],\n  \"problemsSolved\": [\n    {\n      \"text\": \"specific problem they solve\",\n      \"confidence\": 0.8,\n      \"severity\": \"high|medium|low\",\n      \"sourceUrl\": \"${websiteUrl}\",\n      \"sourceContext\": \"Mentioned in hero section\",\n      \"pageTitle\": \"Home | Company Name\",\n      \"sectionHeading\": \"The Problem\"\n    }\n  ],\n  \"testimonials\": [\n    {\n      \"text\": \"full testimonial text\",\n      \"confidence\": 0.95,\n      \"customerName\": \"John Doe\",\n      \"customerRole\": \"CEO\",\n      \"customerCompany\": \"Acme Corp\",\n      \"hasMetrics\": true,\n      \"metrics\": [{\"text\": \"increased revenue 40%\", \"value\": 40, \"unit\": \"%\"}],\n      \"sourceUrl\": \"${websiteUrl}/testimonials\",\n      \"sourceContext\": \"Featured testimonial on testimonials page\",\n      \"pageTitle\": \"Testimonials | Company Name\",\n      \"sectionHeading\": \"What Our Clients Say\"\n    }\n  ],\n  \"differentiators\": [\n    {\n      \"text\": \"what makes them unique\",\n      \"confidence\": 0.85,\n      \"category\": \"speed|quality|price|expertise|service|technology|other\",\n      \"isQuantifiable\": true,\n      \"quantification\": \"24/7 service\",\n      \"sourceUrl\": \"${websiteUrl}/about\",\n      \"sourceContext\": \"Listed in 'Why Choose Us' section\",\n      \"pageTitle\": \"About | Company Name\",\n      \"sectionHeading\": \"Why Choose Us\"\n    }\n  ]\n}\n\nCRITICAL REQUIREMENTS:\n- Every item MUST have sourceUrl and sourceContext\n- Use actual URLs from the navigation/links where possible\n- Extract EXACT text, don't paraphrase\n- Confidence based on clarity (explicit statement = 0.9+, implied = 0.6-0.8)\n- If you can't determine the source, DON'T include the item\n- Maximum 10 items per category`;\n  }\n\n  /**\n   * Parse AI response into ExtractedUVPData\n   */\n  private parseAIResponse(websiteUrl: string, aiResponse: any): ExtractedUVPData {\n    const now = new Date();\n\n    const customerTypes: CustomerType[] = (aiResponse.customerTypes || []).map((item: any) => ({\n      text: item.text,\n      confidence: item.confidence,\n      category: item.category || 'other',\n      source: {\n        sourceUrl: item.sourceUrl || websiteUrl,\n        sourceContext: item.sourceContext || 'Unknown source',\n        extractedAt: now,\n        pageTitle: item.pageTitle,\n        sectionHeading: item.sectionHeading,\n      },\n      isVerified: true,\n      isUserConfirmed: false,\n    }));\n\n    const services: ServiceProduct[] = (aiResponse.services || []).map((item: any) => ({\n      text: item.text,\n      confidence: item.confidence,\n      type: item.type || 'service',\n      category: item.category,\n      source: {\n        sourceUrl: item.sourceUrl || websiteUrl,\n        sourceContext: item.sourceContext || 'Unknown source',\n        extractedAt: now,\n        pageTitle: item.pageTitle,\n        sectionHeading: item.sectionHeading,\n      },\n      isVerified: true,\n      isUserConfirmed: false,\n    }));\n\n    const problemsSolved: ProblemSolved[] = (aiResponse.problemsSolved || []).map((item: any) => ({\n      text: item.text,\n      confidence: item.confidence,\n      severity: item.severity || 'medium',\n      source: {\n        sourceUrl: item.sourceUrl || websiteUrl,\n        sourceContext: item.sourceContext || 'Unknown source',\n        extractedAt: now,\n        pageTitle: item.pageTitle,\n        sectionHeading: item.sectionHeading,\n      },\n      isVerified: true,\n      isUserConfirmed: false,\n    }));\n\n    const testimonials: Testimonial[] = (aiResponse.testimonials || []).map((item: any) => ({\n      text: item.text,\n      confidence: item.confidence,\n      customerName: item.customerName,\n      customerRole: item.customerRole,\n      customerCompany: item.customerCompany,\n      hasMetrics: item.hasMetrics || false,\n      metrics: item.metrics,\n      rating: item.rating,\n      source: {\n        sourceUrl: item.sourceUrl || websiteUrl,\n        sourceContext: item.sourceContext || 'Unknown source',\n        extractedAt: now,\n        pageTitle: item.pageTitle,\n        sectionHeading: item.sectionHeading,\n      },\n      isVerified: true,\n      isUserConfirmed: false,\n    }));\n\n    const differentiators: Differentiator[] = (aiResponse.differentiators || []).map((item: any) => ({\n      text: item.text,\n      confidence: item.confidence,\n      category: item.category || 'other',\n      isQuantifiable: item.isQuantifiable || false,\n      quantification: item.quantification,\n      source: {\n        sourceUrl: item.sourceUrl || websiteUrl,\n        sourceContext: item.sourceContext || 'Unknown source',\n        extractedAt: now,\n        pageTitle: item.pageTitle,\n        sectionHeading: item.sectionHeading,\n      },\n      isVerified: true,\n      isUserConfirmed: false,\n    }));\n\n    return {\n      websiteUrl,\n      extractedAt: now,\n      customerTypes,\n      services,\n      problemsSolved,\n      testimonials,\n      differentiators,\n      overallConfidence: 0,\n      verificationRate: 0,\n      completeness: 0,\n      sourcesAnalyzed: [websiteUrl],\n      sourceQuality: 'medium',\n      warnings: [],\n    };\n  }\n\n  /**\n   * Check if item has valid source\n   */\n  private hasValidSource(item: any): boolean {\n    return !!(\n      item.source &&\n      item.source.sourceUrl &&\n      item.source.sourceUrl.startsWith('http') &&\n      item.source.sourceContext &&\n      item.source.sourceContext !== 'Unknown source'\n    );\n  }\n\n  /**\n   * Calculate overall confidence score\n   */\n  private calculateOverallConfidence(data: ExtractedUVPData): number {\n    const allItems = [\n      ...data.customerTypes,\n      ...data.services,\n      ...data.problemsSolved,\n      ...data.testimonials,\n      ...data.differentiators,\n    ];\n\n    if (allItems.length === 0) return 0;\n\n    const totalConfidence = allItems.reduce((sum, item) => sum + item.confidence, 0);\n    return totalConfidence / allItems.length;\n  }\n\n  /**\n   * Calculate verification rate (% with valid sources)\n   */\n  private calculateVerificationRate(data: ExtractedUVPData): number {\n    const allItems = [\n      ...data.customerTypes,\n      ...data.services,\n      ...data.problemsSolved,\n      ...data.testimonials,\n      ...data.differentiators,\n    ];\n\n    if (allItems.length === 0) return 0;\n\n    const verified = allItems.filter((item) => this.hasValidSource(item)).length;\n    return verified / allItems.length;\n  }\n\n  /**\n   * Calculate completeness (% of expected components found)\n   */\n  private calculateCompleteness(data: ExtractedUVPData): number {\n    let found = 0;\n    let expected = 5;\n\n    if (data.customerTypes.length > 0) found++;\n    if (data.services.length > 0) found++;\n    if (data.problemsSolved.length > 0) found++;\n    if (data.testimonials.length > 0) found++;\n    if (data.differentiators.length > 0) found++;\n\n    return found / expected;\n  }\n\n  /**\n   * Assess overall source quality\n   */\n  private assessSourceQuality(data: ExtractedUVPData): 'high' | 'medium' | 'low' {\n    const verificationRate = data.verificationRate;\n    const confidence = data.overallConfidence;\n\n    if (verificationRate >= 0.9 && confidence >= 0.8) return 'high';\n    if (verificationRate >= 0.7 && confidence >= 0.6) return 'medium';\n    return 'low';\n  }\n\n  /**\n   * Create structured error\n   */\n  private createError(type: UVPExtractionError['type'], error: any): UVPExtractionError {\n    return {\n      type,\n      message: error.message || 'Unknown error',\n      details: error,\n    };\n  }\n}\n\nexport const smartUVPExtractor = new SmartUVPExtractor();\n","/**\n * Retry Progress Component\n *\n * Shows retry attempts and progress when operations fail and are being retried.\n * Displays user-friendly error messages and countdown to next retry.\n *\n * Created: Nov 17, 2025 - Week 2 Workstream C\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { AlertCircle, RefreshCw, Clock } from 'lucide-react';\nimport type { RetryProgress as RetryProgressType } from '@/services/errors/error-handler.service';\n\ninterface RetryProgressProps {\n  progress: RetryProgressType;\n  operation: string; // e.g., \"website extraction\", \"AI generation\"\n}\n\nexport const RetryProgress: React.FC<RetryProgressProps> = ({ progress, operation }) => {\n  const [countdown, setCountdown] = useState<number>(\n    progress.nextRetryIn ? Math.ceil(progress.nextRetryIn / 1000) : 0\n  );\n\n  // Update countdown every second\n  useEffect(() => {\n    if (!progress.nextRetryIn) {\n      setCountdown(0);\n      return;\n    }\n\n    setCountdown(Math.ceil(progress.nextRetryIn / 1000));\n\n    const interval = setInterval(() => {\n      setCountdown((prev) => {\n        if (prev <= 1) {\n          clearInterval(interval);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [progress.nextRetryIn]);\n\n  const isRetrying = countdown > 0;\n  const hasError = Boolean(progress.error);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"mt-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800\"\n    >\n      <div className=\"flex items-start gap-3\">\n        {/* Icon */}\n        <div className=\"flex-shrink-0 mt-0.5\">\n          {isRetrying ? (\n            <RefreshCw className=\"w-5 h-5 text-orange-600 dark:text-orange-400 animate-spin\" />\n          ) : (\n            <AlertCircle className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          {/* Header */}\n          <div className=\"font-semibold text-orange-900 dark:text-orange-300 mb-1\">\n            {isRetrying\n              ? `Retrying ${operation}...`\n              : `Attempting ${operation}`}\n          </div>\n\n          {/* Error Message */}\n          {hasError && progress.error?.userMessage && (\n            <p className=\"text-sm text-orange-800 dark:text-orange-400 mb-2\">\n              {progress.error.userMessage}\n            </p>\n          )}\n\n          {/* Attempt Counter */}\n          <div className=\"flex items-center gap-4 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-orange-700 dark:text-orange-500\">\n                Attempt {progress.attempt} of {progress.maxAttempts}\n              </span>\n            </div>\n\n            {/* Countdown */}\n            {isRetrying && countdown > 0 && (\n              <motion.div\n                initial={{ scale: 0.9 }}\n                animate={{ scale: 1 }}\n                className=\"flex items-center gap-2 px-3 py-1 bg-orange-100 dark:bg-orange-900/30 rounded-full\"\n              >\n                <Clock className=\"w-4 h-4 text-orange-600 dark:text-orange-400\" />\n                <span className=\"text-orange-900 dark:text-orange-300 font-medium tabular-nums\">\n                  Next attempt in {countdown}s\n                </span>\n              </motion.div>\n            )}\n          </div>\n\n          {/* Progress Bar */}\n          <div className=\"mt-3 w-full h-2 bg-orange-200 dark:bg-orange-800 rounded-full overflow-hidden\">\n            <motion.div\n              initial={{ width: 0 }}\n              animate={{\n                width: `${(progress.attempt / progress.maxAttempts) * 100}%`,\n              }}\n              transition={{ duration: 0.5 }}\n              className=\"h-full bg-gradient-to-r from-orange-500 to-orange-600 rounded-full\"\n            />\n          </div>\n\n          {/* Reassurance Message */}\n          {progress.attempt === progress.maxAttempts && !isRetrying && (\n            <p className=\"mt-2 text-xs text-orange-700 dark:text-orange-500\">\n              This is the final attempt. If it fails, we'll use cached data or minimal information.\n            </p>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n","/**\n * Onboarding Page V5 - Discovery-First Smart Onboarding\n *\n * Week 7: Orchestrates the complete onboarding flow with source verification\n *\n * Flow: URL Input → UVP Extraction → Smart Confirmation → Quick Refinement →\n *       Path Selection → Content Generation → Preview → Email Capture\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { OnboardingFlow } from '@/components/onboarding-v5/OnboardingFlow';\nimport { PathSelector, ContentPath } from '@/components/onboarding-v5/PathSelector';\nimport { SinglePostTypeSelector, PostType } from '@/components/onboarding-v5/SinglePostTypeSelector';\nimport { ContentPreview } from '@/components/onboarding-v5/ContentPreview';\nimport { useNavigate } from 'react-router-dom';\nimport { SmartUVPExtractor } from '@/services/uvp-wizard/SmartUVPExtractor';\nimport { locationDetectionService } from '@/services/intelligence/location-detection.service';\nimport { IndustryMatchingService } from '@/services/industry/IndustryMatchingService';\nimport { campaignGenerator } from '@/services/campaign/CampaignGenerator';\nimport { getFunnelTracker, type OnboardingStep } from '@/services/analytics/funnel-tracker.service';\nimport type { ExtractedUVPData } from '@/types/smart-uvp.types';\nimport type { RetryProgress } from '@/services/errors/error-handler.service';\nimport type { GenerationProgress } from '@/types/campaign-generation.types';\nimport { RetryProgress as RetryProgressComponent } from '@/components/onboarding-v5/RetryProgress';\n\ntype FlowStep =\n  | 'url_input'\n  | 'uvp_extraction'\n  | 'smart_confirmation'\n  | 'quick_refinement'\n  | 'path_selection'\n  | 'post_type_selection'\n  | 'content_preview'\n  | 'complete';\n\ninterface DetectedBusinessData {\n  url: string;\n  businessName: string;\n  industry: string;\n  location: string;\n  services: string[];\n  competitors: string[];\n  uvpData?: ExtractedUVPData;\n  sources: {\n    website: string;\n    verified: boolean;\n  };\n}\n\nexport const OnboardingPageV5: React.FC = () => {\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState<FlowStep>('url_input');\n  const [websiteUrl, setWebsiteUrl] = useState<string>('');\n  const [businessData, setBusinessData] = useState<DetectedBusinessData | null>(null);\n  const [selectedPath, setSelectedPath] = useState<ContentPath | null>(null);\n  const [selectedPostType, setSelectedPostType] = useState<PostType | null>(null);\n  const [isExtracting, setIsExtracting] = useState(false);\n  const [extractionError, setExtractionError] = useState<string | null>(null);\n  const [progressSteps, setProgressSteps] = useState<Array<{step: string; status: 'pending' | 'in_progress' | 'complete' | 'error'; details?: string}>>([]);\n  const [retryProgress, setRetryProgress] = useState<RetryProgress | null>(null);\n  const [generationProgress, setGenerationProgress] = useState<GenerationProgress | null>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Initialize funnel tracker\n  const funnelTracker = getFunnelTracker();\n\n  const addProgressStep = (step: string, status: 'pending' | 'in_progress' | 'complete' | 'error', details?: string) => {\n    setProgressSteps(prev => {\n      const existing = prev.find(s => s.step === step);\n      if (existing) {\n        return prev.map(s => s.step === step ? { ...s, status, details } : s);\n      }\n      return [...prev, { step, status, details }];\n    });\n  };\n\n  // Handle URL submission - START UVP extraction process\n  const handleUrlSubmit = async (url: string) => {\n    console.log('[OnboardingPageV5] URL submitted:', url);\n\n    // Track analytics: URL input\n    await funnelTracker.trackOnboardingStep('url_input', { url });\n\n    setWebsiteUrl(url);\n    setCurrentStep('uvp_extraction');\n    setIsExtracting(true);\n    setExtractionError(null);\n    setProgressSteps([\n      { step: 'Extracting UVP Data', status: 'pending' },\n      { step: 'Detecting Location', status: 'pending' },\n      { step: 'Detecting Industry', status: 'pending' },\n      { step: 'Finalizing Discovery', status: 'pending' },\n    ]);\n\n    try {\n      // Track analytics: Extraction started\n      await funnelTracker.trackOnboardingStep('extraction_started', { url });\n\n      // Step 1: Extract UVP with retry and cache fallback\n      addProgressStep('Understanding your unique offerings', 'in_progress', 'Reading your website content...');\n\n      const smartUVPExtractor = new SmartUVPExtractor();\n      const uvpData = await smartUVPExtractor.extractUVPWithCache(\n        {\n          websiteUrl: url,\n          minConfidence: 0.6,\n          requireSources: true,\n        },\n        (progress) => {\n          // Update retry progress state\n          setRetryProgress(progress);\n\n          // Update UI message based on retry state\n          if (progress.attempt > 1) {\n            addProgressStep(\n              'Understanding your unique offerings',\n              'in_progress',\n              `Retry attempt ${progress.attempt}/${progress.maxAttempts}...`\n            );\n          }\n        }\n      );\n\n      // Clear retry progress after successful extraction\n      setRetryProgress(null);\n\n      addProgressStep('Understanding your unique offerings', 'complete', `Found ${uvpData.customerTypes.length} customers, ${uvpData.services.length} services, ${uvpData.problemsSolved.length} problems`);\n      console.log('[OnboardingPageV5] UVP extracted:', {\n        customers: uvpData.customerTypes.length,\n        services: uvpData.services.length,\n        problems: uvpData.problemsSolved.length,\n      });\n\n      // Step 2: Detect location\n      addProgressStep('Detecting Location', 'in_progress', 'Analyzing website for location data...');\n      const locationResult = await locationDetectionService.detectLocation(url);\n\n      const locationStr = locationResult\n        ? (locationResult.city ? `${locationResult.city}, ${locationResult.state}` : locationResult.state)\n        : 'Not detected';\n      addProgressStep('Detecting Location', 'complete', locationStr);\n      console.log('[OnboardingPageV5] Location detected:', locationResult);\n\n      // Step 3: Detect industry\n      addProgressStep('Detecting Industry', 'in_progress', 'Matching services to industry codes...');\n      let industry = 'General Business';\n\n      if (uvpData.services.length > 0) {\n        const industryMatch = await IndustryMatchingService.findMatch(\n          uvpData.services.map(s => s.text).join(', ')\n        );\n        if (industryMatch && industryMatch.match) {\n          industry = industryMatch.match.display_name;\n        }\n      }\n\n      addProgressStep('Detecting Industry', 'complete', industry);\n      console.log('[OnboardingPageV5] Industry detected:', industry);\n\n      // Extract business name from URL or use a generic name\n      const extractBusinessName = (url: string): string => {\n        try {\n          const hostname = new URL(url).hostname;\n          const parts = hostname.split('.');\n          const mainPart = parts.length > 2 ? parts[parts.length - 2] : parts[0];\n          return mainPart.charAt(0).toUpperCase() + mainPart.slice(1);\n        } catch {\n          return 'Your Business';\n        }\n      };\n\n      // Combine all detected data\n      const detectedData: DetectedBusinessData = {\n        url,\n        businessName: extractBusinessName(url),\n        industry,\n        location: locationResult\n          ? (locationResult.city ? `${locationResult.city}, ${locationResult.state}` : locationResult.state)\n          : 'Location not detected',\n        services: uvpData.services.map(s => s.text),\n        competitors: [], // TODO: Add competitor detection\n        uvpData,\n        sources: {\n          website: url,\n          verified: uvpData.verificationRate > 0.7,\n        },\n      };\n\n      addProgressStep('Finalizing Discovery', 'in_progress', 'Preparing summary...');\n      setBusinessData(detectedData);\n\n      addProgressStep('Finalizing Discovery', 'complete', 'Discovery complete!');\n\n      // Wait a moment to show completed state\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      setIsExtracting(false);\n\n      // Clear retry progress on success\n      setRetryProgress(null);\n\n      // Track analytics: Extraction complete\n      await funnelTracker.trackOnboardingStep('extraction_complete', {\n        customersFound: detectedData.uvpData?.customerTypes.length,\n        servicesFound: detectedData.uvpData?.services.length,\n        problemsFound: detectedData.uvpData?.problemsSolved.length,\n      });\n\n      // Auto-transition to path selection (skipping confirmation for now)\n      // TODO: Add SmartConfirmation and QuickRefinement steps\n      setCurrentStep('path_selection');\n\n    } catch (error) {\n      console.error('[OnboardingPageV5] URL submission error:', error);\n      setIsExtracting(false);\n\n      // Check if we got retry error information\n      if (retryProgress && retryProgress.error) {\n        setExtractionError(retryProgress.error.userMessage);\n      } else {\n        setExtractionError(\n          error instanceof Error\n            ? error.message\n            : 'Failed to analyze website. Please try again or check the URL.'\n        );\n      }\n\n      setCurrentStep('url_input');\n\n      // Clear retry progress\n      setRetryProgress(null);\n\n      // Update progress steps to show error\n      addProgressStep('Understanding your unique offerings', 'error', 'Analysis failed');\n    }\n  };\n\n  // Legacy handler for OnboardingFlow component\n  const handleBusinessDetected = (data: DetectedBusinessData) => {\n    console.log('[OnboardingPageV5] Business detected (legacy):', data);\n    setBusinessData(data);\n    setCurrentStep('path_selection');\n  };\n\n  // Handle path selection\n  const handlePathSelected = async (path: ContentPath) => {\n    console.log('[OnboardingPageV5] Path selected:', path);\n    setSelectedPath(path);\n\n    // Track analytics: Path selected\n    if (path === 'campaign') {\n      await funnelTracker.trackOnboardingStep('campaign_selected', { path });\n      // Campaign path: Generate full campaign\n      await generateCampaign();\n    } else {\n      await funnelTracker.trackOnboardingStep('post_selected', { path });\n      // Single post path: Show post type selector\n      setCurrentStep('post_type_selection');\n    }\n  };\n\n  // Handle post type selection\n  const handlePostTypeSelected = (postType: PostType, storyData?: any) => {\n    console.log('[OnboardingPageV5] Post type selected:', postType, storyData);\n    setSelectedPostType(postType);\n    generateSinglePost(postType, storyData);\n  };\n\n  // Generate full campaign\n  const generateCampaign = async () => {\n    console.log('[OnboardingPageV5] Generating campaign...');\n\n    if (!businessData || !businessData.uvpData) {\n      console.error('[OnboardingPageV5] No business data available for generation');\n      return;\n    }\n\n    setIsGenerating(true);\n\n    // Track analytics: Generation started\n    await funnelTracker.trackOnboardingStep('generation_started', {\n      campaignType: 'authority_builder', // Default type\n      businessName: businessData.businessName,\n    });\n\n    try {\n      // Prepare business context for campaign generator\n      const businessContext = {\n        businessData: {\n          businessName: businessData.businessName,\n          specialization: businessData.industry,\n          location: businessData.location,\n          selectedServices: businessData.services,\n          selectedCustomers: businessData.uvpData.customerTypes.map(c => c.text),\n          selectedValueProps: businessData.uvpData.differentiators.map(d => d.text),\n          selectedTestimonials: businessData.uvpData.testimonials.map(t => t.text),\n        },\n        uvpData: businessData.uvpData,\n        websiteAnalysis: null, // Not available yet in onboarding flow\n        specialization: businessData.industry,\n      };\n\n      // Generate campaign with progress tracking\n      const campaign = await campaignGenerator.generateCampaign(\n        {\n          campaignId: `campaign-${Date.now()}`,\n          campaignType: 'authority_builder', // Default to authority builder\n          businessContext,\n          options: {\n            postsPerCampaign: 5, // Start with 5 posts for faster generation\n            platforms: ['linkedin', 'facebook'],\n            includeVisuals: false, // Disable visuals for now (Bannerbear not configured)\n            saveToDatabase: false, // Don't save yet\n          },\n        },\n        (progress) => {\n          // Update generation progress UI\n          setGenerationProgress(progress);\n          console.log(`[OnboardingPageV5] Generation progress: ${progress.progress}% - ${progress.stage}`);\n        },\n        (retry) => {\n          // Update retry progress UI\n          setRetryProgress(retry);\n          console.log(`[OnboardingPageV5] Retry attempt: ${retry.attempt}/${retry.maxAttempts}`);\n        }\n      );\n\n      console.log('[OnboardingPageV5] Campaign generated:', campaign);\n\n      // Track analytics: Generation complete\n      await funnelTracker.trackOnboardingStep('generation_complete', {\n        campaignId: campaign.id,\n        postsGenerated: campaign.posts.length,\n        campaignType: campaign.campaignType,\n      });\n\n      setIsGenerating(false);\n      setGenerationProgress(null);\n      setRetryProgress(null);\n\n      // Transition to preview\n      setCurrentStep('content_preview');\n\n      // Track analytics: Preview viewed\n      await funnelTracker.trackOnboardingStep('preview_viewed', {\n        campaignId: campaign.id,\n      });\n\n    } catch (error) {\n      console.error('[OnboardingPageV5] Campaign generation failed:', error);\n      setIsGenerating(false);\n      setGenerationProgress(null);\n      setRetryProgress(null);\n\n      // Show error to user\n      setExtractionError(\n        error instanceof Error\n          ? error.message\n          : 'Failed to generate campaign. Please try again.'\n      );\n    }\n  };\n\n  // Generate single post\n  const generateSinglePost = async (postType: PostType, storyData?: any) => {\n    console.log('[OnboardingPageV5] Generating single post:', postType);\n    // TODO: Wire to content generation + calendar integration\n    setCurrentStep('content_preview');\n  };\n\n  // Handle copy action\n  const handleCopy = () => {\n    console.log('[OnboardingPageV5] Content copied');\n    // TODO: Analytics tracking\n  };\n\n  // Handle save to calendar\n  const handleSaveToCalendar = () => {\n    console.log('[OnboardingPageV5] Saving to calendar...');\n    // TODO: Wire to calendar system\n    setCurrentStep('complete');\n\n    // Navigate to campaign page after save\n    setTimeout(() => {\n      navigate('/campaign/new');\n    }, 2000);\n  };\n\n  // Handle email capture\n  const handleEmailCapture = (email: string) => {\n    console.log('[OnboardingPageV5] Email captured:', email);\n    // TODO: Save to Supabase email_captures table\n    // TODO: Analytics tracking\n  };\n\n  return (\n    <div className=\"min-h-screen\">\n      {currentStep === 'url_input' && (\n        <OnboardingFlow onUrlSubmit={handleUrlSubmit} onComplete={handleBusinessDetected} />\n      )}\n\n      {currentStep === 'uvp_extraction' && (\n        <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4\">\n          <div className=\"max-w-2xl w-full\">\n            <div className=\"text-center mb-8\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-6\"></div>\n              <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n                Discovering Your Business...\n              </h2>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                AI-powered analysis in progress\n              </p>\n            </div>\n\n            {/* Progress Steps */}\n            <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-4\">\n              {progressSteps.map((step, index) => (\n                <div\n                  key={step.step}\n                  className={`flex items-start gap-4 pb-4 ${\n                    index < progressSteps.length - 1 ? 'border-b border-gray-200 dark:border-gray-700' : ''\n                  }`}\n                >\n                  {/* Status Icon */}\n                  <div className=\"flex-shrink-0 mt-1\">\n                    {step.status === 'pending' && (\n                      <div className=\"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600\"></div>\n                    )}\n                    {step.status === 'in_progress' && (\n                      <div className=\"w-6 h-6 rounded-full border-2 border-purple-600 border-t-transparent animate-spin\"></div>\n                    )}\n                    {step.status === 'complete' && (\n                      <div className=\"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center\">\n                        <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                      </div>\n                    )}\n                    {step.status === 'error' && (\n                      <div className=\"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center\">\n                        <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Step Info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className={`text-lg font-semibold ${\n                      step.status === 'in_progress'\n                        ? 'text-purple-600 dark:text-purple-400'\n                        : step.status === 'complete'\n                        ? 'text-green-600 dark:text-green-400'\n                        : step.status === 'error'\n                        ? 'text-red-600 dark:text-red-400'\n                        : 'text-gray-500 dark:text-gray-400'\n                    }`}>\n                      {step.step}\n                    </h3>\n                    {step.details && (\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {step.details}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Retry Progress (if retrying) */}\n            {retryProgress && retryProgress.attempt > 1 && (\n              <div className=\"mt-4\">\n                <RetryProgressComponent\n                  progress={retryProgress}\n                  operation=\"website analysis\"\n                />\n              </div>\n            )}\n\n            {extractionError && (\n              <div className=\"mt-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg\">\n                <p className=\"text-red-600 dark:text-red-400 mb-3\">{extractionError}</p>\n                <button\n                  onClick={() => setCurrentStep('url_input')}\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                >\n                  Try Again\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Campaign Generation Loading State */}\n      {isGenerating && generationProgress && (\n        <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4\">\n          <div className=\"max-w-2xl w-full\">\n            <div className=\"text-center mb-8\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-6\"></div>\n              <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n                Generating Your Campaign...\n              </h2>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                AI is crafting {generationProgress.totalPosts} personalized posts\n              </p>\n            </div>\n\n            <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6\">\n              <div className=\"mb-4\">\n                <div className=\"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                  <span className=\"capitalize\">{generationProgress.stage.replace(/_/g, ' ')}</span>\n                  <span>{generationProgress.progress}%</span>\n                </div>\n                <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n                  <div\n                    className=\"bg-gradient-to-r from-purple-600 to-blue-600 h-3 rounded-full transition-all duration-500\"\n                    style={{ width: `${generationProgress.progress}%` }}\n                  ></div>\n                </div>\n              </div>\n\n              {generationProgress.currentPost && generationProgress.currentPost > 0 && (\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 text-center\">\n                  Generating post {generationProgress.currentPost} of {generationProgress.totalPosts}\n                </p>\n              )}\n            </div>\n\n            {/* Retry Progress (if retrying) */}\n            {retryProgress && retryProgress.attempt > 1 && (\n              <div className=\"mt-4\">\n                <RetryProgressComponent\n                  progress={retryProgress}\n                  operation=\"content generation\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {currentStep === 'path_selection' && businessData && !isGenerating && (\n        <div>\n          <div className=\"bg-white dark:bg-slate-800 shadow-lg rounded-lg p-6 max-w-4xl mx-auto my-8\">\n            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">\n              Discovery Complete! 🎉\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              <div>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Business</p>\n                <p className=\"font-medium text-gray-900 dark:text-white\">{businessData.businessName}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Industry</p>\n                <p className=\"font-medium text-gray-900 dark:text-white\">{businessData.industry}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Location</p>\n                <p className=\"font-medium text-gray-900 dark:text-white\">{businessData.location}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Services Found</p>\n                <p className=\"font-medium text-gray-900 dark:text-white\">{businessData.services.length}</p>\n              </div>\n            </div>\n            {businessData.uvpData && (\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-2\">UVP Data Extracted:</p>\n                <div className=\"text-sm space-y-1\">\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    • {businessData.uvpData.customerTypes.length} customer types\n                  </p>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    • {businessData.uvpData.services.length} services\n                  </p>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    • {businessData.uvpData.problemsSolved.length} problems solved\n                  </p>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    • {businessData.uvpData.testimonials.length} testimonials\n                  </p>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    • Verification Rate: {((businessData.uvpData.verificationRate || 0) * 100).toFixed(0)}%\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n          <PathSelector onSelectPath={handlePathSelected} />\n        </div>\n      )}\n\n      {currentStep === 'post_type_selection' && (\n        <SinglePostTypeSelector onSelectType={handlePostTypeSelected} />\n      )}\n\n      {currentStep === 'content_preview' && (\n        <ContentPreview\n          content={{\n            type: selectedPath === 'campaign' ? 'campaign' : 'single_post',\n            content: 'Generated content will appear here...',\n            sources: businessData?.sources.website\n              ? [\n                  {\n                    url: businessData.sources.website,\n                    title: businessData.businessName,\n                    type: 'website',\n                  },\n                ]\n              : [],\n          }}\n          onCopy={handleCopy}\n          onSaveToCalendar={handleSaveToCalendar}\n          onEmailCapture={handleEmailCapture}\n        />\n      )}\n\n      {currentStep === 'complete' && (\n        <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-violet-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900 flex items-center justify-center p-4\">\n          <div className=\"text-center\">\n            <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-4\">\n              All Set! 🎉\n            </h2>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              Redirecting to your campaign...\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["DETECTION_STEPS","jsx","Globe","Search","Users","TrendingUp","CheckCircle","OnboardingFlow","onComplete","onUrlSubmit","url","setUrl","useState","selectedIndustry","setSelectedIndustry","status","setStatus","error","setError","handleSubmit","e","fullUrl","runDetection","websiteUrl","steps","step","resolve","detectedData","currentStepIndex","isDetecting","jsxs","motion","AnimatePresence","Input","IndustrySelector","industry","Button","Fragment","Loader2","ArrowRight","index","isActive","isComplete","isPending","PATH_OPTIONS","Calendar","Zap","PathSelector","onSelectPath","Sparkles","option","benefit","idx","CheckCircle2","Clock","Target","POST_TYPES","Star","Lightbulb","AlertCircle","MessageCircle","BookOpen","Mail","GraduationCap","SinglePostTypeSelector","onSelectType","getBadgeStyles","type","getBadgeIcon","Edit3","Shield","LinkIcon","postType","ContentPreview","content","onCopy","onSaveToCalendar","onEmailCapture","copied","setCopied","showSources","setShowSources","showEmailCapture","setShowEmailCapture","email","setEmail","handleCopy","handleSave","handleEmailSubmit","post","ChevronUp","ChevronDown","source","ExternalLink","Check","Copy","Save","scrapeWebsite","domain","proxies","response","lastError","proxyUrl","err","html","doc","metadata","extractMetadata","extractContent","design","extractDesign","structure","extractStructure","title","_a","descriptionMeta","description","keywordsMeta","keywords","k","headings","h","text","paragraphs","p","links","a","href","images","img","src","alt","colors","fonts","logo","logoImg","colorRegex","bodyHTML","colorMatches","uniqueColors","fontRegex","fontMatches","uniqueFonts","match","fontFamily","sections","navigation","section","heading","SmartUVPExtractor","__publicField","options","onProgress","maxPagesToAnalyze","minConfidence","requireSources","includeTestimonials","scrapedData","ErrorHandlerService","uvpData","c","s","t","d","cacheKey","key","cached","prompt","data","aiResponse","now","customerTypes","item","services","problemsSolved","testimonials","differentiators","allItems","sum","found","expected","verificationRate","confidence","RetryProgress","progress","operation","countdown","setCountdown","useEffect","interval","prev","isRetrying","hasError","RefreshCw","OnboardingPageV5","navigate","useNavigate","currentStep","setCurrentStep","setWebsiteUrl","businessData","setBusinessData","selectedPath","setSelectedPath","selectedPostType","setSelectedPostType","isExtracting","setIsExtracting","extractionError","setExtractionError","progressSteps","setProgressSteps","retryProgress","setRetryProgress","generationProgress","setGenerationProgress","isGenerating","setIsGenerating","funnelTracker","getFunnelTracker","addProgressStep","details","handleUrlSubmit","locationResult","locationDetectionService","locationStr","industryMatch","IndustryMatchingService","parts","mainPart","_b","_c","handleBusinessDetected","handlePathSelected","path","generateCampaign","handlePostTypeSelected","storyData","generateSinglePost","businessContext","campaign","campaignGenerator","retry","handleSaveToCalendar","handleEmailCapture","RetryProgressComponent"],"mappings":"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"}