import{r as l,a as e,S as Vt,R as Ut,T as Ht,P as Wt,C as ot,b as Yt,X as ct,c as dt,e as mt,O as xt,f as Oe,g as st,h as Le,A as ut,k as ye,m as qt,L as ht,n as gt,o as pt,p as ft,q as Qt,V as Kt,s as yt,I as Jt,t as Xt,u as bt,v as Zt,w as jt,z as es,B as Re,E as ts,F as vt,H as ss,J as Nt,K as wt,M as kt,N as re,Q as Ne,U as ne,W as as,Y as ns,Z as rs,$ as we,a0 as ue,a1 as Ct,a2 as is,a3 as Ie,a4 as be,a5 as _t,a6 as St,a7 as ls,a8 as _e,a9 as Ke,aa as os,ab as Tt,ac as cs,ad as ds,ae as ms,af as at,ag as xs,ah as us,ai as hs,aj as gs,ak as ps,al as fs,am as Je,an as ys,ao as Be,ap as Dt,aq as bs,ar as ze,as as js,at as nt,au as vs}from"./vendor-Ck9QY3SP.js";import{t as Ns,c as ws,a as Fe}from"./ui-utils-BZoEee2W.js";import{i as ks,a as Cs,b as _s,c as Ss}from"./calendar-libs-Dd4YSJ5A.js";import{s as J,d as Pt,f as Ve,a as rt}from"./analytics-BeoNQ3KZ.js";import{C as Ts,V as Ds,a as Ps,c as fe,d as Os,g as Is,S as As}from"./synapse-CMLSaE2R.js";function D(...t){return Ns(ws(t))}const Rs=Fe("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=l.forwardRef(({className:t,variant:s,size:a,asChild:r=!1,...n},o)=>{const x=r?Vt:"button";return e.jsx(x,{className:D(Rs({variant:s,size:a,className:t})),ref:o,...n})});N.displayName="Button";const te=l.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a}));te.displayName="Input";const Fs=Fe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",warning:"border-transparent bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}},defaultVariants:{variant:"default"}});function H({className:t,variant:s,...a}){return e.jsx("div",{className:D(Fs({variant:s}),t),...a})}const he=Ut,ga=Ht,$s=Wt,Ot=l.forwardRef(({className:t,...s},a)=>e.jsx(xt,{ref:a,className:D("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Ot.displayName=xt.displayName;const ie=l.forwardRef(({className:t,children:s,...a},r)=>e.jsxs($s,{children:[e.jsx(Ot,{}),e.jsxs(ot,{ref:r,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(Yt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ie.displayName=ot.displayName;const le=({className:t,...s})=>e.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});le.displayName="DialogHeader";const It=({className:t,...s})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});It.displayName="DialogFooter";const oe=l.forwardRef(({className:t,...s},a)=>e.jsx(dt,{ref:a,className:D("text-lg font-semibold leading-none tracking-tight",t),...s}));oe.displayName=dt.displayName;const ge=l.forwardRef(({className:t,...s},a)=>e.jsx(mt,{ref:a,className:D("text-sm text-muted-foreground",t),...s}));ge.displayName=mt.displayName;function Ms({provenance:t}){var x;const[s,a]=l.useState(!0),[r,n]=l.useState({}),o=i=>{n(m=>({...m,[i]:!m[i]}))};return e.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4 mt-4",children:[e.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 text-sm font-bold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[s?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"}),"ðŸ” How This Was Built"]}),s&&e.jsxs("div",{className:"mt-4 space-y-6 text-sm bg-gradient-to-br from-blue-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"pb-4 border-b-2 border-blue-300 dark:border-blue-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-200 flex items-center gap-2",children:"ðŸ”¬ Deep Provenance: How The Magic Happened"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Trace the complete journey from raw data to final content"})]}),t.rawDataSources&&t.rawDataSources.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-green-500",children:[e.jsx("div",{className:"font-bold text-green-700 dark:text-green-300 mb-2 flex items-center gap-2",children:"ðŸ“Š Raw Data Sources"}),e.jsx("div",{className:"space-y-3",children:t.rawDataSources.map((i,m)=>e.jsxs("div",{className:"pl-3 border-l-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 rounded text-xs font-medium",children:i.platform}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded text-xs",children:i.type}),i.sentiment&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${i.sentiment==="positive"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":i.sentiment==="negative"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-300"}`,children:i.sentiment})]}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 italic text-xs bg-gray-50 dark:bg-gray-800 p-2 rounded",children:['"',i.content,'"']}),i.author&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Author: ",i.author]}),i.relevanceScore!==void 0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Relevance: ",Math.round(i.relevanceScore*100),"%"]})]},m))})]}),t.psychologySelection&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-purple-500",children:[e.jsx("div",{className:"font-bold text-purple-700 dark:text-purple-300 mb-2 flex items-center gap-2",children:"ðŸ§  Psychology Selection Process"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400",children:"Selected Principle:"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium",children:t.psychologySelection.selectedPrinciple})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400",children:"Why This Psychology?"}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-xs italic",children:t.psychologySelection.selectionReasoning})]}),t.psychologySelection.candidatePrinciples&&t.psychologySelection.candidatePrinciples.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-2",children:"Other Candidates Considered:"}),e.jsx("div",{className:"space-y-2",children:t.psychologySelection.candidatePrinciples.map((i,m)=>e.jsxs("div",{className:"text-xs pl-3 border-l border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:i.principle}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["Confidence: ",Math.round(i.confidenceScore*100),"%"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 italic",children:i.reasoning})]},m))})]})]})]}),t.topicCorrelation&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-orange-500",children:[e.jsx("div",{className:"font-bold text-orange-700 dark:text-orange-300 mb-2 flex items-center gap-2",children:"ðŸ”— Topic Correlation & Embeddings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400",children:"Primary Topic:"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium",children:t.topicCorrelation.primaryTopic})]}),t.topicCorrelation.relatedTopics&&t.topicCorrelation.relatedTopics.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 mb-1",children:"Related Topics (via embeddings):"}),e.jsx("div",{className:"space-y-1",children:t.topicCorrelation.relatedTopics.map((i,m)=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-orange-50 dark:bg-orange-900/20 p-2 rounded",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:i.topic}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:[(i.similarityScore*100).toFixed(1),"%"]}),e.jsx("span",{className:"px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-300 rounded text-xs",children:i.source})]})]},m))})]}),t.topicCorrelation.embeddingModel&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Model: ",t.topicCorrelation.embeddingModel]})]})]}),t.platformBreakdown&&t.platformBreakdown.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-cyan-500",children:[e.jsx("div",{className:"font-bold text-cyan-700 dark:text-cyan-300 mb-2 flex items-center gap-2",children:"ðŸ“± Platform Breakdown"}),e.jsx("div",{className:"space-y-3",children:t.platformBreakdown.map((i,m)=>e.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-cyan-700 dark:text-cyan-300",children:i.platform}),e.jsxs("span",{className:"px-2 py-0.5 bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-200 rounded text-xs font-bold",children:[i.dataPoints," data points"]})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"font-semibold text-cyan-600 dark:text-cyan-400",children:"Key Insights:"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400 space-y-0.5",children:i.keyInsights.map((u,p)=>e.jsx("li",{children:u},p))}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-cyan-200 dark:border-cyan-800",children:[e.jsx("div",{className:"font-semibold text-cyan-600 dark:text-cyan-400",children:"Contribution:"}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 italic",children:i.contributionToFinalContent})]})]})]},m))})]}),t.detailedDataSources&&t.detailedDataSources.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-indigo-500",children:[e.jsx("div",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:"ðŸ” Complete Data Source Breakdown"}),e.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mb-3",children:"Every single data point used from each source (click to expand)"}),e.jsx("div",{className:"space-y-2",children:t.detailedDataSources.map((i,m)=>e.jsxs("div",{className:"border border-indigo-200 dark:border-indigo-800 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>o(i.source),className:"w-full flex items-center justify-between p-3 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r[i.source]?e.jsx(Oe,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}):e.jsx(st,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),e.jsx("span",{className:"font-semibold text-indigo-700 dark:text-indigo-300 capitalize",children:i.source})]}),e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 rounded text-xs font-bold",children:[i.dataPoints.length," data points"]})]}),r[i.source]&&e.jsx("div",{className:"p-3 space-y-2 bg-white dark:bg-slate-900",children:i.dataPoints.map((u,p)=>e.jsxs("div",{className:"pl-4 border-l-2 border-indigo-300 dark:border-indigo-700 bg-indigo-50/50 dark:bg-indigo-900/10 p-2 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 rounded text-xs font-medium",children:u.type.replace(/_/g," ")}),u.confidence!==void 0&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded text-xs",children:[Math.round(u.confidence*100),"% confidence"]})]}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 text-sm italic",children:['"',u.content,'"']}),u.metadata&&Object.keys(u.metadata).length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-indigo-600 dark:text-indigo-400 cursor-pointer hover:text-indigo-800 dark:hover:text-indigo-200",children:"View metadata"}),e.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(u.metadata,null,2)})]}),u.timestamp&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(u.timestamp).toLocaleString()})]},p))})]},m))})]}),t.decisionPipeline&&t.decisionPipeline.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-pink-500",children:[e.jsx("div",{className:"font-bold text-pink-700 dark:text-pink-300 mb-2 flex items-center gap-2",children:"ðŸŽ¯ Decision Pipeline: The Complete Journey"}),e.jsx("div",{className:"space-y-3",children:t.decisionPipeline.map((i,m)=>e.jsxs("div",{className:"relative pl-8",children:[e.jsx("div",{className:"absolute left-0 top-0 w-6 h-6 bg-pink-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:i.step}),e.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-3 rounded",children:[e.jsx("div",{className:"font-semibold text-pink-700 dark:text-pink-300 mb-1",children:i.action}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:"Input:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:i.input})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:"Output:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 ml-2 font-medium",children:i.output})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:"Reasoning:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-2 italic",children:i.reasoning})]})]})]})]},m))})]}),e.jsx("div",{className:"pt-4 border-t-2 border-blue-300 dark:border-blue-700",children:e.jsx("h4",{className:"text-sm font-bold text-blue-800 dark:text-blue-300 mb-3",children:"Standard Provenance Tracking"})}),t.psychologyTrigger&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-slate-300",children:"Psychology Trigger"}),e.jsx("div",{className:"text-gray-600 dark:text-slate-400 mt-1",children:t.psychologyTrigger})]}),t.dataSourcesUsed&&t.dataSourcesUsed.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-slate-300",children:"Data Sources Used"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.dataSourcesUsed.map((i,m)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 rounded text-xs",children:i},m))})]}),t.trendingTopicMatched&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Trending Topic Matched"}),e.jsx("div",{className:"text-gray-600 mt-1",children:t.trendingTopicMatched})]}),t.frameworkStagesUsed&&t.frameworkStagesUsed.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-slate-300",children:"Framework Stages"}),e.jsx("div",{className:"space-y-2 mt-2",children:t.frameworkStagesUsed.map((i,m)=>e.jsxs("div",{className:"pl-4 border-l-2 border-blue-400 dark:border-blue-500",children:[e.jsx("div",{className:"font-medium text-sm text-gray-700 dark:text-slate-300",children:i.stage}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Source: ",e.jsx("code",{className:"bg-gray-100 dark:bg-slate-700 px-1 rounded",children:i.sourceField})]}),i.content&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-slate-400 mt-1 italic",children:['"',i.content,'..."']})]},m))})]}),t.contentAssembly&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-slate-300",children:"Content Assembly"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[t.contentAssembly.headline&&e.jsxs("div",{className:"text-xs",children:[e.jsx("strong",{className:"text-gray-700 dark:text-slate-300",children:"Headline:"})," ",e.jsx("span",{className:"text-gray-600 dark:text-slate-400",children:t.contentAssembly.headline.source}),e.jsxs("div",{className:"text-gray-600 dark:text-slate-400 italic mt-0.5",children:['"',t.contentAssembly.headline.preview,'"']})]}),t.contentAssembly.hook&&e.jsxs("div",{className:"text-xs",children:[e.jsx("strong",{className:"text-gray-700 dark:text-slate-300",children:"Hook:"})," ",e.jsx("span",{className:"text-gray-600 dark:text-slate-400",children:t.contentAssembly.hook.source}),e.jsxs("div",{className:"text-gray-600 dark:text-slate-400 italic mt-0.5",children:['"',t.contentAssembly.hook.preview,'"']})]}),t.contentAssembly.body&&e.jsxs("div",{className:"text-xs",children:[e.jsx("strong",{className:"text-gray-700 dark:text-slate-300",children:"Body:"})," ",e.jsx("span",{className:"text-gray-600 dark:text-slate-400",children:t.contentAssembly.body.source}),e.jsxs("div",{className:"text-gray-600 dark:text-slate-400 italic mt-0.5",children:['"',t.contentAssembly.body.preview,'"']})]}),t.contentAssembly.cta&&e.jsxs("div",{className:"text-xs",children:[e.jsx("strong",{className:"text-gray-700 dark:text-slate-300",children:"CTA:"})," ",e.jsx("span",{className:"text-gray-600 dark:text-slate-400",children:t.contentAssembly.cta.source}),e.jsxs("div",{className:"text-gray-600 dark:text-slate-400 italic mt-0.5",children:['"',t.contentAssembly.cta.preview,'"']})]})]})]}),t.decisions&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-slate-300",children:"Key Decisions"}),e.jsxs("div",{className:"space-y-1 mt-2 text-xs text-gray-600 dark:text-slate-400",children:[t.decisions.whyThisFormat&&e.jsxs("div",{children:["â€¢ ",t.decisions.whyThisFormat]}),t.decisions.whyThisTone&&e.jsxs("div",{children:["â€¢ ",t.decisions.whyThisTone]}),t.decisions.whyThisCTA&&e.jsxs("div",{children:["â€¢ ",t.decisions.whyThisCTA]})]})]}),!t.psychologyTrigger&&!((x=t.frameworkStagesUsed)!=null&&x.length)&&!t.contentAssembly&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-500 italic",children:"No provenance data available for this content."})]})]})}function Gs({value:t,onChange:s,className:a=""}){const[r,n]=l.useState(!1),x=(i=>i<=25?{label:"Professional",description:"Subtle, polished, corporate-safe",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-100",textColor:"text-blue-700"}:i<=50?{label:"Approachable",description:"Warm, relatable, friendly",color:"from-green-500 to-green-600",bgColor:"bg-green-100",textColor:"text-green-700"}:i<=75?{label:"Casual",description:"Conversational, witty, personable",color:"from-yellow-500 to-yellow-600",bgColor:"bg-yellow-100",textColor:"text-yellow-700"}:{label:"Edgy",description:"Bold, playful, attention-grabbing",color:"from-red-500 to-red-600",bgColor:"bg-red-100",textColor:"text-red-700"})(t);return e.jsxs("div",{className:`space-y-3 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Edginess Level"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400",children:"Professional â† â†’ Edgy"})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${x.bgColor} ${x.textColor}`,children:t})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:t,onChange:i=>s(Number(i.target.value)),onMouseDown:()=>n(!0),onMouseUp:()=>n(!1),onTouchStart:()=>n(!0),onTouchEnd:()=>n(!1),className:`w-full h-2 rounded-lg appearance-none cursor-pointer
                     bg-gradient-to-r from-blue-300 via-green-300 via-yellow-300 to-red-300
                     focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400`,style:{background:`linear-gradient(to right,
              rgb(147, 197, 253) 0%,
              rgb(134, 239, 172) 25%,
              rgb(253, 224, 71) 50%,
              rgb(252, 165, 165) 75%,
              rgb(248, 113, 113) 100%
            )`}}),e.jsx("style",{children:`
          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid ${t<=25?"#3b82f6":t<=50?"#22c55e":t<=75?"#eab308":"#ef4444"};
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
          }
          input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
          }
          input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid ${t<=25?"#3b82f6":t<=50?"#22c55e":t<=75?"#eab308":"#ef4444"};
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }
        `})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-slate-500",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"50"}),e.jsx("span",{children:"75"}),e.jsx("span",{children:"100"})]}),e.jsxs("div",{className:`p-3 rounded-lg ${x.bgColor} ${x.textColor}`,children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:x.label}),e.jsx("div",{className:"text-xs opacity-80",children:x.description})]})]})}function Es({validation:t,compact:s=!1}){const a={valid:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-300 dark:border-green-700",warning:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700",error:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700"},r={valid:ye,warning:ut,error:Le}[t.status];return s?e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${a[t.status]}`,title:t.message,children:[e.jsx(r,{className:"w-3 h-3"}),t.characterCount]}):e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border ${a[t.status]}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"font-bold",children:t.characterCount}),e.jsxs("span",{className:"text-xs opacity-75",children:["/ ",t.optimal]})]}),e.jsx("span",{className:"text-xs",children:"chars"})]})}const Ae=qt,$e=l.forwardRef(({className:t,...s},a)=>e.jsx(ht,{ref:a,className:D("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));$e.displayName=ht.displayName;const K=l.forwardRef(({className:t,...s},a)=>e.jsx(gt,{ref:a,className:D("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));K.displayName=gt.displayName;const ee=l.forwardRef(({className:t,...s},a)=>e.jsx(pt,{ref:a,className:D("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));ee.displayName=pt.displayName;const P=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));P.displayName="Card";const Ue=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("flex flex-col space-y-1.5 p-6",t),...s}));Ue.displayName="CardHeader";const He=l.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:D("text-2xl font-semibold leading-none tracking-tight",t),...s}));He.displayName="CardTitle";const We=l.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:D("text-sm text-muted-foreground",t),...s}));We.displayName="CardDescription";const ae=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("p-6 pt-0",t),...s}));ae.displayName="CardContent";const Ls=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("flex items-center p-6 pt-0",t),...s}));Ls.displayName="CardFooter";const Bs=Fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=l.forwardRef(({className:t,...s},a)=>e.jsx(ft,{ref:a,className:D(Bs(),t),...s}));B.displayName=ft.displayName;const ke=Qt,Ce=Kt,je=l.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(yt,{ref:r,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(Jt,{asChild:!0,children:e.jsx(Oe,{className:"h-4 w-4 opacity-50"})})]}));je.displayName=yt.displayName;const At=l.forwardRef(({className:t,...s},a)=>e.jsx(vt,{ref:a,className:D("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ss,{className:"h-4 w-4"})}));At.displayName=vt.displayName;const Rt=l.forwardRef(({className:t,...s},a)=>e.jsx(Nt,{ref:a,className:D("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Oe,{className:"h-4 w-4"})}));Rt.displayName=Nt.displayName;const ve=l.forwardRef(({className:t,children:s,position:a="popper",...r},n)=>e.jsx(Xt,{children:e.jsxs(bt,{ref:n,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(At,{}),e.jsx(Zt,{className:D("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Rt,{})]})}));ve.displayName=bt.displayName;const zs=l.forwardRef(({className:t,...s},a)=>e.jsx(wt,{ref:a,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));zs.displayName=wt.displayName;const U=l.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(jt,{ref:r,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(es,{children:e.jsx(Re,{className:"h-4 w-4"})})}),e.jsx(ts,{children:s})]}));U.displayName=jt.displayName;const Vs=l.forwardRef(({className:t,...s},a)=>e.jsx(kt,{ref:a,className:D("-mx-1 my-1 h-px bg-muted",t),...s}));Vs.displayName=kt.displayName;const De={instagram:{platform:"instagram",max_posts_per_day:1,optimal_times:["09:00","12:00","17:00","19:00"],min_interval_minutes:60},twitter:{platform:"twitter",max_posts_per_day:5,max_posts_per_hour:2,optimal_times:["08:00","12:00","15:00","17:00","20:00"],min_interval_minutes:30},linkedin:{platform:"linkedin",max_posts_per_day:2,optimal_times:["08:00","12:00","17:00"],min_interval_minutes:120},facebook:{platform:"facebook",max_posts_per_day:3,optimal_times:["09:00","13:00","19:00"],min_interval_minutes:60},tiktok:{platform:"tiktok",max_posts_per_day:2,optimal_times:["11:00","16:00","21:00"],min_interval_minutes:120},email:{platform:"email",max_posts_per_day:1,optimal_times:["10:00","14:00"],min_interval_minutes:240},blog:{platform:"blog",max_posts_per_day:1,optimal_times:["09:00","14:00"],min_interval_minutes:1440}};class X{static dbToContentItem(s){return{id:s.id,brand_id:s.brand_id,user_id:s.user_id||"",platform:s.platform,content_text:s.content||s.content_text||"",content_html:s.content_html,scheduled_time:s.scheduled_for,published_time:s.published_at,status:s.status,pillar_id:s.pillar_id,campaign_id:s.campaign_id,generation_mode:s.generation_mode,synapse_score:s.synapse_score,engagement_metrics:s.engagement_metrics,design_data:s.design_data,platform_post_id:s.platform_post_id,error_message:s.publish_error,intelligence_badges:s.intelligence_badges,media_urls:s.media_urls,image_url:s.image_url,hashtags:s.hashtags,created_at:s.created_at,updated_at:s.updated_at}}static contentItemToDb(s){var a;return{brand_id:s.brand_id,title:((a=s.content_text)==null?void 0:a.substring(0,100))||"Untitled",content:s.content_text,content_type:"social",platform:s.platform,scheduled_for:s.scheduled_time,status:s.status||"draft",pillar_id:s.pillar_id,generation_mode:s.generation_mode||"marba",synapse_enhanced:(s.synapse_score||0)>0,image_url:s.image_url,design_data:s.design_data,published_at:s.published_time,platform_post_id:s.platform_post_id,publish_error:s.error_message}}static async getContentItems(s,a,r){let n=J.from("content_calendar_items").select("*").eq("brand_id",s).order("scheduled_for",{ascending:!0,nullsFirst:!1});a&&(n=n.gte("scheduled_for",a)),r&&(n=n.lte("scheduled_for",r));const{data:o,error:x}=await n;if(x)throw console.error("Failed to fetch content items:",x),x;return(o||[]).map(i=>this.dbToContentItem(i))}static async getContentItem(s){const{data:a,error:r}=await J.from("content_calendar_items").select("*").eq("id",s).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Failed to get content item:",r),r}return a?this.dbToContentItem(a):null}static async createContentItem(s){var o;console.log("[ContentCalendarService] Creating content item:",{brand_id:s.brand_id,status:s.status,text:((o=s.content_text)==null?void 0:o.substring(0,50))+"..."});const a=this.contentItemToDb(s);console.log("[ContentCalendarService] Transformed to DB row:",{brand_id:a.brand_id,status:a.status,title:a.title});const{data:r,error:n}=await J.from("content_calendar_items").insert({...a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw console.error("[ContentCalendarService] Failed to create content item:",n),n;return console.log("[ContentCalendarService] Successfully created content item:",{id:r.id}),this.dbToContentItem(r)}static async updateContentItem(s,a){const r=this.contentItemToDb(a),{data:n,error:o}=await J.from("content_calendar_items").update({...r,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(o)throw console.error("Failed to update content item:",o),o;return this.dbToContentItem(n)}static async deleteContentItem(s){return Pt.delete("content_calendar_items",s)}static async duplicateContentItem(s){const a=await this.getContentItem(s);if(!a)throw new Error("Content item not found");const{id:r,created_at:n,updated_at:o,published_time:x,platform_post_id:i,...m}=a;return this.createContentItem({...m,status:"draft",scheduled_time:void 0})}static async getOptimalTimes(s,a,r,n){const o=De[s],i=new Date(a).getDay(),u=o.optimal_times.map(C=>{const S=this.buildTimeReasoning(s,C,i);return{time:`${a}T${C}:00`,score:this.calculateTimeScore(C,i,s),reasoning:S,based_on:["industry_data","platform_defaults"]}});return this.filterConflictingTimes(u,n||[],s).sort((C,S)=>S.score-C.score)}static buildTimeReasoning(s,a,r){const n=parseInt(a.split(":")[0]),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r];return n>=6&&n<9?`Early morning on ${o}s - catches commuters checking ${s}`:n>=9&&n<12?"Mid-morning - high engagement during work breaks":n>=12&&n<14?"Lunch time - peak browsing period":n>=17&&n<20?"Evening commute - people unwinding after work":n>=20&&n<23?"Evening leisure time - high engagement":`Optimal time based on ${s} engagement patterns`}static calculateTimeScore(s,a,r){const n=parseInt(s.split(":")[0]);let o=50;return n>=12&&n<14&&(o+=20),n>=17&&n<20&&(o+=25),n>=20&&n<22&&(o+=15),a>=1&&a<=5&&(o+=10),r==="linkedin"&&n>=8&&n<=10&&(o+=15),r==="instagram"&&n>=19&&n<=21&&(o+=15),r==="twitter"&&(n===12||n===17)&&(o+=10),Math.min(100,o)}static filterConflictingTimes(s,a,r){const o=(De[r].min_interval_minutes||60)*60*1e3;return s.filter(x=>{const i=new Date(x.time).getTime();return!a.some(u=>{if(u.platform!==r||!u.scheduled_time)return!1;const p=new Date(u.scheduled_time).getTime();return Math.abs(i-p)<o})})}static async detectConflicts(s,a,r){const n=r.split("T")[0],x=(await this.getContentItems(s,n,n)).filter(C=>C.platform===a),i=De[a],m=[];x.length>=i.max_posts_per_day&&m.push({date:n,platform:a,current_count:x.length,max_allowed:i.max_posts_per_day,reason:`Maximum ${i.max_posts_per_day} posts per day reached for ${a}`});const u=new Date(r),p=(i.min_interval_minutes||60)*60*1e3;return x.forEach(C=>{if(!C.scheduled_time)return;const S=new Date(C.scheduled_time);Math.abs(u.getTime()-S.getTime())<p&&m.push({date:n,platform:a,current_count:x.length,max_allowed:i.max_posts_per_day,reason:`Too close to existing post at ${C.scheduled_time}. Minimum ${i.min_interval_minutes} minutes required.`})}),m}static async scheduleContent(s,a){const r=await this.getContentItem(s);if(!r)throw new Error("Content item not found");const n=await this.detectConflicts(r.brand_id,r.platform,a);if(n.length>0)throw new Error(`Scheduling conflict: ${n[0].reason}`);return this.updateContentItem(s,{scheduled_time:a,status:"scheduled"})}static async bulkSchedule(s,a="optimal_times"){var n;const r=[];for(const o of s)try{const x=((n=o.scheduled_time)==null?void 0:n.split("T")[0])||new Date().toISOString().split("T")[0],i=await this.getOptimalTimes(o.platform,x,o.brand_id,r);if(i.length===0){console.warn(`No optimal times available for ${o.platform} on ${x}`);continue}const m=this.selectTimeByStrategy(i,a),u=await this.scheduleContent(o.id,m.time);r.push(u)}catch(x){console.error(`Failed to schedule item ${o.id}:`,x)}return r}static selectTimeByStrategy(s,a){switch(a){case"optimal_times":return s[0];case"even_distribution":const r=Math.floor(s.length/2);return s[r];case"best_performing":return s[0];default:return s[0]}}static async generateContent(s){return Ve.generateContent(s.brandId,s.platform,s.topic,s.mode,{pillarId:s.pillarId,context:s.context,opportunityId:s.opportunityId,tone:s.tone,length:s.length})}static async generateBulkContent(s){const a=new Date(s.dateRange.start),r=new Date(s.dateRange.end),n=Math.ceil((r.getTime()-a.getTime())/(1e3*60*60*24)),o=[],x=s.postsPerDay||1;for(let m=0;m<n;m++){const u=new Date(a);u.setDate(u.getDate()+m),u.toISOString().split("T")[0];for(const p of s.platforms)for(let C=0;C<x;C++){const S=this.selectPillarByDistribution(s.pillarDistribution),k=await this.generateContent({brandId:s.brandId,platform:p,topic:`Generated content for ${p}`,pillarId:S.pillarId,mode:s.mode});if(k.variations&&k.variations.length>0){const T=k.variations[0],I=await this.createContentItem({brand_id:s.brandId,user_id:k.user_id||"",platform:p,content_text:T.text,pillar_id:S.pillarId,generation_mode:s.mode,synapse_score:T.psychology_score,intelligence_badges:this.generateIntelligenceBadges(T,s.mode),status:"draft"});o.push(I)}}}const i={};return o.forEach(m=>{m.pillar_id&&(i[m.pillar_id]=(i[m.pillar_id]||0)+1)}),{items:o,summary:{total_posts:o.length,platforms:s.platforms,days_covered:n,pillar_distribution:i}}}static selectPillarByDistribution(s){const a=Math.random()*100;let r=0;for(const n of s)if(r+=n.percentage,a<=r)return n;return s[0]}static generateIntelligenceBadges(s,a){var n,o;const r=[];return a==="synapse"&&r.push("Synapse Enhanced"),s.psychology_score&&s.psychology_score>80&&r.push("High-performing"),((o=(n=s.synapse_analysis)==null?void 0:n.power_words)==null?void 0:o.length)>3&&r.push("Data-driven"),r}static async publishContent(s){var r;const a=await this.getContentItem(s);if(!a)throw new Error("Content item not found");try{const n=await Ve.publishToPlatform(s,a.platform,a.content_text,(r=a.media_urls)==null?void 0:r[0]);return this.updateContentItem(s,{status:"published",published_time:new Date().toISOString(),platform_post_id:n.platform_post_id})}catch(n){return this.updateContentItem(s,{status:"failed",error_message:n.message})}}static async getPublishingQueue(s,a=7){const r=new Date;r.setDate(r.getDate()+a);const{data:n,error:o}=await J.from("content_calendar_items").select("*").eq("brand_id",s).in("status",["draft","scheduled"]).order("created_at",{ascending:!1});if(o)throw o;return(n||[]).map(this.dbToContentItem)}static getPlatformLimits(s){return De[s]}}const it={instagram:"#E1306C",twitter:"#1DA1F2",linkedin:"#0A66C2",facebook:"#1877F2",tiktok:"#000000",email:"#EA4335",blog:"#34A853"},lt={draft:"#6B7280",scheduled:"#F59E0B",published:"#10B981",failed:"#EF4444"};function Us({brandId:t,onEventClick:s,onEventDrop:a}){const[r,n]=l.useState([]),[o,x]=l.useState([]),[i,m]=l.useState(!0),[u,p]=l.useState("month"),[C,S]=l.useState({start:new Date,end:new Date}),k=l.useCallback(async()=>{try{m(!0);const c=await X.getContentItems(t);n(c);const h=c.filter(j=>j.scheduled_time).map(j=>({id:j.id,title:j.content_text.substring(0,50)+"...",start:j.scheduled_time,backgroundColor:it[j.platform]||"#6B7280",borderColor:lt[j.status]||"#6B7280",extendedProps:{contentItem:j}}));console.log(`[CalendarView] Loaded ${c.length} items, ${h.length} scheduled for calendar`),x(h)}catch(c){console.error("Failed to load content:",c)}finally{m(!1)}},[t]);l.useEffect(()=>{k()},[k]);const T=c=>{const h=c.event.extendedProps.contentItem;s&&s(h)},I=async c=>{var R;const h=c.event.extendedProps.contentItem,j=(R=c.event.start)==null?void 0:R.toISOString();if(!j){c.revert();return}try{await X.scheduleContent(h.id,j),a&&a(h,j),await k()}catch(G){console.error("Failed to reschedule content:",G),alert(`Failed to reschedule: ${G.message}`),c.revert()}},L=c=>{S({start:c.start,end:c.end})},$=c=>{console.log(`[CalendarView] Changing view to: ${c}`),p(c)},M=()=>{switch(u){case"month":return"dayGridMonth";case"week":return"timeGridWeek";case"day":return"timeGridDay";case"list":return"listWeek";default:return"dayGridMonth"}},y=c=>{const h=c.event.extendedProps.contentItem;return e.jsx("div",{className:"px-1 py-0.5 text-xs overflow-hidden",title:`${h.platform.toUpperCase()} - ${h.status}

${h.content_text}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold truncate",children:d(h.platform)}),e.jsx("span",{className:"truncate",children:c.event.title})]})})},d=c=>({instagram:"ðŸ“·",twitter:"ðŸ¦",linkedin:"ðŸ’¼",facebook:"ðŸ‘¥",tiktok:"ðŸŽµ",email:"ðŸ“§",blog:"ðŸ“"})[c]||"ðŸ“±";return e.jsxs(P,{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Content Calendar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:u==="month"?"default":"outline",size:"sm",onClick:()=>$("month"),children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Month"]}),e.jsxs(N,{variant:u==="week"?"default":"outline",size:"sm",onClick:()=>$("week"),children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Week"]}),e.jsxs(N,{variant:u==="day"?"default":"outline",size:"sm",onClick:()=>$("day"),children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Day"]}),e.jsxs(N,{variant:u==="list"?"default":"outline",size:"sm",onClick:()=>$("list"),children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"List"]})]})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Platforms:"}),Object.entries(it).map(([c,h])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:h}}),e.jsx("span",{className:"capitalize",children:c})]},c))]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Status:"}),Object.entries(lt).map(([c,h])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded border-2",style:{borderColor:h}}),e.jsx("span",{className:"capitalize",children:c})]},c))]})]}),i?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar..."})]})}):e.jsx("div",{className:"calendar-container",children:e.jsx(ns,{plugins:[ks,Cs,_s,Ss],initialView:M(),headerToolbar:{left:"prev,next today",center:"title",right:""},events:o,editable:!0,droppable:!0,eventClick:T,eventDrop:I,eventContent:y,datesSet:L,height:"auto",dayMaxEvents:3,eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short"},nowIndicator:!0,businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"09:00",endTime:"18:00"}})},`calendar-${u}`),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Shortcuts:"})," Drag to reschedule â€¢ Click for details â€¢ Hover for preview"]}),e.jsx("style",{children:`
        .fc {
          font-family: inherit;
        }
        .fc-event {
          cursor: pointer;
          transition: all 0.2s;
          border-width: 2px;
        }
        .fc-event:hover {
          opacity: 0.8;
          transform: scale(1.02);
        }
        .fc-daygrid-event {
          margin: 1px;
        }
        .fc-list-event:hover {
          background-color: rgba(0, 0, 0, 0.05);
        }
        .fc .fc-button {
          background-color: hsl(var(--primary));
          border-color: hsl(var(--primary));
        }
        .fc .fc-button:hover {
          background-color: hsl(var(--primary) / 0.9);
        }
        .fc .fc-button:disabled {
          opacity: 0.5;
        }
        .fc-theme-standard td,
        .fc-theme-standard th {
          border-color: hsl(var(--border));
        }
        .fc-theme-standard .fc-scrollgrid {
          border-color: hsl(var(--border));
        }
      `})]})}class xe{static async getActiveOpportunities(s){const a=new Date().toISOString(),{data:r,error:n}=await J.from("intelligence_opportunities").select("*").eq("brand_id",s).eq("status","active").or(`expires_at.is.null,expires_at.gte.${a}`).order("urgency",{ascending:!1}).order("created_at",{ascending:!1});if(n)throw n;return r||[]}static async getOpportunity(s){return Pt.getById("intelligence_opportunities",s)}static async dismissOpportunity(s){await J.from("intelligence_opportunities").update({status:"dismissed",actioned_at:new Date().toISOString()}).eq("id",s)}static async markOpportunityUsed(s){await J.from("intelligence_opportunities").update({status:"used",actioned_at:new Date().toISOString()}).eq("id",s)}static async generateFromOpportunity(s,a,r="marba"){const n=await this.getOpportunity(s);if(!n)throw new Error("Opportunity not found");const o={opportunityType:n.type,opportunityTitle:n.title,opportunityDescription:n.description,sourceData:n.context,urgency:n.urgency},x=await Ve.generateContent(n.brand_id,a,n.title,r,{context:o,opportunityId:s});return await this.markOpportunityUsed(s),x}static async createOpportunity(s){const{data:a,error:r}=await J.from("intelligence_opportunities").insert({...s,status:"active",created_at:new Date().toISOString()}).select().single();if(r)throw r;return a}static getTimeUntilExpiration(s){if(!s.expires_at)return{hours:999,minutes:0,expired:!1};const a=new Date,n=new Date(s.expires_at).getTime()-a.getTime();if(n<=0)return{hours:0,minutes:0,expired:!0};const o=Math.floor(n/(1e3*60*60)),x=Math.floor(n%(1e3*60*60)/(1e3*60));return{hours:o,minutes:x,expired:!1}}static getUrgencyColor(s){const a={low:"bg-blue-100 text-blue-800 border-blue-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",critical:"bg-red-100 text-red-800 border-red-200"};return a[s]||a.medium}static getOpportunityIcon(s){return{weather:"ðŸŒ¤ï¸",trending:"ðŸ“ˆ",competitor:"ðŸŽ¯",seasonal:"ðŸ“…",local_news:"ðŸ“°"}[s]||"ðŸ’¡"}static getOpportunityTypeLabel(s){return{weather:"Weather Alert",trending:"Trending Topic",competitor:"Competitor Activity",seasonal:"Seasonal Event",local_news:"Local News"}[s]||"Opportunity"}static async createSampleOpportunities(s){const a=[{brand_id:s,type:"weather",title:"Sunny Weekend Approaching",description:"Perfect weather forecast for outdoor activities this weekend.",urgency:"high",impact_score:85,expires_at:new Date(Date.now()+1728e5).toISOString(),context:{temperature:75,conditions:"sunny",forecast:"Perfect weekend weather"},suggested_actions:["Promote outdoor products","Share weekend activity tips","Create weather-related content"]},{brand_id:s,type:"trending",title:"#SmallBusinessSaturday Trending",description:"Small Business Saturday is trending with 50K mentions in the last hour.",urgency:"critical",impact_score:95,expires_at:new Date(Date.now()+216e5).toISOString(),context:{hashtag:"#SmallBusinessSaturday",mentions:5e4,growth_rate:"exponential"},suggested_actions:["Post about your small business story","Share customer testimonials","Offer limited-time promotion"]},{brand_id:s,type:"seasonal",title:"Holiday Shopping Season Beginning",description:"Black Friday and Cyber Monday approaching - prime time for promotions.",urgency:"medium",impact_score:78,expires_at:new Date(Date.now()+12096e5).toISOString(),context:{event:"Black Friday",days_until:14,shopping_intensity:"high"},suggested_actions:["Create holiday gift guides","Announce special offers","Share holiday shopping tips"]},{brand_id:s,type:"competitor",title:"Competitor Launches New Feature",description:"Main competitor just announced a new product line. Opportunity to differentiate.",urgency:"high",impact_score:82,expires_at:new Date(Date.now()+2592e5).toISOString(),context:{competitor:"Main Competitor",action:"product_launch",sentiment:"mixed"},suggested_actions:["Highlight your unique features","Share customer success stories","Create comparison content"]},{brand_id:s,type:"local_news",title:"Local Community Event This Weekend",description:"Annual community festival happening downtown - great engagement opportunity.",urgency:"medium",impact_score:70,expires_at:new Date(Date.now()+3456e5).toISOString(),context:{event:"Community Festival",location:"Downtown",attendance:"high"},suggested_actions:["Sponsor or participate in event","Create local community content","Share event information"]}],r=[];for(const n of a)try{const o=await this.createOpportunity(n);r.push(o)}catch(o){console.error("Failed to create sample opportunity:",o)}return r}}const Ye=l.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:D("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Ye.displayName="Textarea";const Hs=[{value:"instagram",label:"Instagram"},{value:"twitter",label:"Twitter"},{value:"linkedin",label:"LinkedIn"},{value:"facebook",label:"Facebook"},{value:"tiktok",label:"TikTok"},{value:"email",label:"Email"},{value:"blog",label:"Blog"}];function Ft({open:t,onClose:s,brandId:a,userId:r,opportunityId:n,pillars:o=[],onContentCreated:x}){const[i,m]=l.useState("instagram"),[u,p]=l.useState(""),[C,S]=l.useState(),[k,T]=l.useState("marba"),[I,L]=l.useState(!1),[$,M]=l.useState([]),[y,d]=l.useState(null),[c,h]=l.useState(""),[j,R]=l.useState(!1),[G,V]=l.useState(50),[b,W]=l.useState(null),Y=new Ts;l.useEffect(()=>{t||(p(""),S(void 0),T("marba"),M([]),d(null),h(""),V(50),W(null))},[t]),l.useEffect(()=>{if(c&&k==="synapse"){const g={id:"temp",insightId:"temp",format:"hook-post",content:{headline:c.split(`
`)[0]||"",hook:c.split(`
`)[1]||"",body:c.split(`
`).slice(2,-1).join(`
`)||"",cta:c.split(`
`).slice(-1)[0]||""},psychology:{principle:"Curiosity Gap",trigger:{type:"curiosity",strength:.8},persuasionTechnique:"Pattern Interrupt",expectedReaction:""},optimization:{powerWords:[],framingDevice:"",narrativeStructure:"Hook â†’ Story â†’ Lesson",pacing:"medium"},meta:{platform:[i],targetAudience:"",tone:"authoritative"},prediction:{engagementScore:0,viralPotential:0,leadGeneration:0,brandImpact:"neutral",confidenceLevel:0},metadata:{generatedAt:new Date,model:"",iterationCount:0}},z=Y.validateContent(g,[i]).validations.find(O=>O.section==="total"&&O.platform===i);z&&W(z)}},[c,i,k]);const q=async()=>{if(!u.trim()){alert("Please enter a topic");return}L(!0),M([]),d(null);try{const g=await X.generateContent({brandId:a,platform:i,topic:u,pillarId:C,mode:k}),F=[{id:"1",text:`ðŸŽ¯ ${u}

Transform your business with cutting-edge solutions. Our proven approach delivers real results. Ready to elevate your game?

#innovation #business #growth`,synapse_analysis:{psychology_score:85,power_words:["Transform","cutting-edge","proven","real results","elevate"],emotional_triggers:["aspiration","urgency","confidence"],connections_found:["transformation â†’ results","innovation â†’ growth"],clarity_score:90,engagement_prediction:87,improvements:["Consider adding specific metrics","Include a clear CTA"]},psychology_score:85,benchmark_comparison:{industry_average:65,your_score:85,percentile:78,comparison_text:"Your content scores 31% higher than industry average"},why_this_works:"This post combines aspirational language with concrete promises, triggering both emotional and logical engagement. The power words create urgency while maintaining professionalism.",suggested_hashtags:["#innovation","#business","#growth","#transformation"]},{id:"2",text:`ðŸ’¡ ${u}

Discover how leading companies are staying ahead. Join the revolution and unlock your potential today.

âœ¨ Learn more â†’ [link]

#leadership #success #future`,synapse_analysis:{psychology_score:78,power_words:["Discover","leading","revolution","unlock","potential"],emotional_triggers:["curiosity","belonging","achievement"],connections_found:["discovery â†’ learning","leadership â†’ success"],clarity_score:85,engagement_prediction:80,improvements:["Make CTA more specific","Add social proof"]},psychology_score:78,benchmark_comparison:{industry_average:65,your_score:78,percentile:68,comparison_text:"Your content scores 20% higher than industry average"},why_this_works:'Appeals to desire for belonging and staying competitive. The curiosity gap created by "Discover how" drives engagement.',suggested_hashtags:["#leadership","#success","#future","#innovation"]},{id:"3",text:`ðŸš€ ${u}

What if you could 10x your results in half the time? Here's the secret successful brands don't want you to know.

ðŸ‘‰ Swipe to see the full strategy

#productivity #marketing #strategy`,synapse_analysis:{psychology_score:92,power_words:["10x","secret","successful","strategy"],emotional_triggers:["curiosity","exclusivity","urgency","achievement"],connections_found:["efficiency â†’ results","secrets â†’ success"],clarity_score:88,engagement_prediction:91,improvements:["Deliver on the promise in follow-up content"]},psychology_score:92,benchmark_comparison:{industry_average:65,your_score:92,percentile:89,comparison_text:"Your content scores 42% higher than industry average"},why_this_works:"Uses curiosity gap and exclusivity psychology. The specific metric (10x) makes the promise tangible while maintaining intrigue.",suggested_hashtags:["#productivity","#marketing","#strategy","#businessgrowth"]}];M(k==="synapse"?F:F.map(z=>({...z,synapse_analysis:void 0,psychology_score:void 0})))}catch(g){console.error("Failed to generate content:",g),alert("Failed to generate content. Please try again.")}finally{L(!1)}},v=g=>{d(g);const F=$.find(z=>z.id===g);F&&h(F.text)},_=async()=>{if(!c.trim()){alert("Please select and edit a variation");return}R(!0);try{const g=$.find(z=>z.id===y),F=await X.createContentItem({brand_id:a,user_id:r,platform:i,content_text:c,pillar_id:C,generation_mode:k,synapse_score:g==null?void 0:g.psychology_score,intelligence_badges:k==="synapse"?["Synapse Enhanced","Data-driven"]:[],hashtags:g==null?void 0:g.suggested_hashtags,status:"draft"});x&&x(F.id),s()}catch(g){console.error("Failed to save content:",g),alert("Failed to save content. Please try again.")}finally{R(!1)}};return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(oe,{children:"Generate Content"}),e.jsx(ge,{children:"Create engaging content with AI assistance"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Platform"}),e.jsxs(ke,{value:i,onValueChange:g=>m(g),children:[e.jsx(je,{children:e.jsx(Ce,{})}),e.jsx(ve,{children:Hs.map(g=>e.jsx(U,{value:g.value,children:g.label},g.value))})]})]}),o.length>0&&e.jsxs("div",{children:[e.jsx(B,{children:"Message Pillar (Optional)"}),e.jsxs(ke,{value:C,onValueChange:S,children:[e.jsx(je,{children:e.jsx(Ce,{placeholder:"Select a pillar..."})}),e.jsx(ve,{children:o.map(g=>e.jsx(U,{value:g.id,children:g.name},g.id))})]})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Topic / Main Idea"}),e.jsx(Ye,{value:u,onChange:g=>p(g.target.value),placeholder:"What do you want to talk about?",rows:3})]}),e.jsxs("div",{children:[e.jsxs(B,{className:"flex items-center gap-2",children:["Generation Mode",e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",title:`MARBA = Fast generation with Claude Sonnet 3.5
Synapse = Enhanced with psychology optimization and deeper analysis`,children:e.jsx(rs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(N,{variant:k==="marba"?"default":"outline",onClick:()=>T("marba"),className:"flex-1",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"MARBA",e.jsx(H,{variant:"secondary",className:"ml-2 text-xs",children:"Fast"})]}),e.jsxs(N,{variant:k==="synapse"?"default":"outline",onClick:()=>T("synapse"),className:"flex-1",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Synapse",e.jsx(H,{variant:"secondary",className:"ml-2 text-xs",children:"Enhanced"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k==="marba"?"Fast generation with Claude Sonnet 3.5":"Psychology-optimized content with deeper analysis"})]}),k==="synapse"&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsx(Gs,{value:G,onChange:V})}),e.jsx(N,{onClick:q,disabled:I,className:"w-full",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating with ",k==="marba"?"MARBA":"Synapse","..."]}):e.jsxs(e.Fragment,{children:[k==="marba"?e.jsx(we,{className:"w-4 h-4 mr-2"}):e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Generate Content"]})}),$.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Choose a Variation"}),e.jsxs(Ae,{value:y||void 0,onValueChange:v,children:[e.jsxs($e,{className:"grid w-full grid-cols-3",children:[e.jsx(K,{value:"1",children:"Option 1"}),e.jsx(K,{value:"2",children:"Option 2"}),e.jsx(K,{value:"3",children:"Option 3"})]}),$.map(g=>e.jsxs(ee,{value:g.id,className:"space-y-4",children:[e.jsx(P,{className:"p-4",children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:g.text})}),k==="synapse"&&g.synapse_analysis&&e.jsx(P,{className:"p-4 bg-purple-50 border-purple-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Psychology Score"}),e.jsxs("span",{className:"text-sm font-bold",children:[g.psychology_score,"/100"]})]}),e.jsx("div",{className:"bg-white rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${g.psychology_score}%`}})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold block mb-1",children:"Power Words"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.synapse_analysis.power_words.map((F,z)=>e.jsx(H,{variant:"secondary",className:"text-xs",children:F},z))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold block mb-1",children:"Emotional Triggers"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.synapse_analysis.emotional_triggers.map((F,z)=>e.jsx(H,{className:"text-xs bg-pink-100 text-pink-800",children:F},z))})]})]})}),g.benchmark_comparison&&e.jsxs(P,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Industry Benchmark"}),e.jsx("p",{className:"text-sm text-blue-900",children:g.benchmark_comparison.comparison_text}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[e.jsxs("span",{children:["Industry Avg: ",g.benchmark_comparison.industry_average]}),e.jsxs("span",{className:"font-bold",children:["Your Score: ",g.benchmark_comparison.your_score]}),e.jsxs("span",{children:["Percentile: ",g.benchmark_comparison.percentile,"th"]})]})]}),g.why_this_works&&e.jsxs(P,{className:"p-4 bg-green-50 border-green-200",children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Why This Works"}),e.jsx("p",{className:"text-sm text-green-900",children:g.why_this_works})]}),y===g.id&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Edit Content"]}),k==="synapse"&&b&&e.jsx(Es,{validation:b})]}),e.jsx(Ye,{value:c,onChange:F=>h(F.target.value),rows:6,className:"mt-2"}),k==="synapse"&&b&&b.status!=="valid"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.message})]})]},g.id))]}),y&&e.jsx(N,{onClick:_,disabled:j,className:"w-full mt-4",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Save to Calendar"]})})]})]})]})})}function Ws({brandId:t,userId:s,onGenerateFromOpportunity:a,autoRefreshInterval:r=5*60*1e3}){const[n,o]=l.useState([]),[x,i]=l.useState(!0),[m,u]=l.useState(null),[p,C]=l.useState(!1),[S,k]=l.useState(new Set),T=async()=>{try{i(!0);const y=await xe.getActiveOpportunities(t);o(y)}catch(y){console.error("Failed to load opportunities:",y)}finally{i(!1)}};l.useEffect(()=>{T();const y=setInterval(T,r);return()=>clearInterval(y)},[t,r]),l.useEffect(()=>{const y=setInterval(()=>{o(d=>[...d])},1e3);return()=>clearInterval(y)},[]);const I=async y=>{k(d=>new Set(d).add(y));try{await xe.dismissOpportunity(y),o(d=>d.filter(c=>c.id!==y))}catch(d){console.error("Failed to dismiss opportunity:",d),alert("Failed to dismiss opportunity")}finally{k(d=>{const c=new Set(d);return c.delete(y),c})}},L=y=>{u(y),C(!0),a&&a(y)},$=y=>{const d=xe.getTimeUntilExpiration(y);return d.expired?"Expired":y.expires_at?d.hours<1?`${d.minutes}m left`:d.hours<24?`${d.hours}h ${d.minutes}m left`:`${Math.floor(d.hours/24)}d ${d.hours%24}h left`:"No deadline"},M=y=>{const d=xe.getTimeUntilExpiration(y);return d.expired||d.hours<6?"text-red-600":d.hours<24?"text-orange-600":"text-blue-600"};return x&&n.length===0?e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading opportunities..."})]})}):n.length===0?e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ie,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active opportunities right now"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"We'll notify you when new opportunities arise"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(P,{className:"p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-6 h-6 text-purple-600"}),e.jsx("h2",{className:"text-xl font-bold",children:"Intelligence Opportunities"}),e.jsxs(H,{variant:"secondary",className:"ml-2",children:[n.length," Active"]})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:T,disabled:x,children:[e.jsx(be,{className:`w-4 h-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"space-y-3",children:n.map(y=>{const d=xe.getOpportunityIcon(y.type),c=xe.getOpportunityTypeLabel(y.type),h=xe.getUrgencyColor(y.urgency),j=$(y),R=M(y);return e.jsx(P,{className:"p-4 bg-white hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl flex-shrink-0",children:d}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold truncate",children:y.title}),e.jsx(H,{variant:"outline",className:h,children:y.urgency}),e.jsx(H,{variant:"outline",className:"bg-gray-100 text-gray-700",children:c})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:y.description})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>I(y.id),disabled:S.has(y.id),className:"flex-shrink-0 ml-2",children:e.jsx(ct,{className:"w-4 h-4"})})]}),y.suggested_actions&&y.suggested_actions.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Suggested Actions:"}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:y.suggested_actions.slice(0,2).map((G,V)=>e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-purple-600",children:"â€¢"}),e.jsx("span",{children:G})]},V))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[y.expires_at&&e.jsxs("div",{className:`flex items-center gap-1 font-semibold ${R}`,children:[e.jsx(ne,{className:"w-3 h-3"}),j]}),y.impact_score!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(_t,{className:"w-3 h-3"}),"Impact: ",y.impact_score,"/100"]})]}),e.jsxs(N,{size:"sm",onClick:()=>L(y.id),children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Generate Post"]})]})]})]})},y.id)})}),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground text-center",children:["Auto-refreshes every ",r/6e4," minutes"]})]}),p&&m&&e.jsx(Ft,{open:p,onClose:()=>{C(!1),u(null)},brandId:t,userId:s,opportunityId:m})]})}const Pe=l.forwardRef(({className:t,...s},a)=>e.jsx(St,{ref:a,className:D("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(ls,{className:D("flex items-center justify-center text-current"),children:e.jsx(Re,{className:"h-4 w-4"})})}));Pe.displayName=St.displayName;function Ys({open:t,onClose:s,variants:a,loading:r,onSelectVariant:n}){const o=async m=>{await navigator.clipboard.writeText(m)},x=m=>{const u=m.content.content;return`${u.headline}

${u.hook}

${u.body}

${u.cta}`},i=m=>{switch(m){case"scarcity":return"bg-red-100 text-red-700 border-red-200";case"fomo":return"bg-orange-100 text-orange-700 border-orange-200";case"exclusivity":return"bg-purple-100 text-purple-700 border-purple-200";case"urgency":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"social-proof":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(oe,{children:"A/B Test Variants"}),e.jsx(ge,{children:"Select a variant to use or compare strategies"})]}),r&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(_e,{className:"w-8 h-8 animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2",children:"Generating variants..."})]}),!r&&a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Recommended Testing Order"}),e.jsx("div",{className:"text-sm text-blue-700",children:a.recommendedTest})]}),e.jsx("div",{className:"space-y-4",children:a.variants.map(m=>e.jsx(P,{className:"p-4 border-2 hover:border-purple-300 transition-colors",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["Variant ",m.variantLetter]}),e.jsx(H,{variant:"outline",className:i(m.strategy),children:m.strategy.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>o(x(m)),title:"Copy to clipboard",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>{n(m.content),s()},children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Use This Variant"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Headline:"}),e.jsx("p",{className:"text-sm mt-1",children:m.content.content.headline})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Hook:"}),e.jsx("p",{className:"text-sm mt-1",children:m.content.content.hook})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Body:"}),e.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:m.content.content.body})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"CTA:"}),e.jsx("p",{className:"text-sm mt-1",children:m.content.content.cta})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded p-2",children:[e.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Changes from Original:"}),e.jsx("ul",{className:"text-xs text-purple-600 space-y-0.5",children:m.differenceFromOriginal.map((u,p)=>e.jsxs("li",{children:["â€¢ ",u]},p))})]})]})},m.id))})]})]})})}function qs({open:t,onClose:s,section:a,result:r,loading:n,onSelectOption:o,onRegenerate:x}){const i=async u=>{await navigator.clipboard.writeText(u)},m=u=>u.charAt(0).toUpperCase()+u.slice(1);return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(ie,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsxs(oe,{children:["Regenerate ",a?m(a):"Section"]}),e.jsxs(ge,{children:["Choose a variation to replace the current ",a]})]}),n&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(_e,{className:"w-8 h-8 animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2",children:"Generating variations..."})]}),!n&&r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(P,{className:"p-4 bg-gray-50 border-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(H,{variant:"outline",className:"bg-gray-200",children:["Current ",m(r.section)]}),x&&e.jsxs(N,{variant:"ghost",size:"sm",onClick:x,children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),"Regenerate Again"]})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:r.original})]}),r.reasoning&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Why Regenerate?"}),e.jsx("div",{className:"text-sm text-blue-700",children:r.reasoning})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:["Choose a Variation (",r.regenerated.length," options):"]}),r.regenerated.map((u,p)=>e.jsx(P,{className:"p-4 border-2 hover:border-purple-300 transition-colors cursor-pointer",onClick:()=>{o(r.section,p),s()},children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(H,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:["Option ",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:C=>{C.stopPropagation(),i(u)},title:"Copy to clipboard",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsxs(N,{variant:"default",size:"sm",onClick:C=>{C.stopPropagation(),o(r.section,p),s()},children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Use This"]})]})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:u})]})},p))]})]})]})})}function Qs({open:t,onClose:s,provenance:a}){return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(oe,{children:"Content Provenance"}),e.jsx(ge,{children:"See how this content was built from data and insights"})]}),a?e.jsx(Ms,{provenance:a}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No provenance data available for this content"})]})})}function Ks(t){return t>=90?{rating:5,label:"Excellent",color:"text-green-600"}:t>=75?{rating:4,label:"Great",color:"text-blue-600"}:t>=60?{rating:3,label:"Good",color:"text-yellow-600"}:t>=40?{rating:2,label:"Fair",color:"text-orange-600"}:{rating:1,label:"Poor",color:"text-red-600"}}function Js({score:t,showScore:s=!1,size:a="md",showLabel:r=!0}){const{rating:n,label:o,color:x}=Ks(t),i={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},m={sm:"text-xs",md:"text-sm",lg:"text-base"},u=i[a],p=m[a],S={green:"text-green-500",blue:"text-blue-500",yellow:"text-yellow-500",orange:"text-orange-500",red:"text-red-500"}[x]||"text-yellow-500";return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(k=>e.jsx(os,{className:`${u} ${k<=n?S:"text-gray-300"} ${k<=n?"fill-current":""}`},k))}),r&&e.jsx("span",{className:`${p} font-medium`,style:{color:x},children:o}),s&&e.jsxs("span",{className:`${p} text-muted-foreground`,children:["(",t,"/100)"]})]})}const Xs={instagram:e.jsx(fs,{className:"w-4 h-4"}),twitter:e.jsx(ps,{className:"w-4 h-4"}),linkedin:e.jsx(gs,{className:"w-4 h-4"}),facebook:e.jsx(hs,{className:"w-4 h-4"}),tiktok:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})}),email:e.jsx(us,{className:"w-4 h-4"}),blog:e.jsx(xs,{className:"w-4 h-4"})},Zs={instagram:"bg-pink-500 text-white",twitter:"bg-blue-400 text-white",linkedin:"bg-blue-700 text-white",facebook:"bg-blue-600 text-white",tiktok:"bg-black text-white",email:"bg-red-500 text-white",blog:"bg-green-600 text-white"},ea={draft:"bg-gray-100 text-gray-800 border-gray-200",scheduled:"bg-orange-100 text-orange-800 border-orange-200",published:"bg-green-100 text-green-800 border-green-200",failed:"bg-red-100 text-red-800 border-red-200"};function $t({item:t,onEdit:s,onDelete:a,onDuplicate:r,onUpdate:n,onSchedule:o,compact:x=!1}){var se;const[i,m]=l.useState(!1),[u,p]=l.useState(!1),[C,S]=l.useState(!1),[k,T]=l.useState(!1),[I,L]=l.useState(""),[$,M]=l.useState(!1),[y,d]=l.useState(null),[c,h]=l.useState(null),[j,R]=l.useState(null),G=new Ds,V=new Ps,b=w=>{if(!w)return"Not scheduled";const A=new Date(w);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(A)},W=()=>{var f;if(!o)return;const w=new Date;w.setDate(w.getDate()+1),w.setHours(10,0,0,0);const A=w.toISOString().slice(0,16);L(((f=t.scheduled_time)==null?void 0:f.slice(0,16))||A),T(!0)},Y=()=>{!o||!I||(o(t,new Date(I).toISOString()),T(!1))},q=()=>{const w=x?80:150;return t.content_text.length<=w?t.content_text:t.content_text.substring(0,w)+"..."},v=w=>w.toLowerCase().includes("synapse")?"ðŸ§ ":w.toLowerCase().includes("data")?"ðŸ“Š":w.toLowerCase().includes("high-performing")?"ðŸŽ¯":"âœ¨",_=async()=>{M(!0),m(!0);try{const w={id:t.id,insightId:"mock-insight",format:"hook-post",content:{headline:O(t.content_text,"headline")||t.content_text.substring(0,100),hook:O(t.content_text,"hook")||"",body:O(t.content_text,"body")||t.content_text,cta:O(t.content_text,"cta")||""},psychology:{principle:"Curiosity Gap",trigger:{type:"curiosity",strength:.8},persuasionTechnique:"Pattern Interrupt",expectedReaction:"High engagement"},optimization:{powerWords:[],framingDevice:"Standard",narrativeStructure:"Hook â†’ Story â†’ Lesson",pacing:"medium"},meta:{platform:[t.platform],targetAudience:"General",tone:"authoritative"},prediction:{engagementScore:.8,viralPotential:.6,leadGeneration:.7,brandImpact:"positive",confidenceLevel:.8},metadata:{generatedAt:new Date,model:"claude-3.5-sonnet",iterationCount:1}},A={name:"Business",industry:"General",targetAudience:"Professionals",brandVoice:"professional",contentGoals:["engagement"]},f=await G.generateVariants(w,A);d(f)}catch(w){console.error("Failed to generate variants:",w),alert("Failed to generate variants. Please try again.")}finally{M(!1)}},g=w=>{if(n){const A={...t,content_text:`${w.content.headline}

${w.content.hook}

${w.content.body}

${w.content.cta}`};n(A)}},F=async w=>{h(w),p(!0);try{const A={id:t.id,insightId:"mock-insight",format:"hook-post",content:{headline:O(t.content_text,"headline")||t.content_text.substring(0,100),hook:O(t.content_text,"hook")||"",body:O(t.content_text,"body")||t.content_text,cta:O(t.content_text,"cta")||""},psychology:{principle:"Curiosity Gap",trigger:{type:"curiosity",strength:.8},persuasionTechnique:"Pattern Interrupt",expectedReaction:"High engagement"},optimization:{powerWords:[],framingDevice:"Standard",narrativeStructure:"Hook â†’ Story â†’ Lesson",pacing:"medium"},meta:{platform:[t.platform],targetAudience:"General",tone:"authoritative"},prediction:{engagementScore:.8,viralPotential:.6,leadGeneration:.7,brandImpact:"positive",confidenceLevel:.8},metadata:{generatedAt:new Date,model:"claude-3.5-sonnet",iterationCount:1}},f={name:"Business",industry:"General",targetAudience:"Professionals",brandVoice:"professional",contentGoals:["engagement"]},E={id:"mock-insight",type:"unexpected_connection",thinkingStyle:"lateral",insight:"Content insight",whyProfound:"This insight is meaningful",whyNow:"Timely and relevant",contentAngle:"Engagement",expectedReaction:"High engagement",evidence:["Supporting data"],confidence:.85,metadata:{generatedAt:new Date,model:"mock-model"}},pe=await V.regenerateSection(A,w,f,E);R(pe)}catch(A){console.error("Failed to regenerate section:",A),alert("Failed to regenerate section. Please try again."),p(!1)}finally{h(null)}},z=(w,A)=>{if(!j||!n)return;const f={id:t.id,insightId:"mock",format:"hook-post",content:{headline:w==="headline"?j.regenerated[A]:O(t.content_text,"headline")||"",hook:w==="hook"?j.regenerated[A]:O(t.content_text,"hook")||"",body:w==="body"?j.regenerated[A]:O(t.content_text,"body")||t.content_text,cta:w==="cta"?j.regenerated[A]:O(t.content_text,"cta")||""},psychology:{principle:"Curiosity Gap",trigger:{type:"curiosity",strength:.8},persuasionTechnique:"Pattern Interrupt",expectedReaction:""},optimization:{powerWords:[],framingDevice:"",narrativeStructure:"Hook â†’ Story â†’ Lesson",pacing:"medium"},meta:{platform:[t.platform],targetAudience:"",tone:"authoritative"},prediction:{engagementScore:0,viralPotential:0,leadGeneration:0,brandImpact:"neutral",confidenceLevel:0},metadata:{generatedAt:new Date,model:"",iterationCount:0}},E=V.applyRegeneration(f,j,A),pe={...t,content_text:`${E.content.headline}

${E.content.hook}

${E.content.body}

${E.content.cta}`};n(pe),R(null)},O=(w,A)=>{const f=w.split(`
`).filter(E=>E.trim());return A==="headline"?f[0]||null:A==="hook"?f[1]||null:A==="body"?f.slice(2,-1).join(`
`)||null:A==="cta"&&f[f.length-1]||null},ce=()=>({dataSourcesUsed:["Google Reviews","Social Media"],psychologyTrigger:"Curiosity Gap",frameworkStagesUsed:[{stage:"Hook",sourceField:"emotionalHook",content:"Opening line..."},{stage:"Story",sourceField:"contentAngle",content:"Main narrative..."}],contentAssembly:{headline:{source:"AI Generation",field:"headline",preview:"Preview..."},hook:{source:"Psychology Engine",field:"hook",preview:"Preview..."},body:{source:"Content Framework",field:"body",preview:"Preview..."},cta:{source:"CTA Library",field:"cta",preview:"Preview..."}}});return e.jsxs(P,{className:`p-4 hover:shadow-md transition-shadow ${x?"p-3":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:`${Zs[t.platform]} px-2 py-1`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[Xs[t.platform],e.jsx("span",{className:"capitalize text-xs",children:t.platform})]})}),e.jsx(H,{variant:"outline",className:ea[t.status],children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s&&e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>s(t),title:"Edit content",children:e.jsx(Ct,{className:"w-4 h-4"})}),r&&e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>r(t),title:"Duplicate content",children:e.jsx(Ke,{className:"w-4 h-4"})}),o&&e.jsx(N,{variant:"ghost",size:"sm",onClick:W,title:"Schedule content",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(re,{className:"w-4 h-4"})}),a&&e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>a(t),title:"Delete content",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Tt,{className:"w-4 h-4"})})]})]}),t.image_url&&e.jsx("div",{className:"mb-3 rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.image_url,alt:"Generated visual",className:"w-full h-auto object-cover transition-opacity duration-200",onLoad:w=>{const A=w.target;A.style.opacity="1"},onError:w=>{const f=w.target.parentElement;f&&(f.style.display="none")},loading:"lazy",style:{opacity:0}})}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:q()})}),t.intelligence_badges&&t.intelligence_badges.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:t.intelligence_badges.map((w,A)=>e.jsxs(H,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:[e.jsx("span",{className:"mr-1",children:v(w)}),w]},A))}),t.synapse_score!==void 0&&t.synapse_score>0&&e.jsx("div",{className:"mb-3",children:e.jsx(Js,{score:t.synapse_score,size:"sm",showLabel:!0})}),e.jsxs("div",{className:"mb-3 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:t.status==="published"?"Published: ":"Scheduled: "}),b(t.status==="published"?t.published_time:t.scheduled_time)]}),t.status==="published"&&t.engagement_metrics&&e.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t",children:[t.engagement_metrics.likes>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(cs,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:t.engagement_metrics.likes.toLocaleString()})]}),t.engagement_metrics.comments>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:t.engagement_metrics.comments.toLocaleString()})]}),t.engagement_metrics.shares>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ms,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:t.engagement_metrics.shares.toLocaleString()})]}),t.engagement_metrics.reach>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(at,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:t.engagement_metrics.reach.toLocaleString()})]})]}),t.status==="failed"&&t.error_message&&e.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[e.jsx("span",{className:"font-semibold",children:"Error: "}),t.error_message]}),!x&&(t.generation_mode==="synapse"||((se=t.intelligence_badges)==null?void 0:se.some(w=>w.includes("Synapse"))))&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:_,disabled:$,className:"flex items-center gap-1 text-xs",children:[e.jsx(Ie,{className:"w-3 h-3"}),"Generate Variants"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>F("headline"),className:"flex items-center gap-1 text-xs",children:[e.jsx(be,{className:"w-3 h-3"}),"Regenerate Headline"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>F("body"),className:"flex items-center gap-1 text-xs",children:[e.jsx(be,{className:"w-3 h-3"}),"Regenerate Body"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>S(!0),className:"flex items-center gap-1 text-xs",children:[e.jsx(at,{className:"w-3 h-3"}),"View Sources"]})]}),e.jsx(Ys,{open:i,onClose:()=>m(!1),variants:y,loading:$,onSelectVariant:g}),e.jsx(qs,{open:u,onClose:()=>p(!1),section:c,result:j,loading:!!c,onSelectOption:z,onRegenerate:()=>c&&F(c)}),e.jsx(Qs,{open:C,onClose:()=>S(!1),provenance:ce()}),e.jsx(he,{open:k,onOpenChange:T,children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(oe,{children:"Schedule Content"})}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"schedule-datetime",children:"Date and Time"}),e.jsx(te,{id:"schedule-datetime",type:"datetime-local",value:I,onChange:w=>L(w.target.value)})]})}),e.jsxs(It,{children:[e.jsx(N,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(N,{onClick:Y,children:"Schedule"})]})]})})]})}const ta=[{value:"instagram",label:"Instagram",icon:"ðŸ“·"},{value:"twitter",label:"Twitter",icon:"ðŸ¦"},{value:"linkedin",label:"LinkedIn",icon:"ðŸ’¼"},{value:"facebook",label:"Facebook",icon:"ðŸ‘¥"}];function sa({open:t,onClose:s,brandId:a,userId:r,pillars:n=[],onContentCreated:o}){const[x,i]=l.useState("config"),[m,u]=l.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]}),[p,C]=l.useState(["instagram","facebook"]),[S,k]=l.useState("marba"),[T,I]=l.useState([]),[L,$]=l.useState(!1),[M,y]=l.useState([]),[d,c]=l.useState(new Set),[h,j]=l.useState(!1);Je.useEffect(()=>{if(n.length>0&&T.length===0){const v=Math.floor(100/n.length);I(n.map((_,g)=>({pillarId:_.id,percentage:g===0?100-v*(n.length-1):v})))}},[n,T.length]);const R=v=>{C(_=>_.includes(v)?_.filter(g=>g!==v):[..._,v])},G=(v,_)=>{I(g=>g.map(F=>F.pillarId===v?{...F,percentage:_}:F))},V=async()=>{if(p.length===0){alert("Please select at least one platform");return}const v=T.reduce((_,g)=>_+g.percentage,0);if(Math.abs(v-100)>1){alert("Pillar percentages must total 100%");return}$(!0);try{const _=await X.generateBulkContent({brandId:a,dateRange:m,platforms:p,pillarDistribution:T,mode:S,postsPerDay:1});y(_.items),c(new Set(_.items.map(g=>g.id))),i("review")}catch(_){console.error("Failed to generate bulk content:",_),alert("Failed to generate content. Please try again.")}finally{$(!1)}},b=v=>{c(_=>{const g=new Set(_);return g.has(v)?g.delete(v):g.add(v),g})},W=async()=>{const v=M.filter(_=>d.has(_.id));if(v.length===0){alert("Please select at least one item to schedule");return}j(!0);try{await X.bulkSchedule(v,"optimal_times"),i("complete"),o&&o()}catch(_){console.error("Failed to schedule content:",_),alert("Failed to schedule some items. Please try again.")}finally{j(!1)}},Y=()=>{const v=new Date(m.start),_=new Date(m.end);return Math.ceil((_.getTime()-v.getTime())/(1e3*60*60*24))},q=()=>{i("config"),y([]),c(new Set),s()};return e.jsx(he,{open:t,onOpenChange:q,children:e.jsxs(ie,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(oe,{children:"Bulk Content Generation"}),e.jsx(ge,{children:"Generate multiple posts across platforms and date ranges"})]}),x==="config"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Start Date"}),e.jsx(te,{type:"date",value:m.start,onChange:v=>u({...m,start:v.target.value})})]}),e.jsxs("div",{children:[e.jsx(B,{children:"End Date"}),e.jsx(te,{type:"date",value:m.end,onChange:v=>u({...m,end:v.target.value})})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"}),Y()," days"]}),e.jsxs("div",{children:[e.jsx(B,{children:"Select Platforms"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:ta.map(v=>e.jsx(P,{className:`p-4 cursor-pointer transition-all ${p.includes(v.value)?"border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>R(v.value),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{checked:p.includes(v.value)}),e.jsx("span",{className:"text-2xl",children:v.icon}),e.jsx("span",{className:"font-medium",children:v.label})]})},v.value))})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Generation Mode"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(N,{variant:S==="marba"?"default":"outline",onClick:()=>k("marba"),className:"flex-1",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"MARBA (Fast)"]}),e.jsxs(N,{variant:S==="synapse"?"default":"outline",onClick:()=>k("synapse"),className:"flex-1",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Synapse (Enhanced)"]})]})]}),n.length>0&&e.jsxs("div",{children:[e.jsx(B,{children:"Content Mix (Pillar Distribution)"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[T.map(v=>{const _=n.find(g=>g.id===v.pillarId);return _?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:_.name}),e.jsxs("span",{className:"text-sm font-bold",children:[v.percentage,"%"]})]}),e.jsx(te,{type:"range",min:"0",max:"100",value:v.percentage,onChange:g=>G(v.pillarId,parseInt(g.target.value))})]},v.pillarId):null}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total:"," ",T.reduce((v,_)=>v+_.percentage,0),"%"]})]})]}),e.jsx(N,{onClick:V,disabled:L,className:"w-full",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating ",p.length*Y()," posts..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Generate Content"]})})]}),x==="review"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Generation Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Posts:"}),e.jsx("span",{className:"font-bold ml-2",children:M.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Platforms:"}),e.jsx("span",{className:"font-bold ml-2",children:p.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Days:"}),e.jsx("span",{className:"font-bold ml-2",children:Y()})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{checked:d.size===M.length,onCheckedChange:v=>{c(v?new Set(M.map(_=>_.id)):new Set)}}),e.jsxs(B,{children:["Select All (",d.size," of ",M.length,")"]})]}),e.jsx(N,{onClick:W,disabled:h||d.size===0,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Scheduling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Schedule ",d.size," Posts"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto",children:M.map(v=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx(Pe,{checked:d.has(v.id),onCheckedChange:()=>b(v.id)})}),e.jsx($t,{item:v,compact:!0})]},v.id))})]}),x==="complete"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Content Scheduled Successfully!"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:[d.size," posts have been scheduled across ",p.length," ","platforms for the next ",Y()," days."]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(N,{onClick:q,children:"Close"}),e.jsx(N,{variant:"outline",onClick:()=>{i("config"),y([]),c(new Set)},children:"Generate More"})]})]})]})})}function aa({brandId:t,days:s=7,enableApprovalWorkflow:a=!1,onRefresh:r}){const[n,o]=l.useState([]),[x,i]=l.useState(!0),[m,u]=l.useState(new Set),p=async()=>{i(!0);try{console.log("[PublishingQueue] Loading queue for brand:",t);const d=await X.getPublishingQueue(t,s);console.log("[PublishingQueue] Loaded items from database:",d.length);const c=d.map(h=>({content:h,status:C(h),retry_count:0}));console.log("[PublishingQueue] Queue items after transform:",{total:c.length,drafts:c.filter(h=>h.content.status==="draft").length,scheduled:c.filter(h=>h.content.status==="scheduled").length}),o(c)}catch(d){console.error("[PublishingQueue] Failed to load publishing queue:",d)}finally{i(!1)}},C=d=>{if(d.status==="published")return"published";if(d.status==="failed")return"failed";if(d.status==="draft")return"pending";if(d.scheduled_time){const c=new Date(d.scheduled_time),h=new Date;if(c<=h&&c>new Date(h.getTime()-5*60*1e3))return"publishing"}return"pending"};l.useEffect(()=>{p();const d=setInterval(p,3e4);return()=>clearInterval(d)},[t,s]);const S=async d=>{u(c=>new Set(c).add(d.id));try{await X.publishContent(d.id),await p(),r&&r()}catch(c){console.error("Failed to publish content:",c),alert("Failed to publish content. Please try again.")}finally{u(c=>{const h=new Set(c);return h.delete(d.id),h})}},k=async(d,c)=>{try{await X.updateContentItem(d.id,{scheduled_time:c,status:"scheduled"}),await p(),r&&r()}catch(h){console.error("Failed to schedule content:",h),alert("Failed to schedule content. Please try again.")}},T=async d=>{await S(d)},I=async d=>{const h=d.status==="draft"?"Schedule this post (YYYY-MM-DD HH:MM):":"Enter new date/time (YYYY-MM-DD HH:MM):",j=d.scheduled_time||"",R=prompt(h,j);if(R)try{await X.scheduleContent(d.id,new Date(R).toISOString()),await p(),r&&r()}catch(G){console.error("Failed to schedule:",G),alert(`Failed to schedule: ${G.message}`)}},L=d=>{switch(d){case"pending":return e.jsx(ne,{className:"w-5 h-5 text-blue-500"});case"publishing":return e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-orange-500"});case"published":return e.jsx(ye,{className:"w-5 h-5 text-green-500"});case"failed":return e.jsx(Le,{className:"w-5 h-5 text-red-500"})}},$=d=>{const c={pending:"bg-blue-100 text-blue-800 border-blue-200",publishing:"bg-orange-100 text-orange-800 border-orange-200",published:"bg-green-100 text-green-800 border-green-200",failed:"bg-red-100 text-red-800 border-red-200"};return e.jsx(H,{variant:"outline",className:c[d],children:d})},M=d=>{if(!d)return"Not scheduled";const c=new Date,j=new Date(d).getTime()-c.getTime();if(j<0)return"Overdue";const R=Math.floor(j/(1e3*60*60)),G=Math.floor(j%(1e3*60*60)/(1e3*60));return R<1?`in ${G}m`:R<24?`in ${R}h ${G}m`:`in ${Math.floor(R/24)}d ${R%24}h`},y=n.reduce((d,c)=>{var j;const h=((j=c.content.scheduled_time)==null?void 0:j.split("T")[0])||"unscheduled";return d[h]||(d[h]=[]),d[h].push(c),d},{});return e.jsxs(P,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Content Queue"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.length," ",n.length===1?"post":"posts"," (drafts & scheduled)"]})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:p,disabled:x,children:[e.jsx(be,{className:`w-4 h-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[{status:"pending",label:"Pending",icon:ne,color:"text-blue-500"},{status:"publishing",label:"Publishing",icon:Be,color:"text-orange-500"},{status:"published",label:"Published",icon:ye,color:"text-green-500"},{status:"failed",label:"Failed",icon:Le,color:"text-red-500"}].map(({status:d,label:c,icon:h,color:j})=>{const R=n.filter(G=>G.status===d).length;return e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:`w-5 h-5 ${j}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:R}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c})]})]})},d)})}),x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading queue..."})]}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No content in queue"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(y).sort(([d],[c])=>d==="unscheduled"?-1:c==="unscheduled"?1:d.localeCompare(c)).map(([d,c])=>e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),d==="unscheduled"?"Drafts (Not Scheduled)":new Date(d).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),e.jsx("div",{className:"space-y-3",children:c.map(h=>e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1",children:L(h.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$(h.status),e.jsx("span",{className:"text-sm text-muted-foreground",children:M(h.content.scheduled_time)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.status==="pending"&&e.jsx(e.Fragment,{children:h.content.status==="draft"?e.jsxs(N,{size:"sm",onClick:()=>I(h.content),children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Schedule"]}):e.jsxs(e.Fragment,{children:[a&&e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs(N,{size:"sm",onClick:()=>S(h.content),disabled:m.has(h.content.id),children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"Publish Now"]})]})}),h.status==="failed"&&e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>T(h.content),disabled:m.has(h.content.id),children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),"Retry"]}),h.status!=="published"&&e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>I(h.content),children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Reschedule"]})]})]}),e.jsx($t,{item:h.content,compact:!0,onSchedule:k}),h.error&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded flex items-start gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-red-700",children:[e.jsx("span",{className:"font-semibold",children:"Publishing Error: "}),h.error,h.retry_count&&h.retry_count>0&&e.jsxs("span",{className:"block mt-1 text-xs",children:["Retried ",h.retry_count," time(s)"]})]})]})]})]})},h.content.id))})]},d))}),e.jsx("div",{className:"mt-4 text-xs text-muted-foreground text-center",children:"Auto-refreshes every 30 seconds â€¢ Real-time status updates"})]})}const na=Fe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qe=l.forwardRef(({className:t,variant:s,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:D(na({variant:s}),t),...a}));qe.displayName="Alert";const ra=l.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:D("mb-1 font-medium leading-none tracking-tight",t),...s}));ra.displayName="AlertTitle";const Qe=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("text-sm [&_p]:leading-relaxed",t),...s}));Qe.displayName="AlertDescription";const Xe=l.forwardRef(({className:t,value:s,...a},r)=>e.jsx(Dt,{ref:r,className:D("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:e.jsx(bs,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Xe.displayName=Dt.displayName;const ia=[{id:"restaurant",name:"Restaurant / Food Service",emoji:"ðŸ½ï¸"},{id:"cpa",name:"CPA / Accounting",emoji:"ðŸ“Š"},{id:"realtor",name:"Real Estate",emoji:"ðŸ "},{id:"dentist",name:"Dental / Healthcare",emoji:"ðŸ¦·"},{id:"consultant",name:"Consulting / Professional Services",emoji:"ðŸ’¼"},{id:"attorney",name:"Legal Services / Attorney",emoji:"âš–ï¸"},{id:"contractor",name:"Contractor / Construction",emoji:"ðŸ”¨"},{id:"salon",name:"Beauty Salon / Spa",emoji:"ðŸ’‡"},{id:"fitness",name:"Gym / Fitness Center",emoji:"ðŸ’ª"},{id:"retail",name:"Retail Store",emoji:"ðŸ›ï¸"},{id:"plumber",name:"Plumbing Services",emoji:"ðŸš°"},{id:"electrician",name:"Electrical Services",emoji:"âš¡"},{id:"hvac",name:"HVAC Services",emoji:"â„ï¸"},{id:"auto",name:"Auto Repair / Mechanic",emoji:"ðŸ”§"},{id:"cleaning",name:"Cleaning Services",emoji:"ðŸ§¹"}];function Mt({brandId:t,value:s,onChange:a,autoSave:r=!1}){const[n,o]=l.useState(s||""),[x,i]=l.useState(!1);l.useEffect(()=>{s&&o(s)},[s]);const m=async u=>{if(o(u),a(u),r&&t){i(!0);try{const{error:p}=await J.from("brands").update({industry:u}).eq("id",t);p&&console.error("Failed to save industry:",p)}catch(p){console.error("Error saving industry:",p)}finally{i(!1)}}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Industry"}),e.jsxs(ke,{value:n,onValueChange:m,disabled:x,children:[e.jsx(je,{className:"w-full",children:e.jsx(Ce,{placeholder:"Select your industry"})}),e.jsx(ve,{children:ia.map(u=>e.jsx(U,{value:u.id,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:u.emoji}),e.jsx("span",{children:u.name})]})},u.id))})]}),x&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Saving..."})]})}function la({brandId:t,brandDomain:s,onGenerateContent:a}){const[r,n]=l.useState(""),[o,x]=l.useState(""),[i,m]=l.useState(s||""),[u,p]=l.useState("input"),[C,S]=l.useState(0),[k,T]=l.useState(""),[I,L]=l.useState(null),[$,M]=l.useState([]),[y,d]=l.useState(null),[c,h]=l.useState([]),[j,R]=l.useState([]),G=async()=>{if(!r||!i){L("Please enter your domain and select an industry");return}try{L(null),S(0),p("discovering"),T("Discovering competitors..."),S(10);const b=await fe.discoverCompetitors({industry:r,location:o||void 0,ourDomain:i,limit:5});if(M(b),S(25),b.length===0){L("No competitors found. Try a different industry or location."),p("input");return}p("profiling"),T(`Profiling ${b.length+1} companies...`),S(30);const W=[{domain:i,name:"Your Business",url:`https://${i}`,source:"manual"},...b],Y=[];for(let O=0;O<W.length;O++){const ce=W[O];T(`Profiling ${ce.name}... (${O+1}/${W.length})`);try{const se=await fe.profileCompetitor(ce);Y.push(se)}catch(se){console.warn(`Failed to profile ${ce.name}:`,se)}S(30+(O+1)/W.length*40)}const[q,...v]=Y;d(q),h(v),p("analyzing"),T("Analyzing competitive gaps..."),S(75);const[_,g,F]=await Promise.all([fe.findContentGaps({ourDomain:i,competitors:b.map(O=>O.domain),limit:20}),fe.findMessagingGaps({ourProfile:q,competitorProfiles:v}),fe.findPerformanceGaps({ourProfile:q,competitorProfiles:v})]);S(90),T("Scoring opportunities...");const z=await fe.scoreOpportunities({contentGaps:_,messagingGaps:g,performanceGaps:F});R(z),S(100),p("results")}catch(b){console.error("Competitive analysis failed:",b),L(b instanceof Error?b.message:"Analysis failed"),p("input")}},V=b=>{const W=b.difficulty==="easy"?"text-green-600":b.difficulty==="medium"?"text-yellow-600":"text-red-600",Y=b.type==="content"?js:b.type==="messaging"?we:_t;return e.jsxs(P,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ue,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Je.createElement(Y,{className:"h-5 w-5 text-primary"}),e.jsx(H,{variant:"outline",children:b.type}),e.jsx(H,{className:W,children:b.difficulty})]}),e.jsx(He,{className:"text-lg",children:b.title}),e.jsx(We,{className:"mt-2",children:b.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:b.roiScore}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ROI Score"})]})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-3",children:[b.estimatedImpact.traffic&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Est. Traffic:"}),e.jsxs("span",{className:"font-medium",children:[b.estimatedImpact.traffic.toLocaleString(),"/mo"]})]}),e.jsx(qe,{children:e.jsxs(Qe,{className:"text-sm",children:[e.jsx("strong",{children:"Action:"})," ",b.actionable]})}),a&&b.type==="content"&&e.jsxs(N,{onClick:()=>a(b),className:"w-full",variant:"outline",children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Generate Content for This Opportunity"]})]})})]},`${b.type}-${b.title}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Competitive Intelligence"}),e.jsx("p",{className:"text-muted-foreground",children:"Analyze competitors, find gaps, and discover content opportunities"})]}),u==="input"&&e.jsxs(P,{children:[e.jsxs(Ue,{children:[e.jsx(He,{children:"Analyze Your Competition"}),e.jsx(We,{children:"Powered by 16+ intelligence sources: Serper, SEMrush, Apify, Claude AI, and more"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Your Domain"}),e.jsx(te,{type:"text",placeholder:"example.com",value:i,onChange:b=>m(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Industry"}),e.jsx(Mt,{brandId:t,value:r,onChange:n})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location (Optional)"}),e.jsx(te,{type:"text",placeholder:"New York, NY",value:o,onChange:b=>x(b.target.value)})]}),I&&e.jsx(qe,{variant:"destructive",children:e.jsx(Qe,{children:I})}),e.jsxs(N,{onClick:G,disabled:!r||!i,className:"w-full",size:"lg",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Run Competitive Analysis"]})]})]}),(u==="discovering"||u==="profiling"||u==="analyzing")&&e.jsx(P,{children:e.jsx(ae,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(_e,{className:"h-12 w-12 animate-spin text-primary"}),e.jsxs("div",{className:"text-center w-full max-w-md",children:[e.jsx("p",{className:"text-lg font-medium mb-2",children:k}),e.jsx(Xe,{value:C,className:"w-full"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[Math.round(C),"% complete"]})]})]})})}),u==="results"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(P,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:$.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Competitors Found"})]})})}),e.jsx(P,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:j.filter(b=>b.type==="content").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Content Gaps"})]})})}),e.jsx(P,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:j.filter(b=>b.type==="messaging").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Messaging Gaps"})]})})}),e.jsx(P,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:j.filter(b=>b.roiScore>=70).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"High-ROI Opportunities"})]})})})]}),e.jsxs(Ae,{defaultValue:"all",className:"w-full",children:[e.jsxs($e,{className:"grid w-full grid-cols-4",children:[e.jsxs(K,{value:"all",children:["All (",j.length,")"]}),e.jsxs(K,{value:"content",children:["Content (",j.filter(b=>b.type==="content").length,")"]}),e.jsxs(K,{value:"messaging",children:["Messaging (",j.filter(b=>b.type==="messaging").length,")"]}),e.jsxs(K,{value:"performance",children:["Performance (",j.filter(b=>b.type==="performance").length,")"]})]}),e.jsx(ee,{value:"all",className:"space-y-4 mt-6",children:j.slice(0,20).map(V)}),e.jsx(ee,{value:"content",className:"space-y-4 mt-6",children:j.filter(b=>b.type==="content").slice(0,20).map(V)}),e.jsx(ee,{value:"messaging",className:"space-y-4 mt-6",children:j.filter(b=>b.type==="messaging").slice(0,20).map(V)}),e.jsx(ee,{value:"performance",className:"space-y-4 mt-6",children:j.filter(b=>b.type==="performance").slice(0,20).map(V)})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(N,{onClick:()=>{p("input"),R([]),M([]),S(0)},variant:"outline",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Run New Analysis"]})})]})]})}function oa({isOpen:t,current:s,total:a,currentStep:r,isComplete:n=!1}){const o=a>0?Math.round(s/a*100):0;return e.jsx(he,{open:t,onOpenChange:()=>{},children:e.jsxs(ie,{className:"sm:max-w-md",onPointerDownOutside:x=>x.preventDefault(),children:[e.jsxs(le,{children:[e.jsx(oe,{className:"flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-5 w-5 text-green-500"}),"Generation Complete!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-5 w-5 text-blue-500"}),"Creating Your Content"]})}),e.jsx(ge,{children:n?`Successfully generated ${a} professional posts!`:"Your brand-specific content is being generated..."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{value:o,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[s," of ",a," posts"]}),e.jsxs("span",{children:[o,"%"]})]})]}),!n&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 animate-spin text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:r})]}),n&&e.jsxs("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-4 text-sm text-green-700 dark:text-green-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Your content is ready!"}),e.jsx("p",{className:"text-xs",children:"All posts have been enhanced with AI and scored for quality. Review and schedule them now."})]}),!n&&e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-4 text-sm text-blue-700 dark:text-blue-300",children:e.jsx("p",{className:"text-xs",children:"Each post is being personalized with your brand voice and optimized for engagement. This typically takes 45-60 seconds."})})]})]})})}function ca(){const[t,s]=Je.useState({isOpen:!1,current:0,total:30,currentStep:"",isComplete:!1}),a=(x=30)=>{s({isOpen:!0,current:0,total:x,currentStep:"Loading your brand data...",isComplete:!1})},r=(x,i)=>{s(m=>({...m,current:x,currentStep:i}))},n=()=>{s(x=>({...x,current:x.total,currentStep:"",isComplete:!0})),setTimeout(()=>{o()},2e3)},o=()=>{s({isOpen:!1,current:0,total:30,currentStep:"",isComplete:!1})};return{progress:t,startProgress:a,updateProgress:r,completeProgress:n,closeProgress:o}}function pa({brandId:t,userId:s,pillars:a=[]}){const[r,n]=l.useState("calendar"),[o,x]=l.useState(!1),[i,m]=l.useState(!1),[u,p]=l.useState(null),[C,S]=l.useState(0),[k,T]=l.useState(!1),[I,L]=l.useState(""),[$,M]=l.useState(""),[y,d]=l.useState("month"),{progress:c,startProgress:h,updateProgress:j,completeProgress:R,closeProgress:G}=ca(),[V,b]=l.useState("all"),[W,Y]=l.useState(""),[q,v]=l.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]}),[_,g]=l.useState({total:0,scheduled:0,published:0,pending:0}),F=async()=>{try{const f=await X.getContentItems(t,new Date(Date.now()-2592e6).toISOString(),new Date(Date.now()+2592e6).toISOString());g({total:f.length,scheduled:f.filter(E=>E.status==="scheduled").length,published:f.filter(E=>E.status==="published").length,pending:f.filter(E=>E.status==="draft").length})}catch(f){console.error("Failed to load stats:",f)}};l.useEffect(()=>{(async()=>{try{const{data:E}=await J.from("brands").select("industry").eq("id",t).single();E!=null&&E.industry&&L(E.industry)}catch(E){console.error("Failed to load brand industry:",E)}})()},[t]),l.useEffect(()=>{F()},[C,t]);const z=f=>{p(f)},O=()=>{S(f=>f+1),F()},ce=()=>{const f=(()=>{switch(y){case"post":return 1;case"day":return 3;case"week":return 7;case"month":return 30;default:return 30}})();return console.log(`[Generation] Frequency: ${y}, Count: ${f}`),f},se=()=>{switch(y){case"post":return"Generate 1 Post";case"day":return"Generate Today (3 Posts)";case"week":return"Generate This Week (7 Posts)";case"month":return"Generate This Month (30 Posts)";default:return"Generate Content"}},w=async()=>{var pe,Ze;if(k)return;if(!$||!I){alert("Please enter your business URL and select an industry to generate breakthrough content");return}const f=ce();console.log(`[Synapse Generation] Starting with count: ${f}`);const E=Date.now();T(!0),h(f);try{const de=new URL($).hostname.replace("www.","").split(".")[0];j(0,"Gathering intelligence from multiple APIs...");const Me=await Os.buildDeepContext({brandId:t,brandData:{name:de,industry:I,location:{city:"New York",state:"NY"}}}),Gt=Me.context;console.log(`[Synapse] Collected ${Me.metadata.dataPointsCollected} data points from ${Me.metadata.dataSourcesUsed.length} sources`),j(Math.floor(f*.3),"Discovering breakthrough connections...");const Se=await Is({business:{name:de,industry:I,location:{city:"New York",state:"NY"}},intelligence:Gt});if(console.log(`[Synapse] Found ${Se.synapses.length} breakthrough insights`),Se.synapses.length===0){G(),alert("No breakthrough insights discovered. Try a different URL or industry.");return}j(Math.floor(f*.5),"Generating breakthrough content...");const Et=new As,me=[];for(let Z=0;Z<Math.min(Se.synapses.length,f);Z++){const Q=Se.synapses[Z],Ge=await Et.generate([Q],{name:de,industry:I,targetAudience:"business owners",brandVoice:"professional",contentGoals:["engagement"]},{maxContent:2,formats:["hook-post"],platform:"linkedin"});me.push(...Ge.content),j(Math.floor(f*.5)+Z,`Generated ${me.length} pieces...`)}console.log(`[Synapse] Generated ${me.length} content pieces`),j(Math.floor(f*.9),"Scheduling your content...");let Te=0;const et=new Date;for(let Z=0;Z<me.length;Z++){const Q=me[Z],Ge={linkedin:"linkedin",twitter:"twitter",facebook:"facebook",instagram:"instagram",tiktok:"tiktok"},Lt=((pe=Q.meta.platform)==null?void 0:pe[0])||"linkedin",Bt=Ge[Lt]||"linkedin",zt=[Q.content.headline,Q.content.hook,Q.content.body,Q.content.cta].filter(Boolean).join(`

`),tt=["Synapse Discovery",`Engagement: ${Math.round(Q.prediction.engagementScore*100)}%`,`Viral Potential: ${Math.round(Q.prediction.viralPotential*100)}%`];(Ze=Q.provenance)!=null&&Ze.psychologyTrigger&&tt.push(`Psychology: ${Q.provenance.psychologyTrigger}`);const Ee=new Date(et);Ee.setDate(et.getDate()+Z),Ee.setHours(10,0,0,0),await X.createContentItem({brand_id:t,user_id:s,platform:Bt,content_text:zt,generation_mode:"synapse",synapse_score:Q.prediction.engagementScore,intelligence_badges:tt,hashtags:Q.content.hashtags,status:"scheduled",scheduled_time:Ee.toISOString()}),Te++}console.log(`[Synapse] Saved ${Te} posts to calendar`),rt.trackContentGeneration({count:Te,industry:I,duration:Date.now()-E,avgScore:me.reduce((Z,Q)=>Z+Q.prediction.engagementScore,0)/me.length,successCount:Te}),R(),setTimeout(()=>{O()},2e3)}catch(de){console.error("Synapse generation failed:",de),rt.trackError({type:"synapse_generation_failed",message:de instanceof Error?de.message:"Unknown error",context:{brandId:t,industry:I}}),G(),alert("Generation failed. Please check your URL and try again.")}finally{T(!1)}},A=async()=>{if(confirm("Are you sure you want to delete ALL content? This cannot be undone."))try{const{error:f}=await J.from("content_calendar_items").delete().eq("brand_id",t);if(f)throw f;console.log("[ContentCalendarHub] Cleared all content for brand:",t),O()}catch(f){console.error("[ContentCalendarHub] Failed to clear content:",f),alert("Failed to clear content. Check console for details.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Calendar"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Plan, schedule, and publish content across all platforms"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Content"})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.scheduled}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.published}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})]})})]})]}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(B,{className:"text-xs text-muted-foreground mb-1",children:"Search Content"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Search by text, hashtags, or description...",value:W,onChange:f=>Y(f.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"w-full md:w-48",children:[e.jsx(B,{className:"text-xs text-muted-foreground mb-1",children:"Platform"}),e.jsxs(ke,{value:V,onValueChange:f=>b(f),children:[e.jsx(je,{children:e.jsx(Ce,{})}),e.jsxs(ve,{children:[e.jsx(U,{value:"all",children:"All Platforms"}),e.jsx(U,{value:"instagram",children:"Instagram"}),e.jsx(U,{value:"facebook",children:"Facebook"}),e.jsx(U,{value:"twitter",children:"Twitter"}),e.jsx(U,{value:"linkedin",children:"LinkedIn"}),e.jsx(U,{value:"tiktok",children:"TikTok"}),e.jsx(U,{value:"email",children:"Email"}),e.jsx(U,{value:"blog",children:"Blog"})]})]})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(B,{className:"text-xs text-muted-foreground mb-1",children:"Business URL"}),e.jsx(te,{type:"url",placeholder:"https://yourbusiness.com",value:$,onChange:f=>M(f.target.value)})]}),e.jsx("div",{className:"w-full md:w-56",children:e.jsx(Mt,{brandId:t,value:I,onChange:L,autoSave:!0})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-full md:w-40",children:[e.jsx(B,{className:"text-xs text-muted-foreground mb-1",children:"Start Date"}),e.jsx(te,{type:"date",value:q.start,onChange:f=>v({...q,start:f.target.value})})]}),e.jsxs("div",{className:"w-full md:w-40",children:[e.jsx(B,{className:"text-xs text-muted-foreground mb-1",children:"End Date"}),e.jsx(te,{type:"date",value:q.end,onChange:f=>v({...q,end:f.target.value})})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(B,{className:"text-xs text-muted-foreground",children:"Generate"}),e.jsxs(ke,{value:y,onValueChange:f=>{console.log(`[Frequency] Changed to: ${f}`),d(f)},children:[e.jsx(je,{className:"w-44",children:e.jsx(Ce,{placeholder:"Select frequency"})}),e.jsxs(ve,{children:[e.jsx(U,{value:"post",children:"One Post (1)"}),e.jsx(U,{value:"day",children:"One Day (3 posts)"}),e.jsx(U,{value:"week",children:"One Week (7 posts)"}),e.jsx(U,{value:"month",children:"One Month (30 posts)"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(B,{className:"text-xs text-muted-foreground opacity-0",children:"Action"}),e.jsx(N,{size:"lg",onClick:w,disabled:k,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:k?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),se()]})})]}),e.jsxs(N,{onClick:()=>x(!0),children:[e.jsx(nt,{className:"w-4 h-4 mr-2"}),"New Content"]}),e.jsxs(N,{variant:"outline",onClick:()=>m(!0),children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Bulk Generate"]}),e.jsxs(N,{variant:"destructive",onClick:A,children:[e.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),e.jsx(Ae,{value:r,onValueChange:f=>n(f),children:e.jsxs($e,{children:[e.jsxs(K,{value:"calendar",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Calendar"]}),e.jsxs(K,{value:"queue",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Queue"]}),e.jsxs(K,{value:"generator",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Generator"]}),e.jsxs(K,{value:"opportunities",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"Opportunities"]}),e.jsxs(K,{value:"insights",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Competitive Intel"]})]})})]}),e.jsxs(Ae,{value:r,onValueChange:f=>n(f),children:[e.jsx(ee,{value:"calendar",className:"mt-0",children:e.jsx(Us,{brandId:t,onEventClick:z,onEventDrop:O},`calendar-${C}`)}),e.jsx(ee,{value:"queue",className:"mt-0",children:e.jsx(aa,{brandId:t,days:7,enableApprovalWorkflow:!1,onRefresh:O},`queue-${C}`)}),e.jsx(ee,{value:"generator",className:"mt-0",children:e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(Ne,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Bulk Content Generator"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate multiple posts at once across platforms and date ranges"}),e.jsxs(N,{onClick:()=>m(!0),size:"lg",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Open Bulk Generator"]})]})}),e.jsx(ee,{value:"opportunities",className:"mt-0",children:e.jsx(Ws,{brandId:t,userId:s,onGenerateFromOpportunity:()=>{}})}),e.jsx(ee,{value:"insights",className:"mt-0",children:e.jsx(la,{brandId:t,brandDomain:$})})]}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsx(N,{size:"lg",className:"rounded-full shadow-lg h-14 w-14 p-0",onClick:()=>x(!0),children:e.jsx(nt,{className:"w-6 h-6"})})}),e.jsx(Ft,{open:o,onClose:()=>x(!1),brandId:t,userId:s,pillars:a,onContentCreated:O}),e.jsx(sa,{open:i,onClose:()=>m(!1),brandId:t,userId:s,pillars:a,onContentCreated:O}),e.jsx(oa,{isOpen:c.isOpen,current:c.current,total:c.total,currentStep:c.currentStep,isComplete:c.isComplete})]})}export{qe as A,N as B,Es as C,he as D,Gs as E,te as I,Ms as P,H as a,ie as b,le as c,oe as d,ge as e,It as f,D as g,pa as h,P as i,Ue as j,He as k,We as l,ae as m,ga as n,Qe as o};
//# sourceMappingURL=content-DNJ5jCle.js.map
