{"version":3,"file":"content-DNJ5jCle.js","sources":["../../src/lib/utils.ts","../../src/components/ui/button.tsx","../../src/components/ui/input.tsx","../../src/components/ui/badge.tsx","../../src/components/ui/dialog.tsx","../../src/components/synapse/ProvenanceViewer.tsx","../../src/components/synapse/EdginessSlider.tsx","../../src/components/synapse/CharacterCountBadge.tsx","../../src/components/ui/tabs.tsx","../../src/components/ui/card.tsx","../../src/components/ui/label.tsx","../../src/components/ui/select.tsx","../../src/services/content-calendar.service.ts","../../src/components/content-calendar/CalendarView.tsx","../../src/services/opportunity-detector.service.ts","../../src/components/ui/textarea.tsx","../../src/components/content-calendar/ContentGenerator.tsx","../../src/components/content-calendar/OpportunityFeed.tsx","../../src/components/ui/checkbox.tsx","../../src/components/content-calendar/VariantModal.tsx","../../src/components/content-calendar/RegenerationModal.tsx","../../src/components/content-calendar/ProvenanceModal.tsx","../../src/components/content-calendar/QualityRating.tsx","../../src/components/content-calendar/ContentItem.tsx","../../src/components/content-calendar/BulkContentGenerator.tsx","../../src/components/content-calendar/PublishingQueue.tsx","../../src/components/ui/alert.tsx","../../src/components/ui/progress.tsx","../../src/components/content-calendar/IndustrySelector.tsx","../../src/components/content-calendar/CompetitiveInsights.tsx","../../src/components/content-calendar/GenerationProgress.tsx","../../src/components/content-calendar/ContentCalendarHub.tsx"],"sourcesContent":["// Utility functions for MARBA application\n\nimport { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * Merge Tailwind CSS classes with proper precedence\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Format a date to a readable string\n */\nexport function formatDate(date: string | Date, format: 'short' | 'long' | 'relative' = 'short'): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n\n  if (format === 'relative') {\n    return formatRelativeTime(d);\n  }\n\n  const options: Intl.DateTimeFormatOptions = format === 'long'\n    ? { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }\n    : { year: 'numeric', month: 'short', day: 'numeric' };\n\n  return d.toLocaleDateString('en-US', options);\n}\n\n/**\n * Format a date to relative time (e.g., \"2 hours ago\")\n */\nexport function formatRelativeTime(date: string | Date): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  const now = new Date();\n  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000);\n\n  if (diffInSeconds < 60) return 'just now';\n  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;\n  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\n  if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;\n  if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 604800)} weeks ago`;\n\n  return formatDate(d, 'short');\n}\n\n/**\n * Format a number with commas\n */\nexport function formatNumber(num: number, decimals: number = 0): string {\n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(num);\n}\n\n/**\n * Format a number as a percentage\n */\nexport function formatPercentage(num: number, decimals: number = 1): string {\n  return `${formatNumber(num, decimals)}%`;\n}\n\n/**\n * Format a number as currency\n */\nexport function formatCurrency(num: number, currency: string = 'USD'): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n  }).format(num);\n}\n\n/**\n * Shorten large numbers (e.g., 1,234,567 -> 1.2M)\n */\nexport function formatCompactNumber(num: number): string {\n  return new Intl.NumberFormat('en-US', {\n    notation: 'compact',\n    maximumFractionDigits: 1,\n  }).format(num);\n}\n\n/**\n * Calculate percentage change between two numbers\n */\nexport function calculatePercentageChange(current: number, previous: number): number {\n  if (previous === 0) return current > 0 ? 100 : 0;\n  return ((current - previous) / previous) * 100;\n}\n\n/**\n * Truncate text with ellipsis\n */\nexport function truncateText(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return text.slice(0, maxLength).trim() + '...';\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(prefix: string = ''): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 9);\n  return prefix ? `${prefix}_${timestamp}_${random}` : `${timestamp}_${random}`;\n}\n\n/**\n * Debounce function\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      timeout = null;\n      func(...args);\n    };\n\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Throttle function\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean;\n\n  return function executedFunction(...args: Parameters<T>) {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Check if a value is empty (null, undefined, empty string, empty array, empty object)\n */\nexport function isEmpty(value: any): boolean {\n  if (value == null) return true;\n  if (typeof value === 'string') return value.trim().length === 0;\n  if (Array.isArray(value)) return value.length === 0;\n  if (typeof value === 'object') return Object.keys(value).length === 0;\n  return false;\n}\n\n/**\n * Sleep for a specified duration\n */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Group array items by a key\n */\nexport function groupBy<T>(array: T[], key: keyof T): Record<string, T[]> {\n  return array.reduce((result, item) => {\n    const groupKey = String(item[key]);\n    if (!result[groupKey]) {\n      result[groupKey] = [];\n    }\n    result[groupKey].push(item);\n    return result;\n  }, {} as Record<string, T[]>);\n}\n\n/**\n * Sort array by a key\n */\nexport function sortBy<T>(array: T[], key: keyof T, direction: 'asc' | 'desc' = 'asc'): T[] {\n  return [...array].sort((a, b) => {\n    const aVal = a[key];\n    const bVal = b[key];\n\n    if (aVal < bVal) return direction === 'asc' ? -1 : 1;\n    if (aVal > bVal) return direction === 'asc' ? 1 : -1;\n    return 0;\n  });\n}\n\n/**\n * Get a random item from an array\n */\nexport function randomItem<T>(array: T[]): T {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\n/**\n * Shuffle an array\n */\nexport function shuffle<T>(array: T[]): T[] {\n  const newArray = [...array];\n  for (let i = newArray.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n  }\n  return newArray;\n}\n\n/**\n * Convert a string to title case\n */\nexport function toTitleCase(str: string): string {\n  return str.replace(\n    /\\w\\S*/g,\n    (txt) => txt.charAt(0).toUpperCase() + txt.substring(1).toLowerCase()\n  );\n}\n\n/**\n * Convert a string to kebab-case\n */\nexport function toKebabCase(str: string): string {\n  return str\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\n    .replace(/[\\s_]+/g, '-')\n    .toLowerCase();\n}\n\n/**\n * Convert a string to camelCase\n */\nexport function toCamelCase(str: string): string {\n  return str\n    .replace(/[-_\\s]+(.)?/g, (_, char) => (char ? char.toUpperCase() : ''))\n    .replace(/^[A-Z]/, (char) => char.toLowerCase());\n}\n\n/**\n * Calculate reading time for text content\n */\nexport function calculateReadingTime(text: string, wordsPerMinute: number = 200): number {\n  const words = text.trim().split(/\\s+/).length;\n  return Math.ceil(words / wordsPerMinute);\n}\n\n/**\n * Extract hashtags from text\n */\nexport function extractHashtags(text: string): string[] {\n  const regex = /#(\\w+)/g;\n  const matches = text.match(regex);\n  return matches ? matches.map(tag => tag.substring(1)) : [];\n}\n\n/**\n * Extract mentions from text\n */\nexport function extractMentions(text: string): string[] {\n  const regex = /@(\\w+)/g;\n  const matches = text.match(regex);\n  return matches ? matches.map(mention => mention.substring(1)) : [];\n}\n\n/**\n * Validate email address\n */\nexport function isValidEmail(email: string): boolean {\n  const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return regex.test(email);\n}\n\n/**\n * Validate URL\n */\nexport function isValidUrl(url: string): boolean {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Get initials from a name\n */\nexport function getInitials(name: string): string {\n  return name\n    .split(' ')\n    .map(part => part[0])\n    .join('')\n    .toUpperCase()\n    .substring(0, 2);\n}\n\n/**\n * Color helpers for score visualization\n */\nexport function getScoreColor(score: number, max: number = 100): string {\n  const percentage = (score / max) * 100;\n  if (percentage >= 80) return 'text-green-600';\n  if (percentage >= 60) return 'text-blue-600';\n  if (percentage >= 40) return 'text-yellow-600';\n  if (percentage >= 20) return 'text-orange-600';\n  return 'text-red-600';\n}\n\nexport function getScoreBgColor(score: number, max: number = 100): string {\n  const percentage = (score / max) * 100;\n  if (percentage >= 80) return 'bg-green-100 dark:bg-green-900/20';\n  if (percentage >= 60) return 'bg-blue-100 dark:bg-blue-900/20';\n  if (percentage >= 40) return 'bg-yellow-100 dark:bg-yellow-900/20';\n  if (percentage >= 20) return 'bg-orange-100 dark:bg-orange-900/20';\n  return 'bg-red-100 dark:bg-red-900/20';\n}\n\n/**\n * Trend direction helpers\n */\nexport function getTrendIcon(trend: 'up' | 'down' | 'stable'): string {\n  switch (trend) {\n    case 'up': return '‚Üó';\n    case 'down': return '‚Üò';\n    case 'stable': return '‚Üí';\n  }\n}\n\nexport function getTrendColor(trend: 'up' | 'down' | 'stable', isPositive: boolean = true): string {\n  if (trend === 'stable') return 'text-gray-600';\n  const upColor = isPositive ? 'text-green-600' : 'text-red-600';\n  const downColor = isPositive ? 'text-red-600' : 'text-green-600';\n  return trend === 'up' ? upColor : downColor;\n}\n","import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n","import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = 'Input'\n\nexport { Input }\n","import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground hover:bg-primary/80',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        destructive:\n          'border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80',\n        outline: 'text-foreground',\n        success:\n          'border-transparent bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300',\n        warning:\n          'border-transparent bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { X } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col space-y-1.5 text-center sm:text-left',\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","/**\n * Provenance Viewer\n *\n * Shows users the complete process of how content was built:\n * - Psychology triggers used\n * - Data sources matched\n * - Framework stages and their source fields\n * - Content assembly breakdown\n * - Key decisions made during generation\n *\n * Created: 2025-11-11\n */\n\nimport { ChevronDown, ChevronRight } from 'lucide-react';\nimport { useState } from 'react';\nimport type { ContentProvenance } from '@/types/synapseContent.types';\n\ninterface ProvenanceViewerProps {\n  provenance: ContentProvenance;\n}\n\nexport function ProvenanceViewer({ provenance }: ProvenanceViewerProps) {\n  const [expanded, setExpanded] = useState(true);  // Start expanded by default\n  const [expandedSources, setExpandedSources] = useState<Record<string, boolean>>({});\n\n  const toggleSource = (source: string) => {\n    setExpandedSources(prev => ({\n      ...prev,\n      [source]: !prev[source]\n    }));\n  };\n\n  return (\n    <div className=\"border-t border-gray-200 dark:border-slate-700 pt-4 mt-4\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"flex items-center gap-2 text-sm font-bold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors\"\n      >\n        {expanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronRight className=\"w-4 h-4\" />}\n        üîç How This Was Built\n      </button>\n\n      {expanded && (\n        <div className=\"mt-4 space-y-6 text-sm bg-gradient-to-br from-blue-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl border-2 border-blue-200 dark:border-blue-800\">\n          {/* DEEP PROVENANCE SECTION */}\n          <div className=\"pb-4 border-b-2 border-blue-300 dark:border-blue-700\">\n            <h3 className=\"text-lg font-bold text-blue-900 dark:text-blue-200 flex items-center gap-2\">\n              üî¨ Deep Provenance: How The Magic Happened\n            </h3>\n            <p className=\"text-xs text-blue-700 dark:text-blue-300 mt-1\">Trace the complete journey from raw data to final content</p>\n          </div>\n\n          {/* Raw Data Sources */}\n          {provenance.rawDataSources && provenance.rawDataSources.length > 0 && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-green-500\">\n              <div className=\"font-bold text-green-700 dark:text-green-300 mb-2 flex items-center gap-2\">\n                üìä Raw Data Sources\n              </div>\n              <div className=\"space-y-3\">\n                {provenance.rawDataSources.map((source, idx) => (\n                  <div key={idx} className=\"pl-3 border-l-2 border-green-200 dark:border-green-800\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"px-2 py-0.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 rounded text-xs font-medium\">\n                        {source.platform}\n                      </span>\n                      <span className=\"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded text-xs\">\n                        {source.type}\n                      </span>\n                      {source.sentiment && (\n                        <span className={`px-2 py-0.5 rounded text-xs font-medium ${\n                          source.sentiment === 'positive' ? 'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200' :\n                          source.sentiment === 'negative' ? 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200' :\n                          'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-300'\n                        }`}>\n                          {source.sentiment}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-gray-700 dark:text-gray-300 italic text-xs bg-gray-50 dark:bg-gray-800 p-2 rounded\">\n                      \"{source.content}\"\n                    </div>\n                    {source.author && (\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Author: {source.author}</div>\n                    )}\n                    {source.relevanceScore !== undefined && (\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        Relevance: {Math.round(source.relevanceScore * 100)}%\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Psychology Selection Process */}\n          {provenance.psychologySelection && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-purple-500\">\n              <div className=\"font-bold text-purple-700 dark:text-purple-300 mb-2 flex items-center gap-2\">\n                üß† Psychology Selection Process\n              </div>\n              <div className=\"space-y-3\">\n                <div>\n                  <div className=\"text-xs font-semibold text-purple-600 dark:text-purple-400\">Selected Principle:</div>\n                  <div className=\"text-gray-700 dark:text-gray-300 font-medium\">{provenance.psychologySelection.selectedPrinciple}</div>\n                </div>\n                <div>\n                  <div className=\"text-xs font-semibold text-purple-600 dark:text-purple-400\">Why This Psychology?</div>\n                  <div className=\"text-gray-600 dark:text-gray-400 text-xs italic\">{provenance.psychologySelection.selectionReasoning}</div>\n                </div>\n                {provenance.psychologySelection.candidatePrinciples && provenance.psychologySelection.candidatePrinciples.length > 0 && (\n                  <div>\n                    <div className=\"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-2\">Other Candidates Considered:</div>\n                    <div className=\"space-y-2\">\n                      {provenance.psychologySelection.candidatePrinciples.map((candidate, idx) => (\n                        <div key={idx} className=\"text-xs pl-3 border-l border-purple-200 dark:border-purple-800\">\n                          <div className=\"font-medium text-gray-700 dark:text-gray-300\">{candidate.principle}</div>\n                          <div className=\"text-gray-500 dark:text-gray-400\">Confidence: {Math.round(candidate.confidenceScore * 100)}%</div>\n                          <div className=\"text-gray-600 dark:text-gray-400 italic\">{candidate.reasoning}</div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Topic Correlation */}\n          {provenance.topicCorrelation && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-orange-500\">\n              <div className=\"font-bold text-orange-700 dark:text-orange-300 mb-2 flex items-center gap-2\">\n                üîó Topic Correlation & Embeddings\n              </div>\n              <div className=\"space-y-2\">\n                <div>\n                  <div className=\"text-xs font-semibold text-orange-600 dark:text-orange-400\">Primary Topic:</div>\n                  <div className=\"text-gray-700 dark:text-gray-300 font-medium\">{provenance.topicCorrelation.primaryTopic}</div>\n                </div>\n                {provenance.topicCorrelation.relatedTopics && provenance.topicCorrelation.relatedTopics.length > 0 && (\n                  <div>\n                    <div className=\"text-xs font-semibold text-orange-600 dark:text-orange-400 mb-1\">Related Topics (via embeddings):</div>\n                    <div className=\"space-y-1\">\n                      {provenance.topicCorrelation.relatedTopics.map((topic, idx) => (\n                        <div key={idx} className=\"flex items-center justify-between text-xs bg-orange-50 dark:bg-orange-900/20 p-2 rounded\">\n                          <span className=\"text-gray-700 dark:text-gray-300\">{topic.topic}</span>\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-orange-600 dark:text-orange-400 font-mono\">{(topic.similarityScore * 100).toFixed(1)}%</span>\n                            <span className=\"px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-300 rounded text-xs\">\n                              {topic.source}\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {provenance.topicCorrelation.embeddingModel && (\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    Model: {provenance.topicCorrelation.embeddingModel}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Platform Breakdown */}\n          {provenance.platformBreakdown && provenance.platformBreakdown.length > 0 && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-cyan-500\">\n              <div className=\"font-bold text-cyan-700 dark:text-cyan-300 mb-2 flex items-center gap-2\">\n                üì± Platform Breakdown\n              </div>\n              <div className=\"space-y-3\">\n                {provenance.platformBreakdown.map((platform, idx) => (\n                  <div key={idx} className=\"bg-cyan-50 dark:bg-cyan-900/20 p-3 rounded\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"font-medium text-cyan-700 dark:text-cyan-300\">{platform.platform}</span>\n                      <span className=\"px-2 py-0.5 bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-200 rounded text-xs font-bold\">\n                        {platform.dataPoints} data points\n                      </span>\n                    </div>\n                    <div className=\"text-xs space-y-1\">\n                      <div className=\"font-semibold text-cyan-600 dark:text-cyan-400\">Key Insights:</div>\n                      <ul className=\"list-disc list-inside text-gray-600 dark:text-gray-400 space-y-0.5\">\n                        {platform.keyInsights.map((insight, i) => (\n                          <li key={i}>{insight}</li>\n                        ))}\n                      </ul>\n                      <div className=\"mt-2 pt-2 border-t border-cyan-200 dark:border-cyan-800\">\n                        <div className=\"font-semibold text-cyan-600 dark:text-cyan-400\">Contribution:</div>\n                        <div className=\"text-gray-600 dark:text-gray-400 italic\">{platform.contributionToFinalContent}</div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Detailed Data Sources - Every Data Point */}\n          {provenance.detailedDataSources && provenance.detailedDataSources.length > 0 && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-indigo-500\">\n              <div className=\"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2\">\n                üîç Complete Data Source Breakdown\n              </div>\n              <p className=\"text-xs text-indigo-600 dark:text-indigo-400 mb-3\">\n                Every single data point used from each source (click to expand)\n              </p>\n              <div className=\"space-y-2\">\n                {provenance.detailedDataSources.map((sourceGroup, idx) => (\n                  <div key={idx} className=\"border border-indigo-200 dark:border-indigo-800 rounded-lg overflow-hidden\">\n                    <button\n                      onClick={() => toggleSource(sourceGroup.source)}\n                      className=\"w-full flex items-center justify-between p-3 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        {expandedSources[sourceGroup.source] ? (\n                          <ChevronDown className=\"w-4 h-4 text-indigo-600 dark:text-indigo-400\" />\n                        ) : (\n                          <ChevronRight className=\"w-4 h-4 text-indigo-600 dark:text-indigo-400\" />\n                        )}\n                        <span className=\"font-semibold text-indigo-700 dark:text-indigo-300 capitalize\">\n                          {sourceGroup.source}\n                        </span>\n                      </div>\n                      <span className=\"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 rounded text-xs font-bold\">\n                        {sourceGroup.dataPoints.length} data points\n                      </span>\n                    </button>\n\n                    {expandedSources[sourceGroup.source] && (\n                      <div className=\"p-3 space-y-2 bg-white dark:bg-slate-900\">\n                        {sourceGroup.dataPoints.map((dataPoint, dpIdx) => (\n                          <div key={dpIdx} className=\"pl-4 border-l-2 border-indigo-300 dark:border-indigo-700 bg-indigo-50/50 dark:bg-indigo-900/10 p-2 rounded\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 rounded text-xs font-medium\">\n                                {dataPoint.type.replace(/_/g, ' ')}\n                              </span>\n                              {dataPoint.confidence !== undefined && (\n                                <span className=\"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded text-xs\">\n                                  {Math.round(dataPoint.confidence * 100)}% confidence\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"text-gray-700 dark:text-gray-300 text-sm italic\">\n                              \"{dataPoint.content}\"\n                            </div>\n                            {dataPoint.metadata && Object.keys(dataPoint.metadata).length > 0 && (\n                              <details className=\"mt-2\">\n                                <summary className=\"text-xs text-indigo-600 dark:text-indigo-400 cursor-pointer hover:text-indigo-800 dark:hover:text-indigo-200\">\n                                  View metadata\n                                </summary>\n                                <pre className=\"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded mt-1 overflow-x-auto\">\n                                  {JSON.stringify(dataPoint.metadata, null, 2)}\n                                </pre>\n                              </details>\n                            )}\n                            {dataPoint.timestamp && (\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                {new Date(dataPoint.timestamp).toLocaleString()}\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Decision Pipeline */}\n          {provenance.decisionPipeline && provenance.decisionPipeline.length > 0 && (\n            <div className=\"bg-white dark:bg-slate-900 p-4 rounded-lg border-l-4 border-pink-500\">\n              <div className=\"font-bold text-pink-700 dark:text-pink-300 mb-2 flex items-center gap-2\">\n                üéØ Decision Pipeline: The Complete Journey\n              </div>\n              <div className=\"space-y-3\">\n                {provenance.decisionPipeline.map((step, idx) => (\n                  <div key={idx} className=\"relative pl-8\">\n                    <div className=\"absolute left-0 top-0 w-6 h-6 bg-pink-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">\n                      {step.step}\n                    </div>\n                    <div className=\"bg-pink-50 dark:bg-pink-900/20 p-3 rounded\">\n                      <div className=\"font-semibold text-pink-700 dark:text-pink-300 mb-1\">{step.action}</div>\n                      <div className=\"text-xs space-y-1\">\n                        <div>\n                          <span className=\"font-medium text-pink-600 dark:text-pink-400\">Input:</span>\n                          <span className=\"text-gray-600 dark:text-gray-400 ml-2\">{step.input}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-pink-600 dark:text-pink-400\">Output:</span>\n                          <span className=\"text-gray-700 dark:text-gray-300 ml-2 font-medium\">{step.output}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-pink-600 dark:text-pink-400\">Reasoning:</span>\n                          <span className=\"text-gray-600 dark:text-gray-400 ml-2 italic\">{step.reasoning}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* STANDARD PROVENANCE SECTION */}\n          <div className=\"pt-4 border-t-2 border-blue-300 dark:border-blue-700\">\n            <h4 className=\"text-sm font-bold text-blue-800 dark:text-blue-300 mb-3\">Standard Provenance Tracking</h4>\n          </div>\n\n          {/* Psychology Trigger */}\n          {provenance.psychologyTrigger && (\n            <div>\n              <div className=\"font-medium text-gray-700 dark:text-slate-300\">Psychology Trigger</div>\n              <div className=\"text-gray-600 dark:text-slate-400 mt-1\">{provenance.psychologyTrigger}</div>\n            </div>\n          )}\n\n          {/* Data Sources */}\n          {provenance.dataSourcesUsed && provenance.dataSourcesUsed.length > 0 && (\n            <div>\n              <div className=\"font-medium text-gray-700 dark:text-slate-300\">Data Sources Used</div>\n              <div className=\"flex flex-wrap gap-2 mt-1\">\n                {provenance.dataSourcesUsed.map((source, idx) => (\n                  <span key={idx} className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 rounded text-xs\">\n                    {source}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Trending Topic */}\n          {provenance.trendingTopicMatched && (\n            <div>\n              <div className=\"font-medium text-gray-700\">Trending Topic Matched</div>\n              <div className=\"text-gray-600 mt-1\">{provenance.trendingTopicMatched}</div>\n            </div>\n          )}\n\n          {/* Framework Stages */}\n          {provenance.frameworkStagesUsed && provenance.frameworkStagesUsed.length > 0 && (\n            <div>\n              <div className=\"font-medium text-gray-700 dark:text-slate-300\">Framework Stages</div>\n              <div className=\"space-y-2 mt-2\">\n                {provenance.frameworkStagesUsed.map((stage, idx) => (\n                  <div key={idx} className=\"pl-4 border-l-2 border-blue-400 dark:border-blue-500\">\n                    <div className=\"font-medium text-sm text-gray-700 dark:text-slate-300\">{stage.stage}</div>\n                    <div className=\"text-xs text-gray-500 dark:text-slate-400\">\n                      Source: <code className=\"bg-gray-100 dark:bg-slate-700 px-1 rounded\">{stage.sourceField}</code>\n                    </div>\n                    {stage.content && (\n                      <div className=\"text-xs text-gray-600 dark:text-slate-400 mt-1 italic\">\"{stage.content}...\"</div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Content Assembly */}\n          {provenance.contentAssembly && (\n            <div>\n              <div className=\"font-medium text-gray-700 dark:text-slate-300\">Content Assembly</div>\n              <div className=\"space-y-2 mt-2\">\n                {provenance.contentAssembly.headline && (\n                  <div className=\"text-xs\">\n                    <strong className=\"text-gray-700 dark:text-slate-300\">Headline:</strong> <span className=\"text-gray-600 dark:text-slate-400\">{provenance.contentAssembly.headline.source}</span>\n                    <div className=\"text-gray-600 dark:text-slate-400 italic mt-0.5\">\"{provenance.contentAssembly.headline.preview}\"</div>\n                  </div>\n                )}\n                {provenance.contentAssembly.hook && (\n                  <div className=\"text-xs\">\n                    <strong className=\"text-gray-700 dark:text-slate-300\">Hook:</strong> <span className=\"text-gray-600 dark:text-slate-400\">{provenance.contentAssembly.hook.source}</span>\n                    <div className=\"text-gray-600 dark:text-slate-400 italic mt-0.5\">\"{provenance.contentAssembly.hook.preview}\"</div>\n                  </div>\n                )}\n                {provenance.contentAssembly.body && (\n                  <div className=\"text-xs\">\n                    <strong className=\"text-gray-700 dark:text-slate-300\">Body:</strong> <span className=\"text-gray-600 dark:text-slate-400\">{provenance.contentAssembly.body.source}</span>\n                    <div className=\"text-gray-600 dark:text-slate-400 italic mt-0.5\">\"{provenance.contentAssembly.body.preview}\"</div>\n                  </div>\n                )}\n                {provenance.contentAssembly.cta && (\n                  <div className=\"text-xs\">\n                    <strong className=\"text-gray-700 dark:text-slate-300\">CTA:</strong> <span className=\"text-gray-600 dark:text-slate-400\">{provenance.contentAssembly.cta.source}</span>\n                    <div className=\"text-gray-600 dark:text-slate-400 italic mt-0.5\">\"{provenance.contentAssembly.cta.preview}\"</div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Decisions */}\n          {provenance.decisions && (\n            <div>\n              <div className=\"font-medium text-gray-700 dark:text-slate-300\">Key Decisions</div>\n              <div className=\"space-y-1 mt-2 text-xs text-gray-600 dark:text-slate-400\">\n                {provenance.decisions.whyThisFormat && (\n                  <div>‚Ä¢ {provenance.decisions.whyThisFormat}</div>\n                )}\n                {provenance.decisions.whyThisTone && (\n                  <div>‚Ä¢ {provenance.decisions.whyThisTone}</div>\n                )}\n                {provenance.decisions.whyThisCTA && (\n                  <div>‚Ä¢ {provenance.decisions.whyThisCTA}</div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Debug: Show if no data */}\n          {!provenance.psychologyTrigger && !provenance.frameworkStagesUsed?.length && !provenance.contentAssembly && (\n            <div className=\"text-xs text-gray-500 dark:text-slate-500 italic\">\n              No provenance data available for this content.\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Edginess Slider Component\n *\n * Slider for controlling humor edginess level (0-100 scale).\n * Shows visual feedback with color coding and descriptive labels.\n *\n * Ranges:\n * - 0-25: Professional (blue)\n * - 26-50: Approachable (green)\n * - 51-75: Casual (yellow)\n * - 76-100: Edgy (red)\n *\n * Created: 2025-11-11\n */\n\nimport { useState } from 'react';\nimport type { EdginessLevel } from '@/types/synapseContent.types';\n\ninterface EdginessSliderProps {\n  value: EdginessLevel;\n  onChange: (value: EdginessLevel) => void;\n  className?: string;\n}\n\nexport function EdginessSlider({ value, onChange, className = '' }: EdginessSliderProps) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  // Get current range info\n  const getRangeInfo = (level: EdginessLevel) => {\n    if (level <= 25) {\n      return {\n        label: 'Professional',\n        description: 'Subtle, polished, corporate-safe',\n        color: 'from-blue-500 to-blue-600',\n        bgColor: 'bg-blue-100',\n        textColor: 'text-blue-700'\n      };\n    } else if (level <= 50) {\n      return {\n        label: 'Approachable',\n        description: 'Warm, relatable, friendly',\n        color: 'from-green-500 to-green-600',\n        bgColor: 'bg-green-100',\n        textColor: 'text-green-700'\n      };\n    } else if (level <= 75) {\n      return {\n        label: 'Casual',\n        description: 'Conversational, witty, personable',\n        color: 'from-yellow-500 to-yellow-600',\n        bgColor: 'bg-yellow-100',\n        textColor: 'text-yellow-700'\n      };\n    } else {\n      return {\n        label: 'Edgy',\n        description: 'Bold, playful, attention-grabbing',\n        color: 'from-red-500 to-red-600',\n        bgColor: 'bg-red-100',\n        textColor: 'text-red-700'\n      };\n    }\n  };\n\n  const rangeInfo = getRangeInfo(value);\n\n  return (\n    <div className={`space-y-3 ${className}`}>\n      {/* Label and Value */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <div className=\"text-sm font-semibold text-gray-700 dark:text-slate-300\">\n            Edginess Level\n          </div>\n          <div className=\"text-xs text-gray-500 dark:text-slate-400\">\n            Professional ‚Üê ‚Üí Edgy\n          </div>\n        </div>\n        <div className={`px-3 py-1 rounded-full text-sm font-bold ${rangeInfo.bgColor} ${rangeInfo.textColor}`}>\n          {value}\n        </div>\n      </div>\n\n      {/* Slider */}\n      <div className=\"relative\">\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"100\"\n          step=\"5\"\n          value={value}\n          onChange={(e) => onChange(Number(e.target.value))}\n          onMouseDown={() => setIsDragging(true)}\n          onMouseUp={() => setIsDragging(false)}\n          onTouchStart={() => setIsDragging(true)}\n          onTouchEnd={() => setIsDragging(false)}\n          className=\"w-full h-2 rounded-lg appearance-none cursor-pointer\n                     bg-gradient-to-r from-blue-300 via-green-300 via-yellow-300 to-red-300\n                     focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\"\n          style={{\n            background: `linear-gradient(to right,\n              rgb(147, 197, 253) 0%,\n              rgb(134, 239, 172) 25%,\n              rgb(253, 224, 71) 50%,\n              rgb(252, 165, 165) 75%,\n              rgb(248, 113, 113) 100%\n            )`\n          }}\n        />\n        {/* Slider thumb styled via CSS */}\n        <style>{`\n          input[type=\"range\"]::-webkit-slider-thumb {\n            appearance: none;\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: white;\n            border: 3px solid ${value <= 25 ? '#3b82f6' : value <= 50 ? '#22c55e' : value <= 75 ? '#eab308' : '#ef4444'};\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n            transition: transform 0.1s;\n          }\n          input[type=\"range\"]::-webkit-slider-thumb:hover {\n            transform: scale(1.1);\n          }\n          input[type=\"range\"]::-moz-range-thumb {\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: white;\n            border: 3px solid ${value <= 25 ? '#3b82f6' : value <= 50 ? '#22c55e' : value <= 75 ? '#eab308' : '#ef4444'};\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n          }\n        `}</style>\n      </div>\n\n      {/* Range markers */}\n      <div className=\"flex justify-between text-xs text-gray-400 dark:text-slate-500\">\n        <span>0</span>\n        <span>25</span>\n        <span>50</span>\n        <span>75</span>\n        <span>100</span>\n      </div>\n\n      {/* Current Range Info */}\n      <div className={`p-3 rounded-lg ${rangeInfo.bgColor} ${rangeInfo.textColor}`}>\n        <div className=\"font-bold text-sm mb-1\">{rangeInfo.label}</div>\n        <div className=\"text-xs opacity-80\">{rangeInfo.description}</div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Character Count Badge\n *\n * Displays character count with validation status for content sections\n *\n * Created: 2025-11-11\n */\n\nimport React from 'react';\nimport { CheckCircle, AlertCircle, XCircle } from 'lucide-react';\nimport type { CharacterValidation } from '@/types/synapseContent.types';\n\ninterface CharacterCountBadgeProps {\n  validation: CharacterValidation;\n  compact?: boolean;\n}\n\nexport function CharacterCountBadge({ validation, compact = false }: CharacterCountBadgeProps) {\n  const statusColors = {\n    valid: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-300 dark:border-green-700',\n    warning: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700',\n    error: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700'\n  };\n\n  const StatusIcon = {\n    valid: CheckCircle,\n    warning: AlertCircle,\n    error: XCircle\n  }[validation.status];\n\n  if (compact) {\n    return (\n      <div\n        className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${\n          statusColors[validation.status]\n        }`}\n        title={validation.message}\n      >\n        <StatusIcon className=\"w-3 h-3\" />\n        {validation.characterCount}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border ${\n        statusColors[validation.status]\n      }`}\n    >\n      <StatusIcon className=\"w-4 h-4\" />\n      <div className=\"flex items-baseline gap-2\">\n        <span className=\"font-bold\">{validation.characterCount}</span>\n        <span className=\"text-xs opacity-75\">/ {validation.optimal}</span>\n      </div>\n      <span className=\"text-xs\">chars</span>\n    </div>\n  );\n}\n","import * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\nimport { cn } from '@/lib/utils'\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm',\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      'rounded-lg border bg-card text-card-foreground shadow-sm',\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = 'Card'\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\n    {...props}\n  />\n))\nCardHeader.displayName = 'CardHeader'\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      'text-2xl font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = 'CardTitle'\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nCardDescription.displayName = 'CardDescription'\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n))\nCardContent.displayName = 'CardContent'\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex items-center p-6 pt-0', className)}\n    {...props}\n  />\n))\nCardFooter.displayName = 'CardFooter'\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","import * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst labelVariants = cva(\n  'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70'\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","import * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      'flex cursor-default items-center justify-center py-1',\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      'flex cursor-default items-center justify-center py-1',\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        'relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n        position === 'popper' &&\n          'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          'p-1',\n          position === 'popper' &&\n            'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]'\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn('py-1.5 pl-8 pr-2 text-sm font-semibold', className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn('-mx-1 my-1 h-px bg-muted', className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","/**\n * Content Calendar Service\n * Handles all content calendar operations including CRUD, scheduling, and generation\n */\n\nimport { supabase, db, functions } from '@/lib/supabase';\nimport type {\n  ContentItem,\n  ContentGenerationParams,\n  BulkGenerationParams,\n  BulkGenerationResult,\n  Platform,\n  OptimalTimeRecommendation,\n  SchedulingConflict,\n  PlatformLimits,\n  AutoScheduleStrategy,\n  ContentStatus,\n  GenerationMode,\n} from '@/types/content-calendar.types';\n\n/**\n * Platform-specific limits and settings\n */\nconst PLATFORM_LIMITS: Record<Platform, PlatformLimits> = {\n  instagram: {\n    platform: 'instagram',\n    max_posts_per_day: 1,\n    optimal_times: ['09:00', '12:00', '17:00', '19:00'],\n    min_interval_minutes: 60,\n  },\n  twitter: {\n    platform: 'twitter',\n    max_posts_per_day: 5,\n    max_posts_per_hour: 2,\n    optimal_times: ['08:00', '12:00', '15:00', '17:00', '20:00'],\n    min_interval_minutes: 30,\n  },\n  linkedin: {\n    platform: 'linkedin',\n    max_posts_per_day: 2,\n    optimal_times: ['08:00', '12:00', '17:00'],\n    min_interval_minutes: 120,\n  },\n  facebook: {\n    platform: 'facebook',\n    max_posts_per_day: 3,\n    optimal_times: ['09:00', '13:00', '19:00'],\n    min_interval_minutes: 60,\n  },\n  tiktok: {\n    platform: 'tiktok',\n    max_posts_per_day: 2,\n    optimal_times: ['11:00', '16:00', '21:00'],\n    min_interval_minutes: 120,\n  },\n  email: {\n    platform: 'email',\n    max_posts_per_day: 1,\n    optimal_times: ['10:00', '14:00'],\n    min_interval_minutes: 240,\n  },\n  blog: {\n    platform: 'blog',\n    max_posts_per_day: 1,\n    optimal_times: ['09:00', '14:00'],\n    min_interval_minutes: 1440,\n  },\n};\n\nexport class ContentCalendarService {\n  /**\n   * Transform database row to ContentItem\n   */\n  private static dbToContentItem(row: any): ContentItem {\n    return {\n      id: row.id,\n      brand_id: row.brand_id,\n      user_id: row.user_id || '', // DB doesn't have user_id column\n      platform: row.platform as Platform,\n      content_text: row.content || row.content_text || '',\n      content_html: row.content_html,\n      scheduled_time: row.scheduled_for,\n      published_time: row.published_at,\n      status: row.status as ContentStatus,\n      pillar_id: row.pillar_id,\n      campaign_id: row.campaign_id,\n      generation_mode: row.generation_mode as GenerationMode,\n      synapse_score: row.synapse_score,\n      engagement_metrics: row.engagement_metrics,\n      design_data: row.design_data,\n      platform_post_id: row.platform_post_id,\n      error_message: row.publish_error,\n      intelligence_badges: row.intelligence_badges,\n      media_urls: row.media_urls,\n      image_url: row.image_url,\n      hashtags: row.hashtags,\n      created_at: row.created_at,\n      updated_at: row.updated_at,\n    };\n  }\n\n  /**\n   * Transform ContentItem to database row\n   */\n  private static contentItemToDb(item: Partial<ContentItem>): any {\n    return {\n      brand_id: item.brand_id,\n      title: item.content_text?.substring(0, 100) || 'Untitled', // DB requires title\n      content: item.content_text,\n      content_type: 'social', // DB requires content_type\n      platform: item.platform,\n      scheduled_for: item.scheduled_time,\n      status: item.status || 'draft',\n      pillar_id: item.pillar_id,\n      generation_mode: item.generation_mode || 'marba',\n      synapse_enhanced: (item.synapse_score || 0) > 0,\n      image_url: item.image_url,\n      design_data: item.design_data,\n      published_at: item.published_time,\n      platform_post_id: item.platform_post_id,\n      publish_error: item.error_message,\n    };\n  }\n\n  /**\n   * Get content items for a date range\n   */\n  static async getContentItems(\n    brandId: string,\n    startDate?: string,\n    endDate?: string\n  ): Promise<ContentItem[]> {\n    let query = supabase\n      .from('content_calendar_items')\n      .select('*')\n      .eq('brand_id', brandId)\n      .order('scheduled_for', { ascending: true, nullsFirst: false });\n\n    if (startDate) {\n      query = query.gte('scheduled_for', startDate);\n    }\n\n    if (endDate) {\n      query = query.lte('scheduled_for', endDate);\n    }\n\n    const { data, error } = await query;\n\n    if (error) {\n      console.error('Failed to fetch content items:', error);\n      throw error;\n    }\n\n    return (data || []).map((row) => this.dbToContentItem(row));\n  }\n\n  /**\n   * Get a single content item by ID\n   */\n  static async getContentItem(id: string): Promise<ContentItem | null> {\n    const { data, error } = await supabase\n      .from('content_calendar_items')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      console.error('Failed to get content item:', error);\n      throw error;\n    }\n\n    return data ? this.dbToContentItem(data) : null;\n  }\n\n  /**\n   * Create a new content item\n   */\n  static async createContentItem(item: Partial<ContentItem>): Promise<ContentItem> {\n    console.log('[ContentCalendarService] Creating content item:', {\n      brand_id: item.brand_id,\n      status: item.status,\n      text: item.content_text?.substring(0, 50) + '...'\n    });\n\n    const dbRow = this.contentItemToDb(item);\n    console.log('[ContentCalendarService] Transformed to DB row:', {\n      brand_id: dbRow.brand_id,\n      status: dbRow.status,\n      title: dbRow.title\n    });\n\n    const { data, error } = await supabase\n      .from('content_calendar_items')\n      .insert({\n        ...dbRow,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      })\n      .select()\n      .single();\n\n    if (error) {\n      console.error('[ContentCalendarService] Failed to create content item:', error);\n      throw error;\n    }\n\n    console.log('[ContentCalendarService] Successfully created content item:', { id: data.id });\n    return this.dbToContentItem(data);\n  }\n\n  /**\n   * Update a content item\n   */\n  static async updateContentItem(\n    id: string,\n    updates: Partial<ContentItem>\n  ): Promise<ContentItem> {\n    const dbUpdates = this.contentItemToDb(updates);\n\n    const { data, error } = await supabase\n      .from('content_calendar_items')\n      .update({\n        ...dbUpdates,\n        updated_at: new Date().toISOString(),\n      })\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Failed to update content item:', error);\n      throw error;\n    }\n\n    return this.dbToContentItem(data);\n  }\n\n  /**\n   * Delete a content item\n   */\n  static async deleteContentItem(id: string): Promise<void> {\n    return db.delete('content_calendar_items', id);\n  }\n\n  /**\n   * Duplicate a content item\n   */\n  static async duplicateContentItem(id: string): Promise<ContentItem> {\n    const original = await this.getContentItem(id);\n    if (!original) throw new Error('Content item not found');\n\n    const { id: _, created_at, updated_at, published_time, platform_post_id, ...rest } = original;\n\n    return this.createContentItem({\n      ...rest,\n      status: 'draft',\n      scheduled_time: undefined,\n    });\n  }\n\n  /**\n   * Get optimal posting times for a platform on a given date\n   */\n  static async getOptimalTimes(\n    platform: Platform,\n    date: string,\n    brandId: string,\n    existingContent?: ContentItem[]\n  ): Promise<OptimalTimeRecommendation[]> {\n    const limits = PLATFORM_LIMITS[platform];\n    const dateObj = new Date(date);\n    const dayOfWeek = dateObj.getDay();\n\n    // Get industry data (simplified for now)\n    const industryData = limits.optimal_times;\n\n    // Get learned data from past performance (TODO: implement learning engine)\n    // For now, use industry defaults\n\n    const recommendations: OptimalTimeRecommendation[] = industryData.map((time) => {\n      const reasoning = this.buildTimeReasoning(platform, time, dayOfWeek);\n      return {\n        time: `${date}T${time}:00`,\n        score: this.calculateTimeScore(time, dayOfWeek, platform),\n        reasoning,\n        based_on: ['industry_data', 'platform_defaults'],\n      };\n    });\n\n    // Filter out times that conflict with existing content\n    const filtered = this.filterConflictingTimes(\n      recommendations,\n      existingContent || [],\n      platform\n    );\n\n    return filtered.sort((a, b) => b.score - a.score);\n  }\n\n  /**\n   * Build reasoning text for time recommendation\n   */\n  private static buildTimeReasoning(\n    platform: Platform,\n    time: string,\n    dayOfWeek: number\n  ): string {\n    const hour = parseInt(time.split(':')[0]);\n    const dayName = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][\n      dayOfWeek\n    ];\n\n    if (hour >= 6 && hour < 9) {\n      return `Early morning on ${dayName}s - catches commuters checking ${platform}`;\n    } else if (hour >= 9 && hour < 12) {\n      return `Mid-morning - high engagement during work breaks`;\n    } else if (hour >= 12 && hour < 14) {\n      return `Lunch time - peak browsing period`;\n    } else if (hour >= 17 && hour < 20) {\n      return `Evening commute - people unwinding after work`;\n    } else if (hour >= 20 && hour < 23) {\n      return `Evening leisure time - high engagement`;\n    }\n\n    return `Optimal time based on ${platform} engagement patterns`;\n  }\n\n  /**\n   * Calculate time score (0-100)\n   */\n  private static calculateTimeScore(time: string, dayOfWeek: number, platform: Platform): number {\n    const hour = parseInt(time.split(':')[0]);\n    let score = 50;\n\n    // Boost score for peak times\n    if (hour >= 12 && hour < 14) score += 20; // Lunch\n    if (hour >= 17 && hour < 20) score += 25; // Evening commute\n    if (hour >= 20 && hour < 22) score += 15; // Evening leisure\n\n    // Boost for weekday vs weekend\n    if (dayOfWeek >= 1 && dayOfWeek <= 5) {\n      score += 10; // Weekday boost for most platforms\n    }\n\n    // Platform-specific adjustments\n    if (platform === 'linkedin' && hour >= 8 && hour <= 10) score += 15;\n    if (platform === 'instagram' && hour >= 19 && hour <= 21) score += 15;\n    if (platform === 'twitter' && (hour === 12 || hour === 17)) score += 10;\n\n    return Math.min(100, score);\n  }\n\n  /**\n   * Filter out times that conflict with existing content\n   */\n  private static filterConflictingTimes(\n    recommendations: OptimalTimeRecommendation[],\n    existingContent: ContentItem[],\n    platform: Platform\n  ): OptimalTimeRecommendation[] {\n    const limits = PLATFORM_LIMITS[platform];\n    const minIntervalMs = (limits.min_interval_minutes || 60) * 60 * 1000;\n\n    return recommendations.filter((rec) => {\n      const recTime = new Date(rec.time).getTime();\n\n      // Check if any existing content is too close\n      const hasConflict = existingContent.some((content) => {\n        if (content.platform !== platform || !content.scheduled_time) return false;\n\n        const contentTime = new Date(content.scheduled_time).getTime();\n        const timeDiff = Math.abs(recTime - contentTime);\n\n        return timeDiff < minIntervalMs;\n      });\n\n      return !hasConflict;\n    });\n  }\n\n  /**\n   * Detect scheduling conflicts\n   */\n  static async detectConflicts(\n    brandId: string,\n    platform: Platform,\n    scheduledTime: string\n  ): Promise<SchedulingConflict[]> {\n    const date = scheduledTime.split('T')[0];\n    const existingContent = await this.getContentItems(brandId, date, date);\n\n    const platformContent = existingContent.filter((c) => c.platform === platform);\n    const limits = PLATFORM_LIMITS[platform];\n    const conflicts: SchedulingConflict[] = [];\n\n    // Check daily limit\n    if (platformContent.length >= limits.max_posts_per_day) {\n      conflicts.push({\n        date,\n        platform,\n        current_count: platformContent.length,\n        max_allowed: limits.max_posts_per_day,\n        reason: `Maximum ${limits.max_posts_per_day} posts per day reached for ${platform}`,\n      });\n    }\n\n    // Check interval conflicts\n    const scheduledDate = new Date(scheduledTime);\n    const minIntervalMs = (limits.min_interval_minutes || 60) * 60 * 1000;\n\n    platformContent.forEach((content) => {\n      if (!content.scheduled_time) return;\n\n      const contentDate = new Date(content.scheduled_time);\n      const timeDiff = Math.abs(scheduledDate.getTime() - contentDate.getTime());\n\n      if (timeDiff < minIntervalMs) {\n        conflicts.push({\n          date,\n          platform,\n          current_count: platformContent.length,\n          max_allowed: limits.max_posts_per_day,\n          reason: `Too close to existing post at ${content.scheduled_time}. Minimum ${limits.min_interval_minutes} minutes required.`,\n        });\n      }\n    });\n\n    return conflicts;\n  }\n\n  /**\n   * Schedule content for a specific time\n   */\n  static async scheduleContent(itemId: string, scheduledTime: string): Promise<ContentItem> {\n    const item = await this.getContentItem(itemId);\n    if (!item) throw new Error('Content item not found');\n\n    // Check for conflicts\n    const conflicts = await this.detectConflicts(\n      item.brand_id,\n      item.platform,\n      scheduledTime\n    );\n\n    if (conflicts.length > 0) {\n      throw new Error(`Scheduling conflict: ${conflicts[0].reason}`);\n    }\n\n    return this.updateContentItem(itemId, {\n      scheduled_time: scheduledTime,\n      status: 'scheduled',\n    });\n  }\n\n  /**\n   * Bulk schedule content items\n   */\n  static async bulkSchedule(\n    items: ContentItem[],\n    strategy: AutoScheduleStrategy = 'optimal_times'\n  ): Promise<ContentItem[]> {\n    const scheduled: ContentItem[] = [];\n\n    for (const item of items) {\n      try {\n        // Get optimal times for this item's platform\n        const date = item.scheduled_time?.split('T')[0] || new Date().toISOString().split('T')[0];\n        const optimalTimes = await this.getOptimalTimes(\n          item.platform,\n          date,\n          item.brand_id,\n          scheduled\n        );\n\n        if (optimalTimes.length === 0) {\n          console.warn(`No optimal times available for ${item.platform} on ${date}`);\n          continue;\n        }\n\n        // Select best time based on strategy\n        const selectedTime = this.selectTimeByStrategy(optimalTimes, strategy);\n\n        // Schedule the item\n        const scheduledItem = await this.scheduleContent(item.id, selectedTime.time);\n        scheduled.push(scheduledItem);\n      } catch (error) {\n        console.error(`Failed to schedule item ${item.id}:`, error);\n      }\n    }\n\n    return scheduled;\n  }\n\n  /**\n   * Select time based on auto-schedule strategy\n   */\n  private static selectTimeByStrategy(\n    times: OptimalTimeRecommendation[],\n    strategy: AutoScheduleStrategy\n  ): OptimalTimeRecommendation {\n    switch (strategy) {\n      case 'optimal_times':\n        return times[0]; // Highest score\n      case 'even_distribution':\n        // Distribute evenly across available times\n        const midIndex = Math.floor(times.length / 2);\n        return times[midIndex];\n      case 'best_performing':\n        // TODO: Use learning engine data\n        return times[0];\n      default:\n        return times[0];\n    }\n  }\n\n  /**\n   * Generate content\n   */\n  static async generateContent(params: ContentGenerationParams): Promise<any> {\n    return functions.generateContent(\n      params.brandId,\n      params.platform,\n      params.topic,\n      params.mode,\n      {\n        pillarId: params.pillarId,\n        context: params.context,\n        opportunityId: params.opportunityId,\n        tone: params.tone,\n        length: params.length,\n      }\n    );\n  }\n\n  /**\n   * Generate bulk content\n   */\n  static async generateBulkContent(\n    params: BulkGenerationParams\n  ): Promise<BulkGenerationResult> {\n    // Calculate number of days\n    const start = new Date(params.dateRange.start);\n    const end = new Date(params.dateRange.end);\n    const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n\n    const items: ContentItem[] = [];\n    const postsPerDay = params.postsPerDay || 1;\n\n    // Generate content for each day\n    for (let day = 0; day < days; day++) {\n      const currentDate = new Date(start);\n      currentDate.setDate(currentDate.getDate() + day);\n      const dateStr = currentDate.toISOString().split('T')[0];\n\n      // Generate posts for each platform\n      for (const platform of params.platforms) {\n        for (let i = 0; i < postsPerDay; i++) {\n          // Select pillar based on distribution\n          const pillar = this.selectPillarByDistribution(params.pillarDistribution);\n\n          // Generate content\n          const generationResult = await this.generateContent({\n            brandId: params.brandId,\n            platform,\n            topic: `Generated content for ${platform}`,\n            pillarId: pillar.pillarId,\n            mode: params.mode,\n          });\n\n          // Create content item (use first variation)\n          if (generationResult.variations && generationResult.variations.length > 0) {\n            const variation = generationResult.variations[0];\n            const item = await this.createContentItem({\n              brand_id: params.brandId,\n              user_id: generationResult.user_id || '',\n              platform,\n              content_text: variation.text,\n              pillar_id: pillar.pillarId,\n              generation_mode: params.mode,\n              synapse_score: variation.psychology_score,\n              intelligence_badges: this.generateIntelligenceBadges(variation, params.mode),\n              status: 'draft',\n            });\n\n            items.push(item);\n          }\n        }\n      }\n    }\n\n    // Calculate summary\n    const pillarCounts: Record<string, number> = {};\n    items.forEach((item) => {\n      if (item.pillar_id) {\n        pillarCounts[item.pillar_id] = (pillarCounts[item.pillar_id] || 0) + 1;\n      }\n    });\n\n    return {\n      items,\n      summary: {\n        total_posts: items.length,\n        platforms: params.platforms,\n        days_covered: days,\n        pillar_distribution: pillarCounts,\n      },\n    };\n  }\n\n  /**\n   * Select pillar based on distribution percentages\n   */\n  private static selectPillarByDistribution(\n    distribution: { pillarId: string; percentage: number }[]\n  ): { pillarId: string; percentage: number } {\n    const rand = Math.random() * 100;\n    let cumulative = 0;\n\n    for (const pillar of distribution) {\n      cumulative += pillar.percentage;\n      if (rand <= cumulative) {\n        return pillar;\n      }\n    }\n\n    return distribution[0];\n  }\n\n  /**\n   * Generate intelligence badges based on content analysis\n   */\n  private static generateIntelligenceBadges(variation: any, mode: string): string[] {\n    const badges: string[] = [];\n\n    if (mode === 'synapse') {\n      badges.push('Synapse Enhanced');\n    }\n\n    if (variation.psychology_score && variation.psychology_score > 80) {\n      badges.push('High-performing');\n    }\n\n    if (variation.synapse_analysis?.power_words?.length > 3) {\n      badges.push('Data-driven');\n    }\n\n    return badges;\n  }\n\n  /**\n   * Publish content\n   */\n  static async publishContent(itemId: string): Promise<ContentItem> {\n    const item = await this.getContentItem(itemId);\n    if (!item) throw new Error('Content item not found');\n\n    try {\n      // Call publishing edge function\n      const result = await functions.publishToPlatform(\n        itemId,\n        item.platform,\n        item.content_text,\n        item.media_urls?.[0]\n      );\n\n      // Update item with published status\n      return this.updateContentItem(itemId, {\n        status: 'published',\n        published_time: new Date().toISOString(),\n        platform_post_id: result.platform_post_id,\n      });\n    } catch (error: any) {\n      // Mark as failed with error\n      return this.updateContentItem(itemId, {\n        status: 'failed',\n        error_message: error.message,\n      });\n    }\n  }\n\n  /**\n   * Get publishing queue (upcoming scheduled posts)\n   */\n  static async getPublishingQueue(brandId: string, days: number = 7): Promise<ContentItem[]> {\n    const now = new Date();\n    const endDate = new Date();\n    endDate.setDate(endDate.getDate() + days);\n\n    const { data, error } = await supabase\n      .from('content_calendar_items')\n      .select('*')\n      .eq('brand_id', brandId)\n      .in('status', ['draft', 'scheduled'])\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    // Transform from database format to TypeScript format\n    const items = ((data || []) as any[]).map(this.dbToContentItem);\n\n    return items;\n  }\n\n  /**\n   * Get platform limits for a platform\n   */\n  static getPlatformLimits(platform: Platform): PlatformLimits {\n    return PLATFORM_LIMITS[platform];\n  }\n}\n","/**\n * CalendarView Component\n * Full-featured calendar view with drag-and-drop, multiple views, and color-coding\n * Tasks 296-305\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport type { EventInput, EventClickArg, EventDropArg } from '@fullcalendar/core';\nimport { ContentCalendarService } from '@/services/content-calendar.service';\nimport type { ContentItem, Platform, ContentStatus } from '@/types/content-calendar.types';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Calendar, List, Grid3x3, Clock } from 'lucide-react';\n\ninterface CalendarViewProps {\n  brandId: string;\n  onEventClick?: (contentItem: ContentItem) => void;\n  onEventDrop?: (contentItem: ContentItem, newDate: string) => void;\n}\n\n/**\n * Platform color mapping (for color-coding)\n */\nconst PLATFORM_COLORS: Record<Platform, string> = {\n  instagram: '#E1306C', // Pink\n  twitter: '#1DA1F2', // Blue\n  linkedin: '#0A66C2', // Navy\n  facebook: '#1877F2', // Dark blue\n  tiktok: '#000000', // Black\n  email: '#EA4335', // Red\n  blog: '#34A853', // Green\n};\n\n/**\n * Status color mapping\n */\nconst STATUS_COLORS: Record<ContentStatus, string> = {\n  draft: '#6B7280', // Gray\n  scheduled: '#F59E0B', // Orange\n  published: '#10B981', // Green\n  failed: '#EF4444', // Red\n};\n\nexport function CalendarView({ brandId, onEventClick, onEventDrop }: CalendarViewProps) {\n  const [contentItems, setContentItems] = useState<ContentItem[]>([]);\n  const [events, setEvents] = useState<EventInput[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [view, setView] = useState<'month' | 'week' | 'day' | 'list'>('month');\n  const [dateRange, setDateRange] = useState({\n    start: new Date(),\n    end: new Date(),\n  });\n\n  /**\n   * Load content items\n   */\n  const loadContent = useCallback(async () => {\n    try {\n      setLoading(true);\n      // Load all content items (no date filter to show drafts too)\n      const items = await ContentCalendarService.getContentItems(brandId);\n      setContentItems(items);\n\n      // Convert to FullCalendar events\n      const calendarEvents: EventInput[] = items\n        .filter((item) => item.scheduled_time) // Only show scheduled items in calendar\n        .map((item) => ({\n          id: item.id,\n          title: item.content_text.substring(0, 50) + '...',\n          start: item.scheduled_time,\n          backgroundColor: PLATFORM_COLORS[item.platform] || '#6B7280',\n          borderColor: STATUS_COLORS[item.status] || '#6B7280',\n          extendedProps: {\n            contentItem: item,\n          },\n        }));\n\n      console.log(`[CalendarView] Loaded ${items.length} items, ${calendarEvents.length} scheduled for calendar`);\n\n      setEvents(calendarEvents);\n    } catch (error) {\n      console.error('Failed to load content:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId]);\n\n  /**\n   * Load content on mount and when brand changes\n   */\n  useEffect(() => {\n    loadContent();\n  }, [loadContent]);\n\n  /**\n   * Handle event click\n   */\n  const handleEventClick = (clickInfo: EventClickArg) => {\n    const contentItem = clickInfo.event.extendedProps.contentItem as ContentItem;\n    if (onEventClick) {\n      onEventClick(contentItem);\n    }\n  };\n\n  /**\n   * Handle event drop (drag-and-drop rescheduling)\n   */\n  const handleEventDrop = async (dropInfo: EventDropArg) => {\n    const contentItem = dropInfo.event.extendedProps.contentItem as ContentItem;\n    const newDate = dropInfo.event.start?.toISOString();\n\n    if (!newDate) {\n      dropInfo.revert();\n      return;\n    }\n\n    try {\n      // Update the content item's scheduled time\n      await ContentCalendarService.scheduleContent(contentItem.id, newDate);\n\n      // Notify parent\n      if (onEventDrop) {\n        onEventDrop(contentItem, newDate);\n      }\n\n      // Reload content\n      await loadContent();\n    } catch (error: any) {\n      console.error('Failed to reschedule content:', error);\n      alert(`Failed to reschedule: ${error.message}`);\n      dropInfo.revert();\n    }\n  };\n\n  /**\n   * Handle date range change\n   */\n  const handleDatesSet = (arg: any) => {\n    setDateRange({\n      start: arg.start,\n      end: arg.end,\n    });\n  };\n\n  /**\n   * Change calendar view\n   */\n  const changeView = (newView: 'month' | 'week' | 'day' | 'list') => {\n    console.log(`[CalendarView] Changing view to: ${newView}`);\n    setView(newView);\n  };\n\n  /**\n   * Get FullCalendar view name\n   */\n  const getFullCalendarView = () => {\n    switch (view) {\n      case 'month':\n        return 'dayGridMonth';\n      case 'week':\n        return 'timeGridWeek';\n      case 'day':\n        return 'timeGridDay';\n      case 'list':\n        return 'listWeek';\n      default:\n        return 'dayGridMonth';\n    }\n  };\n\n  /**\n   * Event content renderer (for tooltips and previews)\n   */\n  const renderEventContent = (eventInfo: any) => {\n    const contentItem = eventInfo.event.extendedProps.contentItem as ContentItem;\n\n    return (\n      <div\n        className=\"px-1 py-0.5 text-xs overflow-hidden\"\n        title={`${contentItem.platform.toUpperCase()} - ${contentItem.status}\\n\\n${contentItem.content_text}`}\n      >\n        <div className=\"flex items-center gap-1\">\n          <span className=\"font-semibold truncate\">{getPlatformIcon(contentItem.platform)}</span>\n          <span className=\"truncate\">{eventInfo.event.title}</span>\n        </div>\n      </div>\n    );\n  };\n\n  /**\n   * Get platform icon\n   */\n  const getPlatformIcon = (platform: Platform): string => {\n    const icons: Record<Platform, string> = {\n      instagram: 'üì∑',\n      twitter: 'üê¶',\n      linkedin: 'üíº',\n      facebook: 'üë•',\n      tiktok: 'üéµ',\n      email: 'üìß',\n      blog: 'üìù',\n    };\n    return icons[platform] || 'üì±';\n  };\n\n  return (\n    <Card className=\"p-6\">\n      {/* View Controls */}\n      <div className=\"mb-4 flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold\">Content Calendar</h2>\n\n        <div className=\"flex gap-2\">\n          <Button\n            variant={view === 'month' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => changeView('month')}\n          >\n            <Calendar className=\"w-4 h-4 mr-2\" />\n            Month\n          </Button>\n          <Button\n            variant={view === 'week' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => changeView('week')}\n          >\n            <Grid3x3 className=\"w-4 h-4 mr-2\" />\n            Week\n          </Button>\n          <Button\n            variant={view === 'day' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => changeView('day')}\n          >\n            <Clock className=\"w-4 h-4 mr-2\" />\n            Day\n          </Button>\n          <Button\n            variant={view === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => changeView('list')}\n          >\n            <List className=\"w-4 h-4 mr-2\" />\n            List\n          </Button>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mb-4 flex flex-wrap gap-4 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-semibold\">Platforms:</span>\n          {Object.entries(PLATFORM_COLORS).map(([platform, color]) => (\n            <div key={platform} className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-3 rounded\" style={{ backgroundColor: color }} />\n              <span className=\"capitalize\">{platform}</span>\n            </div>\n          ))}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-semibold\">Status:</span>\n          {Object.entries(STATUS_COLORS).map(([status, color]) => (\n            <div key={status} className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-3 rounded border-2\" style={{ borderColor: color }} />\n              <span className=\"capitalize\">{status}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Calendar */}\n      {loading ? (\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\" />\n            <p className=\"text-muted-foreground\">Loading calendar...</p>\n          </div>\n        </div>\n      ) : (\n        <div className=\"calendar-container\" key={`calendar-${view}`}>\n          <FullCalendar\n            plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin, listPlugin]}\n            initialView={getFullCalendarView()}\n            headerToolbar={{\n              left: 'prev,next today',\n              center: 'title',\n              right: '',\n            }}\n            events={events}\n            editable={true}\n            droppable={true}\n            eventClick={handleEventClick}\n            eventDrop={handleEventDrop}\n            eventContent={renderEventContent}\n            datesSet={handleDatesSet}\n            height=\"auto\"\n            dayMaxEvents={3}\n            eventTimeFormat={{\n              hour: '2-digit',\n              minute: '2-digit',\n              meridiem: 'short',\n            }}\n            slotLabelFormat={{\n              hour: '2-digit',\n              minute: '2-digit',\n              meridiem: 'short',\n            }}\n            nowIndicator={true}\n            businessHours={{\n              daysOfWeek: [1, 2, 3, 4, 5],\n              startTime: '09:00',\n              endTime: '18:00',\n            }}\n          />\n        </div>\n      )}\n\n      {/* Keyboard shortcuts hint */}\n      <div className=\"mt-4 text-xs text-muted-foreground\">\n        <span className=\"font-semibold\">Shortcuts:</span> Drag to reschedule ‚Ä¢ Click for details\n        ‚Ä¢ Hover for preview\n      </div>\n\n      {/* Custom styles for FullCalendar */}\n      <style>{`\n        .fc {\n          font-family: inherit;\n        }\n        .fc-event {\n          cursor: pointer;\n          transition: all 0.2s;\n          border-width: 2px;\n        }\n        .fc-event:hover {\n          opacity: 0.8;\n          transform: scale(1.02);\n        }\n        .fc-daygrid-event {\n          margin: 1px;\n        }\n        .fc-list-event:hover {\n          background-color: rgba(0, 0, 0, 0.05);\n        }\n        .fc .fc-button {\n          background-color: hsl(var(--primary));\n          border-color: hsl(var(--primary));\n        }\n        .fc .fc-button:hover {\n          background-color: hsl(var(--primary) / 0.9);\n        }\n        .fc .fc-button:disabled {\n          opacity: 0.5;\n        }\n        .fc-theme-standard td,\n        .fc-theme-standard th {\n          border-color: hsl(var(--border));\n        }\n        .fc-theme-standard .fc-scrollgrid {\n          border-color: hsl(var(--border));\n        }\n      `}</style>\n    </Card>\n  );\n}\n","/**\n * Opportunity Detector Service\n * Detects and manages intelligence opportunities for content creation\n */\n\nimport { supabase, db, functions } from '@/lib/supabase';\nimport type { Opportunity, OpportunityType, UrgencyLevel } from '@/types/content-calendar.types';\n\nexport class OpportunityDetectorService {\n  /**\n   * Get active opportunities for a brand\n   */\n  static async getActiveOpportunities(brandId: string): Promise<Opportunity[]> {\n    const now = new Date().toISOString();\n\n    const { data, error } = await supabase\n      .from('intelligence_opportunities')\n      .select('*')\n      .eq('brand_id', brandId)\n      .eq('status', 'active')\n      .or(`expires_at.is.null,expires_at.gte.${now}`)\n      .order('urgency', { ascending: false })\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    return (data as Opportunity[]) || [];\n  }\n\n  /**\n   * Get opportunity by ID\n   */\n  static async getOpportunity(opportunityId: string): Promise<Opportunity | null> {\n    return db.getById<Opportunity>('intelligence_opportunities', opportunityId);\n  }\n\n  /**\n   * Dismiss an opportunity\n   */\n  static async dismissOpportunity(opportunityId: string): Promise<void> {\n    await supabase\n      .from('intelligence_opportunities')\n      .update({\n        status: 'dismissed',\n        actioned_at: new Date().toISOString(),\n      })\n      .eq('id', opportunityId);\n  }\n\n  /**\n   * Mark opportunity as used\n   */\n  static async markOpportunityUsed(opportunityId: string): Promise<void> {\n    await supabase\n      .from('intelligence_opportunities')\n      .update({\n        status: 'used',\n        actioned_at: new Date().toISOString(),\n      })\n      .eq('id', opportunityId);\n  }\n\n  /**\n   * Generate content from opportunity\n   */\n  static async generateFromOpportunity(\n    opportunityId: string,\n    platform: string,\n    mode: 'marba' | 'synapse' = 'marba'\n  ): Promise<any> {\n    const opportunity = await this.getOpportunity(opportunityId);\n    if (!opportunity) throw new Error('Opportunity not found');\n\n    // Build context from opportunity\n    const context = {\n      opportunityType: opportunity.type,\n      opportunityTitle: opportunity.title,\n      opportunityDescription: opportunity.description,\n      sourceData: opportunity.context,\n      urgency: opportunity.urgency,\n    };\n\n    // Generate content using the opportunity context\n    const result = await functions.generateContent(\n      opportunity.brand_id,\n      platform,\n      opportunity.title,\n      mode,\n      {\n        context,\n        opportunityId,\n      }\n    );\n\n    // Mark opportunity as used\n    await this.markOpportunityUsed(opportunityId);\n\n    return result;\n  }\n\n  /**\n   * Create a new opportunity (for testing/demo)\n   */\n  static async createOpportunity(opportunity: Partial<Opportunity>): Promise<Opportunity> {\n    const { data, error } = await supabase\n      .from('intelligence_opportunities')\n      .insert({\n        ...opportunity,\n        status: 'active',\n        created_at: new Date().toISOString(),\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data as Opportunity;\n  }\n\n  /**\n   * Calculate time until expiration\n   */\n  static getTimeUntilExpiration(opportunity: Opportunity): {\n    hours: number;\n    minutes: number;\n    expired: boolean;\n  } {\n    if (!opportunity.expires_at) {\n      return { hours: 999, minutes: 0, expired: false };\n    }\n\n    const now = new Date();\n    const expiresAt = new Date(opportunity.expires_at);\n    const diffMs = expiresAt.getTime() - now.getTime();\n\n    if (diffMs <= 0) {\n      return { hours: 0, minutes: 0, expired: true };\n    }\n\n    const hours = Math.floor(diffMs / (1000 * 60 * 60));\n    const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n\n    return { hours, minutes, expired: false };\n  }\n\n  /**\n   * Get urgency color for UI\n   */\n  static getUrgencyColor(urgency: UrgencyLevel): string {\n    const colors: Record<UrgencyLevel, string> = {\n      low: 'bg-blue-100 text-blue-800 border-blue-200',\n      medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n      high: 'bg-orange-100 text-orange-800 border-orange-200',\n      critical: 'bg-red-100 text-red-800 border-red-200',\n    };\n    return colors[urgency] || colors.medium;\n  }\n\n  /**\n   * Get opportunity type icon\n   */\n  static getOpportunityIcon(type: OpportunityType): string {\n    const icons: Record<OpportunityType, string> = {\n      weather: 'üå§Ô∏è',\n      trending: 'üìà',\n      competitor: 'üéØ',\n      seasonal: 'üìÖ',\n      local_news: 'üì∞',\n    };\n    return icons[type] || 'üí°';\n  }\n\n  /**\n   * Get opportunity type label\n   */\n  static getOpportunityTypeLabel(type: OpportunityType): string {\n    const labels: Record<OpportunityType, string> = {\n      weather: 'Weather Alert',\n      trending: 'Trending Topic',\n      competitor: 'Competitor Activity',\n      seasonal: 'Seasonal Event',\n      local_news: 'Local News',\n    };\n    return labels[type] || 'Opportunity';\n  }\n\n  /**\n   * Create sample opportunities for testing\n   */\n  static async createSampleOpportunities(brandId: string): Promise<Opportunity[]> {\n    const samples: Partial<Opportunity>[] = [\n      {\n        brand_id: brandId,\n        type: 'weather',\n        title: 'Sunny Weekend Approaching',\n        description: 'Perfect weather forecast for outdoor activities this weekend.',\n        urgency: 'high',\n        impact_score: 85,\n        expires_at: new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString(),\n        context: {\n          temperature: 75,\n          conditions: 'sunny',\n          forecast: 'Perfect weekend weather',\n        },\n        suggested_actions: [\n          'Promote outdoor products',\n          'Share weekend activity tips',\n          'Create weather-related content',\n        ],\n      },\n      {\n        brand_id: brandId,\n        type: 'trending',\n        title: '#SmallBusinessSaturday Trending',\n        description: 'Small Business Saturday is trending with 50K mentions in the last hour.',\n        urgency: 'critical',\n        impact_score: 95,\n        expires_at: new Date(Date.now() + 6 * 60 * 60 * 1000).toISOString(),\n        context: {\n          hashtag: '#SmallBusinessSaturday',\n          mentions: 50000,\n          growth_rate: 'exponential',\n        },\n        suggested_actions: [\n          'Post about your small business story',\n          'Share customer testimonials',\n          'Offer limited-time promotion',\n        ],\n      },\n      {\n        brand_id: brandId,\n        type: 'seasonal',\n        title: 'Holiday Shopping Season Beginning',\n        description: 'Black Friday and Cyber Monday approaching - prime time for promotions.',\n        urgency: 'medium',\n        impact_score: 78,\n        expires_at: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),\n        context: {\n          event: 'Black Friday',\n          days_until: 14,\n          shopping_intensity: 'high',\n        },\n        suggested_actions: [\n          'Create holiday gift guides',\n          'Announce special offers',\n          'Share holiday shopping tips',\n        ],\n      },\n      {\n        brand_id: brandId,\n        type: 'competitor',\n        title: 'Competitor Launches New Feature',\n        description:\n          'Main competitor just announced a new product line. Opportunity to differentiate.',\n        urgency: 'high',\n        impact_score: 82,\n        expires_at: new Date(Date.now() + 72 * 60 * 60 * 1000).toISOString(),\n        context: {\n          competitor: 'Main Competitor',\n          action: 'product_launch',\n          sentiment: 'mixed',\n        },\n        suggested_actions: [\n          'Highlight your unique features',\n          'Share customer success stories',\n          'Create comparison content',\n        ],\n      },\n      {\n        brand_id: brandId,\n        type: 'local_news',\n        title: 'Local Community Event This Weekend',\n        description: 'Annual community festival happening downtown - great engagement opportunity.',\n        urgency: 'medium',\n        impact_score: 70,\n        expires_at: new Date(Date.now() + 96 * 60 * 60 * 1000).toISOString(),\n        context: {\n          event: 'Community Festival',\n          location: 'Downtown',\n          attendance: 'high',\n        },\n        suggested_actions: [\n          'Sponsor or participate in event',\n          'Create local community content',\n          'Share event information',\n        ],\n      },\n    ];\n\n    const created: Opportunity[] = [];\n    for (const sample of samples) {\n      try {\n        const opportunity = await this.createOpportunity(sample);\n        created.push(opportunity);\n      } catch (error) {\n        console.error('Failed to create sample opportunity:', error);\n      }\n    }\n\n    return created;\n  }\n}\n","import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = 'Textarea'\n\nexport { Textarea }\n","/**\n * ContentGenerator Component\n * Modal interface for generating content with MARBA or Synapse modes\n * Tasks 316-331\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Card } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Sparkles, Zap, Edit, Save, Info } from 'lucide-react';\nimport { ContentCalendarService } from '@/services/content-calendar.service';\nimport { EdginessSlider } from '@/components/synapse/EdginessSlider';\nimport { CharacterCountBadge } from '@/components/synapse/CharacterCountBadge';\nimport { CharacterValidator } from '@/services/synapse/validation/CharacterValidator';\nimport type {\n  Platform,\n  GenerationMode,\n  ContentVariation,\n  ContentPillar,\n} from '@/types/content-calendar.types';\nimport type {\n  EdginessLevel,\n  CharacterValidation,\n  SynapseContent,\n} from '@/types/synapse/synapseContent.types';\n\ninterface ContentGeneratorProps {\n  open: boolean;\n  onClose: () => void;\n  brandId: string;\n  userId: string;\n  opportunityId?: string;\n  pillars?: ContentPillar[];\n  onContentCreated?: (contentId: string) => void;\n}\n\n/**\n * Platform options\n */\nconst PLATFORMS: { value: Platform; label: string }[] = [\n  { value: 'instagram', label: 'Instagram' },\n  { value: 'twitter', label: 'Twitter' },\n  { value: 'linkedin', label: 'LinkedIn' },\n  { value: 'facebook', label: 'Facebook' },\n  { value: 'tiktok', label: 'TikTok' },\n  { value: 'email', label: 'Email' },\n  { value: 'blog', label: 'Blog' },\n];\n\nexport function ContentGenerator({\n  open,\n  onClose,\n  brandId,\n  userId,\n  opportunityId,\n  pillars = [],\n  onContentCreated,\n}: ContentGeneratorProps) {\n  const [platform, setPlatform] = useState<Platform>('instagram');\n  const [topic, setTopic] = useState('');\n  const [pillarId, setPillarId] = useState<string | undefined>();\n  const [mode, setMode] = useState<GenerationMode>('marba'); // Default to MARBA\n  const [generating, setGenerating] = useState(false);\n  const [variations, setVariations] = useState<ContentVariation[]>([]);\n  const [selectedVariation, setSelectedVariation] = useState<string | null>(null);\n  const [editedContent, setEditedContent] = useState<string>('');\n  const [saving, setSaving] = useState(false);\n\n  // Synapse-specific states\n  const [edginess, setEdginess] = useState<EdginessLevel>(50);\n  const [characterValidation, setCharacterValidation] = useState<CharacterValidation | null>(null);\n\n  // Character validator instance\n  const characterValidator = new CharacterValidator();\n\n  /**\n   * Reset form when modal closes\n   */\n  useEffect(() => {\n    if (!open) {\n      setTopic('');\n      setPillarId(undefined);\n      setMode('marba');\n      setVariations([]);\n      setSelectedVariation(null);\n      setEditedContent('');\n      setEdginess(50);\n      setCharacterValidation(null);\n    }\n  }, [open]);\n\n  /**\n   * Validate character count when content changes\n   */\n  useEffect(() => {\n    if (editedContent && mode === 'synapse') {\n      // Create mock SynapseContent for validation\n      const mockContent: SynapseContent = {\n        id: 'temp',\n        insightId: 'temp',\n        format: 'hook-post',\n        content: {\n          headline: editedContent.split('\\n')[0] || '',\n          hook: editedContent.split('\\n')[1] || '',\n          body: editedContent.split('\\n').slice(2, -1).join('\\n') || '',\n          cta: editedContent.split('\\n').slice(-1)[0] || ''\n        },\n        psychology: {\n          principle: 'Curiosity Gap',\n          trigger: { type: 'curiosity', strength: 0.8 },\n          persuasionTechnique: 'Pattern Interrupt',\n          expectedReaction: ''\n        },\n        optimization: {\n          powerWords: [],\n          framingDevice: '',\n          narrativeStructure: 'Hook ‚Üí Story ‚Üí Lesson',\n          pacing: 'medium'\n        },\n        meta: {\n          platform: [platform as any],\n          targetAudience: '',\n          tone: 'authoritative' as const\n        },\n        prediction: {\n          engagementScore: 0,\n          viralPotential: 0,\n          leadGeneration: 0,\n          brandImpact: 'neutral',\n          confidenceLevel: 0\n        },\n        metadata: {\n          generatedAt: new Date(),\n          model: '',\n          iterationCount: 0\n        }\n      };\n\n      const validation = characterValidator.validateContent(mockContent, [platform as any]);\n      const totalValidation = validation.validations.find(v => v.section === 'total' && v.platform === platform);\n      if (totalValidation) {\n        setCharacterValidation(totalValidation);\n      }\n    }\n  }, [editedContent, platform, mode]);\n\n  /**\n   * Generate content\n   */\n  const handleGenerate = async () => {\n    if (!topic.trim()) {\n      alert('Please enter a topic');\n      return;\n    }\n\n    setGenerating(true);\n    setVariations([]);\n    setSelectedVariation(null);\n\n    try {\n      const result = await ContentCalendarService.generateContent({\n        brandId,\n        platform,\n        topic,\n        pillarId,\n        mode,\n      });\n\n      // Mock response for demo (replace with actual API response)\n      const mockVariations: ContentVariation[] = [\n        {\n          id: '1',\n          text: `üéØ ${topic}\\n\\nTransform your business with cutting-edge solutions. Our proven approach delivers real results. Ready to elevate your game?\\n\\n#innovation #business #growth`,\n          synapse_analysis: {\n            psychology_score: 85,\n            power_words: ['Transform', 'cutting-edge', 'proven', 'real results', 'elevate'],\n            emotional_triggers: ['aspiration', 'urgency', 'confidence'],\n            connections_found: ['transformation ‚Üí results', 'innovation ‚Üí growth'],\n            clarity_score: 90,\n            engagement_prediction: 87,\n            improvements: ['Consider adding specific metrics', 'Include a clear CTA'],\n          },\n          psychology_score: 85,\n          benchmark_comparison: {\n            industry_average: 65,\n            your_score: 85,\n            percentile: 78,\n            comparison_text: 'Your content scores 31% higher than industry average',\n          },\n          why_this_works:\n            'This post combines aspirational language with concrete promises, triggering both emotional and logical engagement. The power words create urgency while maintaining professionalism.',\n          suggested_hashtags: ['#innovation', '#business', '#growth', '#transformation'],\n        },\n        {\n          id: '2',\n          text: `üí° ${topic}\\n\\nDiscover how leading companies are staying ahead. Join the revolution and unlock your potential today.\\n\\n‚ú® Learn more ‚Üí [link]\\n\\n#leadership #success #future`,\n          synapse_analysis: {\n            psychology_score: 78,\n            power_words: ['Discover', 'leading', 'revolution', 'unlock', 'potential'],\n            emotional_triggers: ['curiosity', 'belonging', 'achievement'],\n            connections_found: ['discovery ‚Üí learning', 'leadership ‚Üí success'],\n            clarity_score: 85,\n            engagement_prediction: 80,\n            improvements: ['Make CTA more specific', 'Add social proof'],\n          },\n          psychology_score: 78,\n          benchmark_comparison: {\n            industry_average: 65,\n            your_score: 78,\n            percentile: 68,\n            comparison_text: 'Your content scores 20% higher than industry average',\n          },\n          why_this_works:\n            'Appeals to desire for belonging and staying competitive. The curiosity gap created by \"Discover how\" drives engagement.',\n          suggested_hashtags: ['#leadership', '#success', '#future', '#innovation'],\n        },\n        {\n          id: '3',\n          text: `üöÄ ${topic}\\n\\nWhat if you could 10x your results in half the time? Here's the secret successful brands don't want you to know.\\n\\nüëâ Swipe to see the full strategy\\n\\n#productivity #marketing #strategy`,\n          synapse_analysis: {\n            psychology_score: 92,\n            power_words: ['10x', 'secret', 'successful', 'strategy'],\n            emotional_triggers: ['curiosity', 'exclusivity', 'urgency', 'achievement'],\n            connections_found: ['efficiency ‚Üí results', 'secrets ‚Üí success'],\n            clarity_score: 88,\n            engagement_prediction: 91,\n            improvements: ['Deliver on the promise in follow-up content'],\n          },\n          psychology_score: 92,\n          benchmark_comparison: {\n            industry_average: 65,\n            your_score: 92,\n            percentile: 89,\n            comparison_text: 'Your content scores 42% higher than industry average',\n          },\n          why_this_works:\n            'Uses curiosity gap and exclusivity psychology. The specific metric (10x) makes the promise tangible while maintaining intrigue.',\n          suggested_hashtags: ['#productivity', '#marketing', '#strategy', '#businessgrowth'],\n        },\n      ];\n\n      setVariations(\n        mode === 'synapse'\n          ? mockVariations\n          : mockVariations.map((v) => ({\n              ...v,\n              synapse_analysis: undefined,\n              psychology_score: undefined,\n            }))\n      );\n    } catch (error) {\n      console.error('Failed to generate content:', error);\n      alert('Failed to generate content. Please try again.');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  /**\n   * Select a variation\n   */\n  const handleSelectVariation = (variationId: string) => {\n    setSelectedVariation(variationId);\n    const variation = variations.find((v) => v.id === variationId);\n    if (variation) {\n      setEditedContent(variation.text);\n    }\n  };\n\n  /**\n   * Save to calendar\n   */\n  const handleSaveToCalendar = async () => {\n    if (!editedContent.trim()) {\n      alert('Please select and edit a variation');\n      return;\n    }\n\n    setSaving(true);\n\n    try {\n      const selectedVar = variations.find((v) => v.id === selectedVariation);\n\n      const contentItem = await ContentCalendarService.createContentItem({\n        brand_id: brandId,\n        user_id: userId,\n        platform,\n        content_text: editedContent,\n        pillar_id: pillarId,\n        generation_mode: mode,\n        synapse_score: selectedVar?.psychology_score,\n        intelligence_badges: mode === 'synapse' ? ['Synapse Enhanced', 'Data-driven'] : [],\n        hashtags: selectedVar?.suggested_hashtags,\n        status: 'draft',\n      });\n\n      if (onContentCreated) {\n        onContentCreated(contentItem.id);\n      }\n\n      onClose();\n    } catch (error) {\n      console.error('Failed to save content:', error);\n      alert('Failed to save content. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Generate Content</DialogTitle>\n          <DialogDescription>\n            Create engaging content with AI assistance\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Platform Selector */}\n          <div>\n            <Label>Platform</Label>\n            <Select value={platform} onValueChange={(value) => setPlatform(value as Platform)}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {PLATFORMS.map((p) => (\n                  <SelectItem key={p.value} value={p.value}>\n                    {p.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Pillar Selector */}\n          {pillars.length > 0 && (\n            <div>\n              <Label>Message Pillar (Optional)</Label>\n              <Select value={pillarId} onValueChange={setPillarId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select a pillar...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {pillars.map((pillar) => (\n                    <SelectItem key={pillar.id} value={pillar.id}>\n                      {pillar.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Topic Input */}\n          <div>\n            <Label>Topic / Main Idea</Label>\n            <Textarea\n              value={topic}\n              onChange={(e) => setTopic(e.target.value)}\n              placeholder=\"What do you want to talk about?\"\n              rows={3}\n            />\n          </div>\n\n          {/* Generation Mode Toggle */}\n          <div>\n            <Label className=\"flex items-center gap-2\">\n              Generation Mode\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"h-6 w-6 p-0\"\n                title=\"MARBA = Fast generation with Claude Sonnet 3.5\nSynapse = Enhanced with psychology optimization and deeper analysis\"\n              >\n                <Info className=\"w-4 h-4\" />\n              </Button>\n            </Label>\n            <div className=\"flex gap-2 mt-2\">\n              <Button\n                variant={mode === 'marba' ? 'default' : 'outline'}\n                onClick={() => setMode('marba')}\n                className=\"flex-1\"\n              >\n                <Zap className=\"w-4 h-4 mr-2\" />\n                MARBA\n                <Badge variant=\"secondary\" className=\"ml-2 text-xs\">\n                  Fast\n                </Badge>\n              </Button>\n              <Button\n                variant={mode === 'synapse' ? 'default' : 'outline'}\n                onClick={() => setMode('synapse')}\n                className=\"flex-1\"\n              >\n                <Sparkles className=\"w-4 h-4 mr-2\" />\n                Synapse\n                <Badge variant=\"secondary\" className=\"ml-2 text-xs\">\n                  Enhanced\n                </Badge>\n              </Button>\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {mode === 'marba'\n                ? 'Fast generation with Claude Sonnet 3.5'\n                : 'Psychology-optimized content with deeper analysis'}\n            </p>\n          </div>\n\n          {/* Edginess Slider (Synapse only) */}\n          {mode === 'synapse' && (\n            <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n              <EdginessSlider value={edginess} onChange={setEdginess} />\n            </div>\n          )}\n\n          {/* Generate Button */}\n          <Button onClick={handleGenerate} disabled={generating} className=\"w-full\">\n            {generating ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                Generating with {mode === 'marba' ? 'MARBA' : 'Synapse'}...\n              </>\n            ) : (\n              <>\n                {mode === 'marba' ? <Zap className=\"w-4 h-4 mr-2\" /> : <Sparkles className=\"w-4 h-4 mr-2\" />}\n                Generate Content\n              </>\n            )}\n          </Button>\n\n          {/* Variations */}\n          {variations.length > 0 && (\n            <div>\n              <h3 className=\"font-semibold mb-3\">Choose a Variation</h3>\n              <Tabs value={selectedVariation || undefined} onValueChange={handleSelectVariation}>\n                <TabsList className=\"grid w-full grid-cols-3\">\n                  <TabsTrigger value=\"1\">Option 1</TabsTrigger>\n                  <TabsTrigger value=\"2\">Option 2</TabsTrigger>\n                  <TabsTrigger value=\"3\">Option 3</TabsTrigger>\n                </TabsList>\n\n                {variations.map((variation) => (\n                  <TabsContent key={variation.id} value={variation.id} className=\"space-y-4\">\n                    {/* Content Preview */}\n                    <Card className=\"p-4\">\n                      <p className=\"whitespace-pre-wrap text-sm\">{variation.text}</p>\n                    </Card>\n\n                    {/* Synapse Analysis (if Synapse mode) */}\n                    {mode === 'synapse' && variation.synapse_analysis && (\n                      <Card className=\"p-4 bg-purple-50 border-purple-200\">\n                        <div className=\"space-y-3\">\n                          <div>\n                            <div className=\"flex items-center justify-between mb-1\">\n                              <span className=\"text-sm font-semibold\">Psychology Score</span>\n                              <span className=\"text-sm font-bold\">{variation.psychology_score}/100</span>\n                            </div>\n                            <div className=\"bg-white rounded-full h-2\">\n                              <div\n                                className=\"bg-purple-600 h-2 rounded-full\"\n                                style={{ width: `${variation.psychology_score}%` }}\n                              />\n                            </div>\n                          </div>\n\n                          <div>\n                            <span className=\"text-sm font-semibold block mb-1\">Power Words</span>\n                            <div className=\"flex flex-wrap gap-1\">\n                              {variation.synapse_analysis.power_words.map((word, idx) => (\n                                <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\n                                  {word}\n                                </Badge>\n                              ))}\n                            </div>\n                          </div>\n\n                          <div>\n                            <span className=\"text-sm font-semibold block mb-1\">Emotional Triggers</span>\n                            <div className=\"flex flex-wrap gap-1\">\n                              {variation.synapse_analysis.emotional_triggers.map((trigger, idx) => (\n                                <Badge key={idx} className=\"text-xs bg-pink-100 text-pink-800\">\n                                  {trigger}\n                                </Badge>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    )}\n\n                    {/* Benchmark Comparison */}\n                    {variation.benchmark_comparison && (\n                      <Card className=\"p-4 bg-blue-50 border-blue-200\">\n                        <h4 className=\"font-semibold mb-2 text-sm\">Industry Benchmark</h4>\n                        <p className=\"text-sm text-blue-900\">{variation.benchmark_comparison.comparison_text}</p>\n                        <div className=\"mt-2 flex items-center gap-4 text-xs\">\n                          <span>Industry Avg: {variation.benchmark_comparison.industry_average}</span>\n                          <span className=\"font-bold\">Your Score: {variation.benchmark_comparison.your_score}</span>\n                          <span>Percentile: {variation.benchmark_comparison.percentile}th</span>\n                        </div>\n                      </Card>\n                    )}\n\n                    {/* Why This Works */}\n                    {variation.why_this_works && (\n                      <Card className=\"p-4 bg-green-50 border-green-200\">\n                        <h4 className=\"font-semibold mb-2 text-sm\">Why This Works</h4>\n                        <p className=\"text-sm text-green-900\">{variation.why_this_works}</p>\n                      </Card>\n                    )}\n\n                    {/* Inline Editing */}\n                    {selectedVariation === variation.id && (\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <Label className=\"flex items-center gap-2\">\n                            <Edit className=\"w-4 h-4\" />\n                            Edit Content\n                          </Label>\n                          {mode === 'synapse' && characterValidation && (\n                            <CharacterCountBadge validation={characterValidation} />\n                          )}\n                        </div>\n                        <Textarea\n                          value={editedContent}\n                          onChange={(e) => setEditedContent(e.target.value)}\n                          rows={6}\n                          className=\"mt-2\"\n                        />\n                        {mode === 'synapse' && characterValidation && characterValidation.status !== 'valid' && (\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            {characterValidation.message}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                  </TabsContent>\n                ))}\n              </Tabs>\n\n              {/* Save Button */}\n              {selectedVariation && (\n                <Button onClick={handleSaveToCalendar} disabled={saving} className=\"w-full mt-4\">\n                  {saving ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                      Saving...\n                    </>\n                  ) : (\n                    <>\n                      <Save className=\"w-4 h-4 mr-2\" />\n                      Save to Calendar\n                    </>\n                  )}\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * OpportunityFeed Component\n * Display intelligence opportunities with countdown timers and quick actions\n * Tasks 361-367\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  TrendingUp,\n  X,\n  Sparkles,\n  Clock,\n  AlertTriangle,\n  RefreshCw,\n} from 'lucide-react';\nimport { OpportunityDetectorService } from '@/services/opportunity-detector.service';\nimport { ContentGenerator } from './ContentGenerator';\nimport type { Opportunity } from '@/types/content-calendar.types';\n\ninterface OpportunityFeedProps {\n  brandId: string;\n  userId: string;\n  onGenerateFromOpportunity?: (opportunityId: string) => void;\n  autoRefreshInterval?: number; // In milliseconds, default 5 minutes\n}\n\nexport function OpportunityFeed({\n  brandId,\n  userId,\n  onGenerateFromOpportunity,\n  autoRefreshInterval = 5 * 60 * 1000,\n}: OpportunityFeedProps) {\n  const [opportunities, setOpportunities] = useState<Opportunity[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedOpportunity, setSelectedOpportunity] = useState<string | null>(null);\n  const [showGenerator, setShowGenerator] = useState(false);\n  const [dismissing, setDismissing] = useState<Set<string>>(new Set());\n\n  /**\n   * Load opportunities\n   */\n  const loadOpportunities = async () => {\n    try {\n      setLoading(true);\n      const data = await OpportunityDetectorService.getActiveOpportunities(brandId);\n      setOpportunities(data);\n    } catch (error) {\n      console.error('Failed to load opportunities:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * Load opportunities on mount and set up auto-refresh\n   */\n  useEffect(() => {\n    loadOpportunities();\n\n    const interval = setInterval(loadOpportunities, autoRefreshInterval);\n\n    return () => clearInterval(interval);\n  }, [brandId, autoRefreshInterval]);\n\n  /**\n   * Countdown timer effect\n   */\n  useEffect(() => {\n    const timer = setInterval(() => {\n      // Force re-render to update countdown timers\n      setOpportunities((prev) => [...prev]);\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  /**\n   * Dismiss opportunity\n   */\n  const handleDismiss = async (opportunityId: string) => {\n    setDismissing((prev) => new Set(prev).add(opportunityId));\n\n    try {\n      await OpportunityDetectorService.dismissOpportunity(opportunityId);\n      setOpportunities((prev) => prev.filter((opp) => opp.id !== opportunityId));\n    } catch (error) {\n      console.error('Failed to dismiss opportunity:', error);\n      alert('Failed to dismiss opportunity');\n    } finally {\n      setDismissing((prev) => {\n        const next = new Set(prev);\n        next.delete(opportunityId);\n        return next;\n      });\n    }\n  };\n\n  /**\n   * Open content generator for opportunity\n   */\n  const handleGeneratePost = (opportunityId: string) => {\n    setSelectedOpportunity(opportunityId);\n    setShowGenerator(true);\n\n    if (onGenerateFromOpportunity) {\n      onGenerateFromOpportunity(opportunityId);\n    }\n  };\n\n  /**\n   * Get countdown text\n   */\n  const getCountdownText = (opportunity: Opportunity): string => {\n    const timing = OpportunityDetectorService.getTimeUntilExpiration(opportunity);\n\n    if (timing.expired) {\n      return 'Expired';\n    }\n\n    if (!opportunity.expires_at) {\n      return 'No deadline';\n    }\n\n    if (timing.hours < 1) {\n      return `${timing.minutes}m left`;\n    } else if (timing.hours < 24) {\n      return `${timing.hours}h ${timing.minutes}m left`;\n    } else {\n      const days = Math.floor(timing.hours / 24);\n      return `${days}d ${timing.hours % 24}h left`;\n    }\n  };\n\n  /**\n   * Get countdown color\n   */\n  const getCountdownColor = (opportunity: Opportunity): string => {\n    const timing = OpportunityDetectorService.getTimeUntilExpiration(opportunity);\n\n    if (timing.expired) return 'text-red-600';\n    if (timing.hours < 6) return 'text-red-600';\n    if (timing.hours < 24) return 'text-orange-600';\n    return 'text-blue-600';\n  };\n\n  if (loading && opportunities.length === 0) {\n    return (\n      <Card className=\"p-6\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2\" />\n          <p className=\"text-sm text-muted-foreground\">Loading opportunities...</p>\n        </div>\n      </Card>\n    );\n  }\n\n  if (opportunities.length === 0) {\n    return (\n      <Card className=\"p-6\">\n        <div className=\"text-center\">\n          <TrendingUp className=\"w-12 h-12 text-muted-foreground mx-auto mb-2\" />\n          <p className=\"text-sm text-muted-foreground\">No active opportunities right now</p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            We'll notify you when new opportunities arise\n          </p>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Card className=\"p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <TrendingUp className=\"w-6 h-6 text-purple-600\" />\n            <h2 className=\"text-xl font-bold\">Intelligence Opportunities</h2>\n            <Badge variant=\"secondary\" className=\"ml-2\">\n              {opportunities.length} Active\n            </Badge>\n          </div>\n\n          <Button variant=\"outline\" size=\"sm\" onClick={loadOpportunities} disabled={loading}>\n            <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\n            Refresh\n          </Button>\n        </div>\n\n        {/* Opportunities List */}\n        <div className=\"space-y-3\">\n          {opportunities.map((opportunity) => {\n            const icon = OpportunityDetectorService.getOpportunityIcon(opportunity.type);\n            const typeLabel = OpportunityDetectorService.getOpportunityTypeLabel(opportunity.type);\n            const urgencyColor = OpportunityDetectorService.getUrgencyColor(opportunity.urgency);\n            const countdownText = getCountdownText(opportunity);\n            const countdownColor = getCountdownColor(opportunity);\n\n            return (\n              <Card key={opportunity.id} className=\"p-4 bg-white hover:shadow-md transition-shadow\">\n                <div className=\"flex items-start gap-4\">\n                  {/* Icon */}\n                  <div className=\"text-3xl flex-shrink-0\">{icon}</div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 min-w-0\">\n                    {/* Title and Badges */}\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h3 className=\"font-semibold truncate\">{opportunity.title}</h3>\n                          <Badge variant=\"outline\" className={urgencyColor}>\n                            {opportunity.urgency}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"bg-gray-100 text-gray-700\">\n                            {typeLabel}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                          {opportunity.description}\n                        </p>\n                      </div>\n\n                      {/* Dismiss Button */}\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDismiss(opportunity.id)}\n                        disabled={dismissing.has(opportunity.id)}\n                        className=\"flex-shrink-0 ml-2\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n\n                    {/* Suggested Actions */}\n                    {opportunity.suggested_actions && opportunity.suggested_actions.length > 0 && (\n                      <div className=\"mb-3\">\n                        <p className=\"text-xs font-semibold text-muted-foreground mb-1\">\n                          Suggested Actions:\n                        </p>\n                        <ul className=\"text-xs text-muted-foreground space-y-1\">\n                          {opportunity.suggested_actions.slice(0, 2).map((action, idx) => (\n                            <li key={idx} className=\"flex items-start gap-1\">\n                              <span className=\"text-purple-600\">‚Ä¢</span>\n                              <span>{action}</span>\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n\n                    {/* Footer: Countdown and Actions */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4 text-xs\">\n                        {/* Countdown Timer */}\n                        {opportunity.expires_at && (\n                          <div className={`flex items-center gap-1 font-semibold ${countdownColor}`}>\n                            <Clock className=\"w-3 h-3\" />\n                            {countdownText}\n                          </div>\n                        )}\n\n                        {/* Impact Score */}\n                        {opportunity.impact_score !== undefined && (\n                          <div className=\"flex items-center gap-1 text-muted-foreground\">\n                            <AlertTriangle className=\"w-3 h-3\" />\n                            Impact: {opportunity.impact_score}/100\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Generate Post Button */}\n                      <Button size=\"sm\" onClick={() => handleGeneratePost(opportunity.id)}>\n                        <Sparkles className=\"w-4 h-4 mr-1\" />\n                        Generate Post\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Auto-refresh indicator */}\n        <div className=\"mt-4 text-xs text-muted-foreground text-center\">\n          Auto-refreshes every {autoRefreshInterval / 60000} minutes\n        </div>\n      </Card>\n\n      {/* Content Generator Modal */}\n      {showGenerator && selectedOpportunity && (\n        <ContentGenerator\n          open={showGenerator}\n          onClose={() => {\n            setShowGenerator(false);\n            setSelectedOpportunity(null);\n          }}\n          brandId={brandId}\n          userId={userId}\n          opportunityId={selectedOpportunity}\n        />\n      )}\n    </>\n  );\n}\n","import * as React from 'react'\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport { Check } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      'peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground',\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('flex items-center justify-center text-current')}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","/**\n * Variant Modal\n *\n * Modal for displaying and selecting A/B test variants\n * Shows all variant strategies (Scarcity, FOMO, Exclusivity, Urgency, Social Proof)\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Check, Copy, Loader2 } from 'lucide-react';\nimport type { ABTestGroup, ContentVariant, SynapseContent } from '@/types/synapse/synapseContent.types';\n\ninterface VariantModalProps {\n  open: boolean;\n  onClose: () => void;\n  variants: ABTestGroup | null;\n  loading: boolean;\n  onSelectVariant: (variant: SynapseContent) => void;\n}\n\nexport function VariantModal({\n  open,\n  onClose,\n  variants,\n  loading,\n  onSelectVariant,\n}: VariantModalProps) {\n  const handleCopy = async (text: string) => {\n    await navigator.clipboard.writeText(text);\n  };\n\n  const getFullText = (variant: ContentVariant): string => {\n    const content = variant.content.content;\n    return `${content.headline}\\n\\n${content.hook}\\n\\n${content.body}\\n\\n${content.cta}`;\n  };\n\n  const getStrategyColor = (strategy: string): string => {\n    switch (strategy) {\n      case 'scarcity':\n        return 'bg-red-100 text-red-700 border-red-200';\n      case 'fomo':\n        return 'bg-orange-100 text-orange-700 border-orange-200';\n      case 'exclusivity':\n        return 'bg-purple-100 text-purple-700 border-purple-200';\n      case 'urgency':\n        return 'bg-yellow-100 text-yellow-700 border-yellow-200';\n      case 'social-proof':\n        return 'bg-blue-100 text-blue-700 border-blue-200';\n      default:\n        return 'bg-gray-100 text-gray-700 border-gray-200';\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>A/B Test Variants</DialogTitle>\n          <DialogDescription>\n            Select a variant to use or compare strategies\n          </DialogDescription>\n        </DialogHeader>\n\n        {loading && (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-purple-600\" />\n            <span className=\"ml-2\">Generating variants...</span>\n          </div>\n        )}\n\n        {!loading && variants && (\n          <div className=\"space-y-4\">\n            {/* Recommended Test */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n              <div className=\"text-sm font-semibold text-blue-900 mb-1\">\n                Recommended Testing Order\n              </div>\n              <div className=\"text-sm text-blue-700\">{variants.recommendedTest}</div>\n            </div>\n\n            {/* Variants */}\n            <div className=\"space-y-4\">\n              {variants.variants.map((variant) => (\n                <Card key={variant.id} className=\"p-4 border-2 hover:border-purple-300 transition-colors\">\n                  <div className=\"space-y-3\">\n                    {/* Header */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-lg font-bold text-purple-600\">\n                          Variant {variant.variantLetter}\n                        </span>\n                        <Badge\n                          variant=\"outline\"\n                          className={getStrategyColor(variant.strategy)}\n                        >\n                          {variant.strategy.toUpperCase()}\n                        </Badge>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleCopy(getFullText(variant))}\n                          title=\"Copy to clipboard\"\n                        >\n                          <Copy className=\"w-4 h-4\" />\n                        </Button>\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={() => {\n                            onSelectVariant(variant.content);\n                            onClose();\n                          }}\n                        >\n                          <Check className=\"w-4 h-4 mr-1\" />\n                          Use This Variant\n                        </Button>\n                      </div>\n                    </div>\n\n                    {/* Content Preview */}\n                    <div className=\"bg-gray-50 rounded-lg p-3 space-y-2\">\n                      <div>\n                        <span className=\"text-xs font-semibold text-gray-600\">Headline:</span>\n                        <p className=\"text-sm mt-1\">{variant.content.content.headline}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-xs font-semibold text-gray-600\">Hook:</span>\n                        <p className=\"text-sm mt-1\">{variant.content.content.hook}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-xs font-semibold text-gray-600\">Body:</span>\n                        <p className=\"text-sm mt-1 whitespace-pre-wrap\">\n                          {variant.content.content.body}\n                        </p>\n                      </div>\n                      <div>\n                        <span className=\"text-xs font-semibold text-gray-600\">CTA:</span>\n                        <p className=\"text-sm mt-1\">{variant.content.content.cta}</p>\n                      </div>\n                    </div>\n\n                    {/* Differences */}\n                    <div className=\"bg-purple-50 rounded p-2\">\n                      <div className=\"text-xs font-semibold text-purple-700 mb-1\">\n                        Changes from Original:\n                      </div>\n                      <ul className=\"text-xs text-purple-600 space-y-0.5\">\n                        {variant.differenceFromOriginal.map((diff, idx) => (\n                          <li key={idx}>‚Ä¢ {diff}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * Regeneration Modal\n *\n * Modal for regenerating individual content sections\n * Displays 3-5 variations per section (headline, hook, body, CTA)\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Check, Copy, Loader2, RefreshCw } from 'lucide-react';\nimport type {\n  RegenerationResult,\n  ContentSection,\n} from '@/types/synapse/synapseContent.types';\n\ninterface RegenerationModalProps {\n  open: boolean;\n  onClose: () => void;\n  section: ContentSection | null;\n  result: RegenerationResult | null;\n  loading: boolean;\n  onSelectOption: (section: ContentSection, optionIndex: number) => void;\n  onRegenerate?: () => void;\n}\n\nexport function RegenerationModal({\n  open,\n  onClose,\n  section,\n  result,\n  loading,\n  onSelectOption,\n  onRegenerate,\n}: RegenerationModalProps) {\n  const handleCopy = async (text: string) => {\n    await navigator.clipboard.writeText(text);\n  };\n\n  const getSectionLabel = (sec: ContentSection): string => {\n    return sec.charAt(0).toUpperCase() + sec.slice(1);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>\n            Regenerate {section ? getSectionLabel(section) : 'Section'}\n          </DialogTitle>\n          <DialogDescription>\n            Choose a variation to replace the current {section}\n          </DialogDescription>\n        </DialogHeader>\n\n        {loading && (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-purple-600\" />\n            <span className=\"ml-2\">Generating variations...</span>\n          </div>\n        )}\n\n        {!loading && result && (\n          <div className=\"space-y-4\">\n            {/* Original */}\n            <Card className=\"p-4 bg-gray-50 border-2\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <Badge variant=\"outline\" className=\"bg-gray-200\">\n                  Current {getSectionLabel(result.section)}\n                </Badge>\n                {onRegenerate && (\n                  <Button variant=\"ghost\" size=\"sm\" onClick={onRegenerate}>\n                    <RefreshCw className=\"w-3 h-3 mr-1\" />\n                    Regenerate Again\n                  </Button>\n                )}\n              </div>\n              <p className=\"text-sm whitespace-pre-wrap\">{result.original}</p>\n            </Card>\n\n            {/* Reasoning */}\n            {result.reasoning && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                <div className=\"text-sm font-semibold text-blue-900 mb-1\">\n                  Why Regenerate?\n                </div>\n                <div className=\"text-sm text-blue-700\">{result.reasoning}</div>\n              </div>\n            )}\n\n            {/* Regenerated Options */}\n            <div className=\"space-y-3\">\n              <div className=\"text-sm font-semibold text-gray-700\">\n                Choose a Variation ({result.regenerated.length} options):\n              </div>\n\n              {result.regenerated.map((option, index) => (\n                <Card\n                  key={index}\n                  className=\"p-4 border-2 hover:border-purple-300 transition-colors cursor-pointer\"\n                  onClick={() => {\n                    onSelectOption(result.section, index);\n                    onClose();\n                  }}\n                >\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <Badge variant=\"outline\" className=\"bg-purple-50 text-purple-700 border-purple-200\">\n                        Option {index + 1}\n                      </Badge>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleCopy(option);\n                          }}\n                          title=\"Copy to clipboard\"\n                        >\n                          <Copy className=\"w-4 h-4\" />\n                        </Button>\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            onSelectOption(result.section, index);\n                            onClose();\n                          }}\n                        >\n                          <Check className=\"w-4 h-4 mr-1\" />\n                          Use This\n                        </Button>\n                      </div>\n                    </div>\n                    <p className=\"text-sm whitespace-pre-wrap\">{option}</p>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * Provenance Modal\n *\n * Modal for displaying content provenance\n * Shows data sources, psychology reasoning, and topic correlations\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { ProvenanceViewer } from '@/components/synapse/ProvenanceViewer';\nimport type { ContentProvenance } from '@/types/synapse/synapseContent.types';\n\ninterface ProvenanceModalProps {\n  open: boolean;\n  onClose: () => void;\n  provenance: ContentProvenance | null;\n}\n\nexport function ProvenanceModal({ open, onClose, provenance }: ProvenanceModalProps) {\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Content Provenance</DialogTitle>\n          <DialogDescription>\n            See how this content was built from data and insights\n          </DialogDescription>\n        </DialogHeader>\n\n        {provenance ? (\n          <ProvenanceViewer provenance={provenance} />\n        ) : (\n          <div className=\"text-center py-8 text-gray-500\">\n            No provenance data available for this content\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * Quality Rating Component\n * Displays Synapse scores as user-friendly star ratings\n * Philosophy: \"Hide complexity, show value\"\n */\n\nimport React from 'react';\nimport { Star } from 'lucide-react';\n\n// Helper function to convert Synapse score to user-friendly rating\nfunction synapseToUserFacing(score: number): { rating: number; label: string; color: string } {\n  if (score >= 90) return { rating: 5, label: 'Excellent', color: 'text-green-600' };\n  if (score >= 75) return { rating: 4, label: 'Great', color: 'text-blue-600' };\n  if (score >= 60) return { rating: 3, label: 'Good', color: 'text-yellow-600' };\n  if (score >= 40) return { rating: 2, label: 'Fair', color: 'text-orange-600' };\n  return { rating: 1, label: 'Poor', color: 'text-red-600' };\n}\n\nexport interface QualityRatingProps {\n  score: number; // 0-100 Synapse score\n  showScore?: boolean; // Show numeric score\n  size?: 'sm' | 'md' | 'lg';\n  showLabel?: boolean;\n}\n\nexport function QualityRating({\n  score,\n  showScore = false,\n  size = 'md',\n  showLabel = true,\n}: QualityRatingProps) {\n  // Convert Synapse 0-100 score to user-facing 1-5 stars\n  const { rating, label, color } = synapseToUserFacing(score);\n\n  const sizeClasses = {\n    sm: 'w-3 h-3',\n    md: 'w-4 h-4',\n    lg: 'w-5 h-5',\n  };\n\n  const textSizeClasses = {\n    sm: 'text-xs',\n    md: 'text-sm',\n    lg: 'text-base',\n  };\n\n  const starClass = sizeClasses[size];\n  const textClass = textSizeClasses[size];\n\n  // Color mapping\n  const colorClasses: Record<string, string> = {\n    green: 'text-green-500',\n    blue: 'text-blue-500',\n    yellow: 'text-yellow-500',\n    orange: 'text-orange-500',\n    red: 'text-red-500',\n  };\n\n  const starColor = colorClasses[color] || 'text-yellow-500';\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      {/* Star Rating */}\n      <div className=\"flex items-center gap-0.5\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star\n            key={star}\n            className={`${starClass} ${star <= rating ? starColor : 'text-gray-300'} ${\n              star <= rating ? 'fill-current' : ''\n            }`}\n          />\n        ))}\n      </div>\n\n      {/* Label */}\n      {showLabel && (\n        <span className={`${textClass} font-medium`} style={{ color }}>\n          {label}\n        </span>\n      )}\n\n      {/* Numeric Score (optional - hidden by default) */}\n      {showScore && (\n        <span className={`${textClass} text-muted-foreground`}>({score}/100)</span>\n      )}\n    </div>\n  );\n}\n\n/**\n * Quality Badge - Compact version for lists\n */\nexport function QualityBadge({ score }: { score: number }) {\n  const { rating, label, color } = synapseToUserFacing(score);\n\n  const bgColors: Record<string, string> = {\n    green: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300',\n    blue: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300',\n    yellow: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300',\n    orange: 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300',\n    red: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300',\n  };\n\n  const badgeColor = bgColors[color] || bgColors.yellow;\n\n  return (\n    <div\n      className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${badgeColor}`}\n    >\n      <Star className=\"w-3 h-3 fill-current\" />\n      <span>{rating}/5</span>\n      <span className=\"hidden sm:inline\">¬∑ {label}</span>\n    </div>\n  );\n}\n","/**\n * ContentItem Component\n * Displays a content calendar item with preview, platform, status, and actions\n * Tasks 306-315\n */\n\nimport React, { useState } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Edit,\n  Trash2,\n  Copy,\n  Instagram,\n  Twitter,\n  Linkedin,\n  Facebook,\n  Mail,\n  FileText,\n  Heart,\n  MessageCircle,\n  Share2,\n  Eye,\n  TrendingUp,\n  RefreshCw,\n  Eye as ViewIcon,\n  Calendar as CalendarIcon,\n} from 'lucide-react';\nimport type { ContentItem as ContentItemType, Platform } from '@/types/content-calendar.types';\nimport { VariantModal } from './VariantModal';\nimport { RegenerationModal } from './RegenerationModal';\nimport { ProvenanceModal } from './ProvenanceModal';\nimport { QualityRating, QualityBadge } from './QualityRating';\nimport type {\n  ABTestGroup,\n  RegenerationResult,\n  ContentSection,\n  ContentProvenance,\n  SynapseContent,\n  BusinessProfile,\n} from '@/types/synapse/synapseContent.types';\nimport type { BreakthroughInsight } from '@/types/synapse/breakthrough.types';\nimport { VariantGenerator } from '@/services/synapse/generation/VariantGenerator';\nimport { SectionRegenerator } from '@/services/synapse/generation/SectionRegenerator';\n\ninterface ContentItemProps {\n  item: ContentItemType;\n  onEdit?: (item: ContentItemType) => void;\n  onDelete?: (item: ContentItemType) => void;\n  onDuplicate?: (item: ContentItemType) => void;\n  onUpdate?: (item: ContentItemType) => void;\n  onSchedule?: (item: ContentItemType, scheduledTime: string) => void;\n  compact?: boolean;\n}\n\n/**\n * Platform icon components\n */\nconst PLATFORM_ICONS: Record<Platform, React.ReactNode> = {\n  instagram: <Instagram className=\"w-4 h-4\" />,\n  twitter: <Twitter className=\"w-4 h-4\" />,\n  linkedin: <Linkedin className=\"w-4 h-4\" />,\n  facebook: <Facebook className=\"w-4 h-4\" />,\n  tiktok: (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n      <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\" />\n    </svg>\n  ),\n  email: <Mail className=\"w-4 h-4\" />,\n  blog: <FileText className=\"w-4 h-4\" />,\n};\n\n/**\n * Platform colors\n */\nconst PLATFORM_COLORS: Record<Platform, string> = {\n  instagram: 'bg-pink-500 text-white',\n  twitter: 'bg-blue-400 text-white',\n  linkedin: 'bg-blue-700 text-white',\n  facebook: 'bg-blue-600 text-white',\n  tiktok: 'bg-black text-white',\n  email: 'bg-red-500 text-white',\n  blog: 'bg-green-600 text-white',\n};\n\n/**\n * Status badge colors\n */\nconst STATUS_COLORS: Record<string, string> = {\n  draft: 'bg-gray-100 text-gray-800 border-gray-200',\n  scheduled: 'bg-orange-100 text-orange-800 border-orange-200',\n  published: 'bg-green-100 text-green-800 border-green-200',\n  failed: 'bg-red-100 text-red-800 border-red-200',\n};\n\nexport function ContentItem({\n  item,\n  onEdit,\n  onDelete,\n  onDuplicate,\n  onUpdate,\n  onSchedule,\n  compact = false,\n}: ContentItemProps) {\n  // State for modals\n  const [variantModalOpen, setVariantModalOpen] = useState(false);\n  const [regenerationModalOpen, setRegenerationModalOpen] = useState(false);\n  const [provenanceModalOpen, setProvenanceModalOpen] = useState(false);\n  const [scheduleDialogOpen, setScheduleDialogOpen] = useState(false);\n\n  // State for scheduling\n  const [scheduledDateTime, setScheduledDateTime] = useState('');\n\n  // State for generation\n  const [generatingVariants, setGeneratingVariants] = useState(false);\n  const [variants, setVariants] = useState<ABTestGroup | null>(null);\n  const [regeneratingSection, setRegeneratingSection] = useState<ContentSection | null>(null);\n  const [regenerationResult, setRegenerationResult] = useState<RegenerationResult | null>(null);\n\n  // Generators\n  const variantGenerator = new VariantGenerator();\n  const sectionRegenerator = new SectionRegenerator();\n  /**\n   * Format date/time for display\n   */\n  const formatDateTime = (dateString?: string) => {\n    if (!dateString) return 'Not scheduled';\n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n    }).format(date);\n  };\n\n  /**\n   * Handle scheduling\n   */\n  const handleSchedule = () => {\n    if (!onSchedule) return;\n\n    // Set default to tomorrow at 10am\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    tomorrow.setHours(10, 0, 0, 0);\n\n    // Format for datetime-local input (YYYY-MM-DDTHH:mm)\n    const defaultDateTime = tomorrow.toISOString().slice(0, 16);\n    setScheduledDateTime(item.scheduled_time?.slice(0, 16) || defaultDateTime);\n    setScheduleDialogOpen(true);\n  };\n\n  /**\n   * Confirm scheduling\n   */\n  const confirmSchedule = () => {\n    if (!onSchedule || !scheduledDateTime) return;\n    onSchedule(item, new Date(scheduledDateTime).toISOString());\n    setScheduleDialogOpen(false);\n  };\n\n  /**\n   * Get content preview\n   */\n  const getContentPreview = () => {\n    const maxLength = compact ? 80 : 150;\n    if (item.content_text.length <= maxLength) {\n      return item.content_text;\n    }\n    return item.content_text.substring(0, maxLength) + '...';\n  };\n\n  /**\n   * Get intelligence badge icon\n   */\n  const getIntelligenceBadgeIcon = (badge: string) => {\n    if (badge.toLowerCase().includes('synapse')) return 'üß†';\n    if (badge.toLowerCase().includes('data')) return 'üìä';\n    if (badge.toLowerCase().includes('high-performing')) return 'üéØ';\n    return '‚ú®';\n  };\n\n  /**\n   * Generate A/B variants\n   */\n  const handleGenerateVariants = async () => {\n    setGeneratingVariants(true);\n    setVariantModalOpen(true);\n\n    try {\n      // Create mock SynapseContent from ContentItem\n      // Note: This is a simplified version - in production you'd have the full SynapseContent\n      const mockContent: SynapseContent = {\n        id: item.id,\n        insightId: 'mock-insight',\n        format: 'hook-post',\n        content: {\n          headline: extractSection(item.content_text, 'headline') || item.content_text.substring(0, 100),\n          hook: extractSection(item.content_text, 'hook') || '',\n          body: extractSection(item.content_text, 'body') || item.content_text,\n          cta: extractSection(item.content_text, 'cta') || ''\n        },\n        psychology: {\n          principle: 'Curiosity Gap',\n          trigger: { type: 'curiosity', strength: 0.8 },\n          persuasionTechnique: 'Pattern Interrupt',\n          expectedReaction: 'High engagement'\n        },\n        optimization: {\n          powerWords: [],\n          framingDevice: 'Standard',\n          narrativeStructure: 'Hook ‚Üí Story ‚Üí Lesson',\n          pacing: 'medium'\n        },\n        meta: {\n          platform: [item.platform as any],\n          targetAudience: 'General',\n          tone: 'authoritative' as const\n        },\n        prediction: {\n          engagementScore: 0.8,\n          viralPotential: 0.6,\n          leadGeneration: 0.7,\n          brandImpact: 'positive',\n          confidenceLevel: 0.8\n        },\n        metadata: {\n          generatedAt: new Date(),\n          model: 'claude-3.5-sonnet',\n          iterationCount: 1\n        }\n      };\n\n      const mockBusiness: BusinessProfile = {\n        name: 'Business',\n        industry: 'General',\n        targetAudience: 'Professionals',\n        brandVoice: 'professional',\n        contentGoals: ['engagement']\n      };\n\n      const result = await variantGenerator.generateVariants(mockContent, mockBusiness);\n      setVariants(result);\n    } catch (error) {\n      console.error('Failed to generate variants:', error);\n      alert('Failed to generate variants. Please try again.');\n    } finally {\n      setGeneratingVariants(false);\n    }\n  };\n\n  /**\n   * Handle selecting a variant\n   */\n  const handleSelectVariant = (variant: SynapseContent) => {\n    if (onUpdate) {\n      const updatedItem: ContentItemType = {\n        ...item,\n        content_text: `${variant.content.headline}\\n\\n${variant.content.hook}\\n\\n${variant.content.body}\\n\\n${variant.content.cta}`\n      };\n      onUpdate(updatedItem);\n    }\n  };\n\n  /**\n   * Handle section regeneration\n   */\n  const handleRegenerateSection = async (section: ContentSection) => {\n    setRegeneratingSection(section);\n    setRegenerationModalOpen(true);\n\n    try {\n      // Create mock data for regeneration\n      const mockContent: SynapseContent = {\n        id: item.id,\n        insightId: 'mock-insight',\n        format: 'hook-post',\n        content: {\n          headline: extractSection(item.content_text, 'headline') || item.content_text.substring(0, 100),\n          hook: extractSection(item.content_text, 'hook') || '',\n          body: extractSection(item.content_text, 'body') || item.content_text,\n          cta: extractSection(item.content_text, 'cta') || ''\n        },\n        psychology: {\n          principle: 'Curiosity Gap',\n          trigger: { type: 'curiosity', strength: 0.8 },\n          persuasionTechnique: 'Pattern Interrupt',\n          expectedReaction: 'High engagement'\n        },\n        optimization: {\n          powerWords: [],\n          framingDevice: 'Standard',\n          narrativeStructure: 'Hook ‚Üí Story ‚Üí Lesson',\n          pacing: 'medium'\n        },\n        meta: {\n          platform: [item.platform as any],\n          targetAudience: 'General',\n          tone: 'authoritative' as const\n        },\n        prediction: {\n          engagementScore: 0.8,\n          viralPotential: 0.6,\n          leadGeneration: 0.7,\n          brandImpact: 'positive',\n          confidenceLevel: 0.8\n        },\n        metadata: {\n          generatedAt: new Date(),\n          model: 'claude-3.5-sonnet',\n          iterationCount: 1\n        }\n      };\n\n      const mockBusiness: BusinessProfile = {\n        name: 'Business',\n        industry: 'General',\n        targetAudience: 'Professionals',\n        brandVoice: 'professional',\n        contentGoals: ['engagement']\n      };\n\n      const mockInsight: BreakthroughInsight = {\n        id: 'mock-insight',\n        type: 'unexpected_connection',\n        thinkingStyle: 'lateral',\n        insight: 'Content insight',\n        whyProfound: 'This insight is meaningful',\n        whyNow: 'Timely and relevant',\n        contentAngle: 'Engagement',\n        expectedReaction: 'High engagement',\n        evidence: ['Supporting data'],\n        confidence: 0.85,\n        metadata: {\n          generatedAt: new Date(),\n          model: 'mock-model'\n        }\n      };\n\n      const result = await sectionRegenerator.regenerateSection(\n        mockContent,\n        section,\n        mockBusiness,\n        mockInsight\n      );\n      setRegenerationResult(result);\n    } catch (error) {\n      console.error('Failed to regenerate section:', error);\n      alert('Failed to regenerate section. Please try again.');\n      setRegenerationModalOpen(false);\n    } finally {\n      setRegeneratingSection(null);\n    }\n  };\n\n  /**\n   * Handle selecting regenerated option\n   */\n  const handleSelectRegeneration = (section: ContentSection, optionIndex: number) => {\n    if (!regenerationResult || !onUpdate) return;\n\n    const updatedContent: SynapseContent = {\n      id: item.id,\n      insightId: 'mock',\n      format: 'hook-post',\n      content: {\n        headline: section === 'headline' ? regenerationResult.regenerated[optionIndex] : extractSection(item.content_text, 'headline') || '',\n        hook: section === 'hook' ? regenerationResult.regenerated[optionIndex] : extractSection(item.content_text, 'hook') || '',\n        body: section === 'body' ? regenerationResult.regenerated[optionIndex] : extractSection(item.content_text, 'body') || item.content_text,\n        cta: section === 'cta' ? regenerationResult.regenerated[optionIndex] : extractSection(item.content_text, 'cta') || ''\n      },\n      psychology: { principle: 'Curiosity Gap', trigger: { type: 'curiosity', strength: 0.8 }, persuasionTechnique: 'Pattern Interrupt', expectedReaction: '' },\n      optimization: { powerWords: [], framingDevice: '', narrativeStructure: 'Hook ‚Üí Story ‚Üí Lesson', pacing: 'medium' },\n      meta: { platform: [item.platform as any], targetAudience: '', tone: 'authoritative' as const },\n      prediction: { engagementScore: 0, viralPotential: 0, leadGeneration: 0, brandImpact: 'neutral', confidenceLevel: 0 },\n      metadata: { generatedAt: new Date(), model: '', iterationCount: 0 }\n    };\n\n    const applied = sectionRegenerator.applyRegeneration(updatedContent, regenerationResult, optionIndex);\n\n    const updatedItem: ContentItemType = {\n      ...item,\n      content_text: `${applied.content.headline}\\n\\n${applied.content.hook}\\n\\n${applied.content.body}\\n\\n${applied.content.cta}`\n    };\n\n    onUpdate(updatedItem);\n    setRegenerationResult(null);\n  };\n\n  /**\n   * Extract section from content text (simple heuristic)\n   */\n  const extractSection = (text: string, section: ContentSection): string | null => {\n    const lines = text.split('\\n').filter(l => l.trim());\n    if (section === 'headline') return lines[0] || null;\n    if (section === 'hook') return lines[1] || null;\n    if (section === 'body') return lines.slice(2, -1).join('\\n') || null;\n    if (section === 'cta') return lines[lines.length - 1] || null;\n    return null;\n  };\n\n  /**\n   * Get provenance data (mock for now)\n   */\n  const getProvenance = (): ContentProvenance => {\n    return {\n      dataSourcesUsed: ['Google Reviews', 'Social Media'],\n      psychologyTrigger: 'Curiosity Gap',\n      frameworkStagesUsed: [\n        { stage: 'Hook', sourceField: 'emotionalHook', content: 'Opening line...' },\n        { stage: 'Story', sourceField: 'contentAngle', content: 'Main narrative...' }\n      ],\n      contentAssembly: {\n        headline: { source: 'AI Generation', field: 'headline', preview: 'Preview...' },\n        hook: { source: 'Psychology Engine', field: 'hook', preview: 'Preview...' },\n        body: { source: 'Content Framework', field: 'body', preview: 'Preview...' },\n        cta: { source: 'CTA Library', field: 'cta', preview: 'Preview...' }\n      }\n    };\n  };\n\n  return (\n    <Card className={`p-4 hover:shadow-md transition-shadow ${compact ? 'p-3' : ''}`}>\n      {/* Header: Platform and Status */}\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center gap-2\">\n          {/* Platform Badge */}\n          <Badge className={`${PLATFORM_COLORS[item.platform]} px-2 py-1`}>\n            <span className=\"flex items-center gap-1\">\n              {PLATFORM_ICONS[item.platform]}\n              <span className=\"capitalize text-xs\">{item.platform}</span>\n            </span>\n          </Badge>\n\n          {/* Status Badge */}\n          <Badge variant=\"outline\" className={STATUS_COLORS[item.status]}>\n            {item.status}\n          </Badge>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex items-center gap-1\">\n          {onEdit && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => onEdit(item)}\n              title=\"Edit content\"\n            >\n              <Edit className=\"w-4 h-4\" />\n            </Button>\n          )}\n          {onDuplicate && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => onDuplicate(item)}\n              title=\"Duplicate content\"\n            >\n              <Copy className=\"w-4 h-4\" />\n            </Button>\n          )}\n          {onSchedule && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleSchedule}\n              title=\"Schedule content\"\n              className=\"text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\n            >\n              <CalendarIcon className=\"w-4 h-4\" />\n            </Button>\n          )}\n          {onDelete && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => onDelete(item)}\n              title=\"Delete content\"\n              className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n            >\n              <Trash2 className=\"w-4 h-4\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Visual Preview */}\n      {item.image_url && (\n        <div className=\"mb-3 rounded-lg overflow-hidden bg-gray-100\">\n          <img\n            src={item.image_url}\n            alt=\"Generated visual\"\n            className=\"w-full h-auto object-cover transition-opacity duration-200\"\n            onLoad={(e) => {\n              // Fade in when loaded\n              const target = e.target as HTMLImageElement;\n              target.style.opacity = '1';\n            }}\n            onError={(e) => {\n              // Handle broken images gracefully\n              const target = e.target as HTMLImageElement;\n              const parent = target.parentElement;\n              if (parent) {\n                parent.style.display = 'none';\n              }\n            }}\n            loading=\"lazy\"\n            style={{ opacity: 0 }}\n          />\n        </div>\n      )}\n\n      {/* Content Preview */}\n      <div className=\"mb-3\">\n        <p className=\"text-sm text-foreground leading-relaxed\">{getContentPreview()}</p>\n      </div>\n\n      {/* Intelligence Badges */}\n      {item.intelligence_badges && item.intelligence_badges.length > 0 && (\n        <div className=\"flex flex-wrap gap-1 mb-3\">\n          {item.intelligence_badges.map((badge, index) => (\n            <Badge\n              key={index}\n              variant=\"outline\"\n              className=\"text-xs bg-purple-50 text-purple-700 border-purple-200\"\n            >\n              <span className=\"mr-1\">{getIntelligenceBadgeIcon(badge)}</span>\n              {badge}\n            </Badge>\n          ))}\n        </div>\n      )}\n\n      {/* Quality Rating */}\n      {item.synapse_score !== undefined && item.synapse_score > 0 && (\n        <div className=\"mb-3\">\n          <QualityRating score={item.synapse_score} size=\"sm\" showLabel={true} />\n        </div>\n      )}\n\n      {/* Scheduled Time */}\n      <div className=\"mb-3 text-sm text-muted-foreground\">\n        <span className=\"font-semibold\">\n          {item.status === 'published' ? 'Published: ' : 'Scheduled: '}\n        </span>\n        {formatDateTime(item.status === 'published' ? item.published_time : item.scheduled_time)}\n      </div>\n\n      {/* Engagement Metrics (if published) */}\n      {item.status === 'published' && item.engagement_metrics && (\n        <div className=\"flex items-center gap-4 pt-3 border-t\">\n          {item.engagement_metrics.likes > 0 && (\n            <div className=\"flex items-center gap-1 text-sm\">\n              <Heart className=\"w-4 h-4 text-red-500\" />\n              <span>{item.engagement_metrics.likes.toLocaleString()}</span>\n            </div>\n          )}\n          {item.engagement_metrics.comments > 0 && (\n            <div className=\"flex items-center gap-1 text-sm\">\n              <MessageCircle className=\"w-4 h-4 text-blue-500\" />\n              <span>{item.engagement_metrics.comments.toLocaleString()}</span>\n            </div>\n          )}\n          {item.engagement_metrics.shares > 0 && (\n            <div className=\"flex items-center gap-1 text-sm\">\n              <Share2 className=\"w-4 h-4 text-green-500\" />\n              <span>{item.engagement_metrics.shares.toLocaleString()}</span>\n            </div>\n          )}\n          {item.engagement_metrics.reach > 0 && (\n            <div className=\"flex items-center gap-1 text-sm\">\n              <Eye className=\"w-4 h-4 text-purple-500\" />\n              <span>{item.engagement_metrics.reach.toLocaleString()}</span>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Error Message (if failed) */}\n      {item.status === 'failed' && item.error_message && (\n        <div className=\"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700\">\n          <span className=\"font-semibold\">Error: </span>\n          {item.error_message}\n        </div>\n      )}\n\n      {/* Synapse Enhancement Buttons */}\n      {!compact && (item.generation_mode === 'synapse' || item.intelligence_badges?.some(b => b.includes('Synapse'))) && (\n        <div className=\"mt-4 pt-4 border-t border-gray-200 flex flex-wrap gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleGenerateVariants}\n            disabled={generatingVariants}\n            className=\"flex items-center gap-1 text-xs\"\n          >\n            <TrendingUp className=\"w-3 h-3\" />\n            Generate Variants\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => handleRegenerateSection('headline')}\n            className=\"flex items-center gap-1 text-xs\"\n          >\n            <RefreshCw className=\"w-3 h-3\" />\n            Regenerate Headline\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => handleRegenerateSection('body')}\n            className=\"flex items-center gap-1 text-xs\"\n          >\n            <RefreshCw className=\"w-3 h-3\" />\n            Regenerate Body\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setProvenanceModalOpen(true)}\n            className=\"flex items-center gap-1 text-xs\"\n          >\n            <ViewIcon className=\"w-3 h-3\" />\n            View Sources\n          </Button>\n        </div>\n      )}\n\n      {/* Modals */}\n      <VariantModal\n        open={variantModalOpen}\n        onClose={() => setVariantModalOpen(false)}\n        variants={variants}\n        loading={generatingVariants}\n        onSelectVariant={handleSelectVariant}\n      />\n\n      <RegenerationModal\n        open={regenerationModalOpen}\n        onClose={() => setRegenerationModalOpen(false)}\n        section={regeneratingSection}\n        result={regenerationResult}\n        loading={!!regeneratingSection}\n        onSelectOption={handleSelectRegeneration}\n        onRegenerate={() => regeneratingSection && handleRegenerateSection(regeneratingSection)}\n      />\n\n      <ProvenanceModal\n        open={provenanceModalOpen}\n        onClose={() => setProvenanceModalOpen(false)}\n        provenance={getProvenance()}\n      />\n\n      {/* Schedule Dialog */}\n      <Dialog open={scheduleDialogOpen} onOpenChange={setScheduleDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Schedule Content</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"schedule-datetime\">Date and Time</Label>\n              <Input\n                id=\"schedule-datetime\"\n                type=\"datetime-local\"\n                value={scheduledDateTime}\n                onChange={(e) => setScheduledDateTime(e.target.value)}\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setScheduleDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button onClick={confirmSchedule}>\n              Schedule\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </Card>\n  );\n}\n","/**\n * BulkContentGenerator Component\n * Generate multiple content pieces at once with distribution settings\n * Tasks 332-340\n */\n\nimport React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Card } from '@/components/ui/card';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Badge } from '@/components/ui/badge';\nimport { Calendar, Sparkles, Zap, CheckCircle2, XCircle } from 'lucide-react';\nimport { ContentCalendarService } from '@/services/content-calendar.service';\nimport { ContentItem } from './ContentItem';\nimport type {\n  Platform,\n  GenerationMode,\n  ContentPillar,\n  ContentItem as ContentItemType,\n} from '@/types/content-calendar.types';\n\ninterface BulkContentGeneratorProps {\n  open: boolean;\n  onClose: () => void;\n  brandId: string;\n  userId: string;\n  pillars?: ContentPillar[];\n  onContentCreated?: () => void;\n}\n\n/**\n * Platform options for selection\n */\nconst PLATFORMS: { value: Platform; label: string; icon: string }[] = [\n  { value: 'instagram', label: 'Instagram', icon: 'üì∑' },\n  { value: 'twitter', label: 'Twitter', icon: 'üê¶' },\n  { value: 'linkedin', label: 'LinkedIn', icon: 'üíº' },\n  { value: 'facebook', label: 'Facebook', icon: 'üë•' },\n];\n\nexport function BulkContentGenerator({\n  open,\n  onClose,\n  brandId,\n  userId,\n  pillars = [],\n  onContentCreated,\n}: BulkContentGeneratorProps) {\n  const [step, setStep] = useState<'config' | 'review' | 'complete'>('config');\n  const [dateRange, setDateRange] = useState({\n    start: new Date().toISOString().split('T')[0],\n    end: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n  });\n  const [selectedPlatforms, setSelectedPlatforms] = useState<Platform[]>(['instagram', 'facebook']);\n  const [mode, setMode] = useState<GenerationMode>('marba');\n  const [pillarDistribution, setPillarDistribution] = useState<\n    { pillarId: string; percentage: number }[]\n  >([]);\n  const [generating, setGenerating] = useState(false);\n  const [generatedContent, setGeneratedContent] = useState<ContentItemType[]>([]);\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n  const [scheduling, setScheduling] = useState(false);\n\n  /**\n   * Initialize pillar distribution when pillars change\n   */\n  React.useEffect(() => {\n    if (pillars.length > 0 && pillarDistribution.length === 0) {\n      const equalPercentage = Math.floor(100 / pillars.length);\n      setPillarDistribution(\n        pillars.map((pillar, index) => ({\n          pillarId: pillar.id,\n          percentage: index === 0 ? 100 - equalPercentage * (pillars.length - 1) : equalPercentage,\n        }))\n      );\n    }\n  }, [pillars, pillarDistribution.length]);\n\n  /**\n   * Toggle platform selection\n   */\n  const togglePlatform = (platform: Platform) => {\n    setSelectedPlatforms((prev) =>\n      prev.includes(platform) ? prev.filter((p) => p !== platform) : [...prev, platform]\n    );\n  };\n\n  /**\n   * Update pillar percentage\n   */\n  const updatePillarPercentage = (pillarId: string, percentage: number) => {\n    setPillarDistribution((prev) =>\n      prev.map((p) => (p.pillarId === pillarId ? { ...p, percentage } : p))\n    );\n  };\n\n  /**\n   * Generate bulk content\n   */\n  const handleGenerate = async () => {\n    if (selectedPlatforms.length === 0) {\n      alert('Please select at least one platform');\n      return;\n    }\n\n    const total = pillarDistribution.reduce((sum, p) => sum + p.percentage, 0);\n    if (Math.abs(total - 100) > 1) {\n      alert('Pillar percentages must total 100%');\n      return;\n    }\n\n    setGenerating(true);\n\n    try {\n      const result = await ContentCalendarService.generateBulkContent({\n        brandId,\n        dateRange,\n        platforms: selectedPlatforms,\n        pillarDistribution,\n        mode,\n        postsPerDay: 1,\n      });\n\n      setGeneratedContent(result.items);\n      setSelectedItems(new Set(result.items.map((item) => item.id)));\n      setStep('review');\n    } catch (error) {\n      console.error('Failed to generate bulk content:', error);\n      alert('Failed to generate content. Please try again.');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  /**\n   * Toggle item selection\n   */\n  const toggleItemSelection = (itemId: string) => {\n    setSelectedItems((prev) => {\n      const next = new Set(prev);\n      if (next.has(itemId)) {\n        next.delete(itemId);\n      } else {\n        next.add(itemId);\n      }\n      return next;\n    });\n  };\n\n  /**\n   * Schedule all selected items\n   */\n  const handleScheduleAll = async () => {\n    const itemsToSchedule = generatedContent.filter((item) => selectedItems.has(item.id));\n\n    if (itemsToSchedule.length === 0) {\n      alert('Please select at least one item to schedule');\n      return;\n    }\n\n    setScheduling(true);\n\n    try {\n      await ContentCalendarService.bulkSchedule(itemsToSchedule, 'optimal_times');\n      setStep('complete');\n\n      if (onContentCreated) {\n        onContentCreated();\n      }\n    } catch (error) {\n      console.error('Failed to schedule content:', error);\n      alert('Failed to schedule some items. Please try again.');\n    } finally {\n      setScheduling(false);\n    }\n  };\n\n  /**\n   * Calculate days covered\n   */\n  const getDaysCovered = () => {\n    const start = new Date(dateRange.start);\n    const end = new Date(dateRange.end);\n    return Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n  };\n\n  /**\n   * Reset and close\n   */\n  const handleClose = () => {\n    setStep('config');\n    setGeneratedContent([]);\n    setSelectedItems(new Set());\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-5xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Bulk Content Generation</DialogTitle>\n          <DialogDescription>\n            Generate multiple posts across platforms and date ranges\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* Configuration Step */}\n        {step === 'config' && (\n          <div className=\"space-y-6\">\n            {/* Date Range */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Start Date</Label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.start}\n                  onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>End Date</Label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.end}\n                  onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <div className=\"text-sm text-muted-foreground\">\n              <Calendar className=\"w-4 h-4 inline mr-1\" />\n              {getDaysCovered()} days\n            </div>\n\n            {/* Platform Selection */}\n            <div>\n              <Label>Select Platforms</Label>\n              <div className=\"grid grid-cols-2 gap-3 mt-2\">\n                {PLATFORMS.map((platform) => (\n                  <Card\n                    key={platform.value}\n                    className={`p-4 cursor-pointer transition-all ${\n                      selectedPlatforms.includes(platform.value)\n                        ? 'border-primary bg-primary/5'\n                        : 'hover:border-primary/50'\n                    }`}\n                    onClick={() => togglePlatform(platform.value)}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Checkbox checked={selectedPlatforms.includes(platform.value)} />\n                      <span className=\"text-2xl\">{platform.icon}</span>\n                      <span className=\"font-medium\">{platform.label}</span>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            </div>\n\n            {/* Generation Mode */}\n            <div>\n              <Label>Generation Mode</Label>\n              <div className=\"flex gap-2 mt-2\">\n                <Button\n                  variant={mode === 'marba' ? 'default' : 'outline'}\n                  onClick={() => setMode('marba')}\n                  className=\"flex-1\"\n                >\n                  <Zap className=\"w-4 h-4 mr-2\" />\n                  MARBA (Fast)\n                </Button>\n                <Button\n                  variant={mode === 'synapse' ? 'default' : 'outline'}\n                  onClick={() => setMode('synapse')}\n                  className=\"flex-1\"\n                >\n                  <Sparkles className=\"w-4 h-4 mr-2\" />\n                  Synapse (Enhanced)\n                </Button>\n              </div>\n            </div>\n\n            {/* Pillar Distribution */}\n            {pillars.length > 0 && (\n              <div>\n                <Label>Content Mix (Pillar Distribution)</Label>\n                <div className=\"space-y-3 mt-2\">\n                  {pillarDistribution.map((dist) => {\n                    const pillar = pillars.find((p) => p.id === dist.pillarId);\n                    if (!pillar) return null;\n\n                    return (\n                      <div key={dist.pillarId}>\n                        <div className=\"flex items-center justify-between mb-1\">\n                          <span className=\"text-sm font-medium\">{pillar.name}</span>\n                          <span className=\"text-sm font-bold\">{dist.percentage}%</span>\n                        </div>\n                        <Input\n                          type=\"range\"\n                          min=\"0\"\n                          max=\"100\"\n                          value={dist.percentage}\n                          onChange={(e) =>\n                            updatePillarPercentage(dist.pillarId, parseInt(e.target.value))\n                          }\n                        />\n                      </div>\n                    );\n                  })}\n                  <div className=\"text-xs text-muted-foreground\">\n                    Total:{' '}\n                    {pillarDistribution.reduce((sum, p) => sum + p.percentage, 0)}%\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Generate Button */}\n            <Button onClick={handleGenerate} disabled={generating} className=\"w-full\">\n              {generating ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                  Generating {selectedPlatforms.length * getDaysCovered()} posts...\n                </>\n              ) : (\n                <>\n                  <Sparkles className=\"w-4 h-4 mr-2\" />\n                  Generate Content\n                </>\n              )}\n            </Button>\n          </div>\n        )}\n\n        {/* Review Step */}\n        {step === 'review' && (\n          <div className=\"space-y-6\">\n            {/* Summary */}\n            <Card className=\"p-4 bg-blue-50 border-blue-200\">\n              <h3 className=\"font-semibold mb-2\">Generation Summary</h3>\n              <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-muted-foreground\">Total Posts:</span>\n                  <span className=\"font-bold ml-2\">{generatedContent.length}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground\">Platforms:</span>\n                  <span className=\"font-bold ml-2\">{selectedPlatforms.length}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground\">Days:</span>\n                  <span className=\"font-bold ml-2\">{getDaysCovered()}</span>\n                </div>\n              </div>\n            </Card>\n\n            {/* Actions */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Checkbox\n                  checked={selectedItems.size === generatedContent.length}\n                  onCheckedChange={(checked) => {\n                    setSelectedItems(\n                      checked ? new Set(generatedContent.map((item) => item.id)) : new Set()\n                    );\n                  }}\n                />\n                <Label>\n                  Select All ({selectedItems.size} of {generatedContent.length})\n                </Label>\n              </div>\n\n              <Button onClick={handleScheduleAll} disabled={scheduling || selectedItems.size === 0}>\n                {scheduling ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                    Scheduling...\n                  </>\n                ) : (\n                  <>\n                    <Calendar className=\"w-4 h-4 mr-2\" />\n                    Schedule {selectedItems.size} Posts\n                  </>\n                )}\n              </Button>\n            </div>\n\n            {/* Content Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto\">\n              {generatedContent.map((item) => (\n                <div key={item.id} className=\"relative\">\n                  <div className=\"absolute top-2 left-2 z-10\">\n                    <Checkbox\n                      checked={selectedItems.has(item.id)}\n                      onCheckedChange={() => toggleItemSelection(item.id)}\n                    />\n                  </div>\n                  <ContentItem item={item} compact />\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Complete Step */}\n        {step === 'complete' && (\n          <div className=\"text-center py-8\">\n            <CheckCircle2 className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\n            <h3 className=\"text-2xl font-bold mb-2\">Content Scheduled Successfully!</h3>\n            <p className=\"text-muted-foreground mb-6\">\n              {selectedItems.size} posts have been scheduled across {selectedPlatforms.length}{' '}\n              platforms for the next {getDaysCovered()} days.\n            </p>\n\n            <div className=\"flex gap-2 justify-center\">\n              <Button onClick={handleClose}>Close</Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setStep('config');\n                  setGeneratedContent([]);\n                  setSelectedItems(new Set());\n                }}\n              >\n                Generate More\n              </Button>\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * PublishingQueue Component\n * Display upcoming scheduled posts with status indicators and actions\n * Tasks 349-360\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Clock,\n  CheckCircle,\n  XCircle,\n  RefreshCw,\n  Send,\n  Calendar as CalendarIcon,\n  AlertCircle,\n} from 'lucide-react';\nimport { ContentCalendarService } from '@/services/content-calendar.service';\nimport { ContentItem } from './ContentItem';\nimport type { ContentItem as ContentItemType, PublishingQueueItem } from '@/types/content-calendar.types';\n\ninterface PublishingQueueProps {\n  brandId: string;\n  days?: number;\n  enableApprovalWorkflow?: boolean;\n  onRefresh?: () => void;\n}\n\nexport function PublishingQueue({\n  brandId,\n  days = 7,\n  enableApprovalWorkflow = false,\n  onRefresh,\n}: PublishingQueueProps) {\n  const [queueItems, setQueueItems] = useState<PublishingQueueItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [publishing, setPublishing] = useState<Set<string>>(new Set());\n\n  /**\n   * Load publishing queue\n   */\n  const loadQueue = async () => {\n    setLoading(true);\n    try {\n      console.log('[PublishingQueue] Loading queue for brand:', brandId);\n      const items = await ContentCalendarService.getPublishingQueue(brandId, days);\n      console.log('[PublishingQueue] Loaded items from database:', items.length);\n\n      // Transform to publishing queue items with status\n      const queueItems: PublishingQueueItem[] = items.map((item) => ({\n        content: item,\n        status: getItemStatus(item),\n        retry_count: 0,\n      }));\n\n      console.log('[PublishingQueue] Queue items after transform:', {\n        total: queueItems.length,\n        drafts: queueItems.filter(q => q.content.status === 'draft').length,\n        scheduled: queueItems.filter(q => q.content.status === 'scheduled').length\n      });\n\n      setQueueItems(queueItems);\n    } catch (error) {\n      console.error('[PublishingQueue] Failed to load publishing queue:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * Get item status based on scheduled time\n   */\n  const getItemStatus = (\n    item: ContentItemType\n  ): 'pending' | 'publishing' | 'published' | 'failed' => {\n    // Use the actual status from the item\n    if (item.status === 'published') return 'published';\n    if (item.status === 'failed') return 'failed';\n    if (item.status === 'draft') return 'pending'; // Drafts are pending\n\n    // Check if it's time to publish for scheduled items\n    if (item.scheduled_time) {\n      const scheduledTime = new Date(item.scheduled_time);\n      const now = new Date();\n\n      if (scheduledTime <= now && scheduledTime > new Date(now.getTime() - 5 * 60 * 1000)) {\n        return 'publishing';\n      }\n    }\n\n    return 'pending';\n  };\n\n  /**\n   * Load queue on mount and set up refresh interval\n   */\n  useEffect(() => {\n    loadQueue();\n\n    // Refresh every 30 seconds for real-time updates\n    const interval = setInterval(loadQueue, 30000);\n\n    return () => clearInterval(interval);\n  }, [brandId, days]);\n\n  /**\n   * Manually publish content\n   */\n  const handlePublish = async (item: ContentItemType) => {\n    setPublishing((prev) => new Set(prev).add(item.id));\n\n    try {\n      await ContentCalendarService.publishContent(item.id);\n      await loadQueue();\n\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (error) {\n      console.error('Failed to publish content:', error);\n      alert('Failed to publish content. Please try again.');\n    } finally {\n      setPublishing((prev) => {\n        const next = new Set(prev);\n        next.delete(item.id);\n        return next;\n      });\n    }\n  };\n\n  /**\n   * Schedule content\n   */\n  const handleSchedule = async (item: ContentItemType, scheduledTime: string) => {\n    try {\n      await ContentCalendarService.updateContentItem(item.id, {\n        scheduled_time: scheduledTime,\n        status: 'scheduled',\n      });\n      await loadQueue();\n\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (error) {\n      console.error('Failed to schedule content:', error);\n      alert('Failed to schedule content. Please try again.');\n    }\n  };\n\n  /**\n   * Retry failed publishing\n   */\n  const handleRetry = async (item: ContentItemType) => {\n    await handlePublish(item);\n  };\n\n  /**\n   * Reschedule content (or schedule drafts)\n   */\n  const handleReschedule = async (item: ContentItemType) => {\n    const isDraft = item.status === 'draft';\n    const promptText = isDraft\n      ? 'Schedule this post (YYYY-MM-DD HH:MM):'\n      : 'Enter new date/time (YYYY-MM-DD HH:MM):';\n    const defaultValue = item.scheduled_time || '';\n\n    const newTime = prompt(promptText, defaultValue);\n    if (!newTime) return;\n\n    try {\n      await ContentCalendarService.scheduleContent(item.id, new Date(newTime).toISOString());\n      await loadQueue();\n\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (error: any) {\n      console.error('Failed to schedule:', error);\n      alert(`Failed to schedule: ${error.message}`);\n    }\n  };\n\n  /**\n   * Get status icon\n   */\n  const getStatusIcon = (status: PublishingQueueItem['status']) => {\n    switch (status) {\n      case 'pending':\n        return <Clock className=\"w-5 h-5 text-blue-500\" />;\n      case 'publishing':\n        return (\n          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-orange-500\" />\n        );\n      case 'published':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'failed':\n        return <XCircle className=\"w-5 h-5 text-red-500\" />;\n    }\n  };\n\n  /**\n   * Get status badge\n   */\n  const getStatusBadge = (status: PublishingQueueItem['status']) => {\n    const styles = {\n      pending: 'bg-blue-100 text-blue-800 border-blue-200',\n      publishing: 'bg-orange-100 text-orange-800 border-orange-200',\n      published: 'bg-green-100 text-green-800 border-green-200',\n      failed: 'bg-red-100 text-red-800 border-red-200',\n    };\n\n    return (\n      <Badge variant=\"outline\" className={styles[status]}>\n        {status}\n      </Badge>\n    );\n  };\n\n  /**\n   * Format time until publish\n   */\n  const getTimeUntilPublish = (scheduledTime?: string) => {\n    if (!scheduledTime) return 'Not scheduled';\n\n    const now = new Date();\n    const scheduled = new Date(scheduledTime);\n    const diffMs = scheduled.getTime() - now.getTime();\n\n    if (diffMs < 0) {\n      return 'Overdue';\n    }\n\n    const hours = Math.floor(diffMs / (1000 * 60 * 60));\n    const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n\n    if (hours < 1) {\n      return `in ${minutes}m`;\n    } else if (hours < 24) {\n      return `in ${hours}h ${minutes}m`;\n    } else {\n      const days = Math.floor(hours / 24);\n      return `in ${days}d ${hours % 24}h`;\n    }\n  };\n\n  /**\n   * Group items by date\n   */\n  const groupedItems = queueItems.reduce((acc, item) => {\n    const date = item.content.scheduled_time?.split('T')[0] || 'unscheduled';\n    if (!acc[date]) {\n      acc[date] = [];\n    }\n    acc[date].push(item);\n    return acc;\n  }, {} as Record<string, PublishingQueueItem[]>);\n\n  return (\n    <Card className=\"p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Content Queue</h2>\n          <p className=\"text-sm text-muted-foreground\">\n            {queueItems.length} {queueItems.length === 1 ? 'post' : 'posts'} (drafts & scheduled)\n          </p>\n        </div>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={loadQueue} disabled={loading}>\n          <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\n          Refresh\n        </Button>\n      </div>\n\n      {/* Status Summary */}\n      <div className=\"grid grid-cols-4 gap-4 mb-6\">\n        {[\n          { status: 'pending', label: 'Pending', icon: Clock, color: 'text-blue-500' },\n          { status: 'publishing', label: 'Publishing', icon: Send, color: 'text-orange-500' },\n          { status: 'published', label: 'Published', icon: CheckCircle, color: 'text-green-500' },\n          { status: 'failed', label: 'Failed', icon: XCircle, color: 'text-red-500' },\n        ].map(({ status, label, icon: Icon, color }) => {\n          const count = queueItems.filter((item) => item.status === status).length;\n          return (\n            <Card key={status} className=\"p-4\">\n              <div className=\"flex items-center gap-2\">\n                <Icon className={`w-5 h-5 ${color}`} />\n                <div>\n                  <p className=\"text-2xl font-bold\">{count}</p>\n                  <p className=\"text-xs text-muted-foreground\">{label}</p>\n                </div>\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Queue Items */}\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Loading queue...</p>\n        </div>\n      ) : queueItems.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <CalendarIcon className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">No content in queue</p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {Object.entries(groupedItems)\n            .sort(([a], [b]) => {\n              // Put 'unscheduled' first, then sort dates\n              if (a === 'unscheduled') return -1;\n              if (b === 'unscheduled') return 1;\n              return a.localeCompare(b);\n            })\n            .map(([date, items]) => (\n              <div key={date}>\n                <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n                  <CalendarIcon className=\"w-4 h-4\" />\n                  {date === 'unscheduled'\n                    ? 'Drafts (Not Scheduled)'\n                    : new Date(date).toLocaleDateString('en-US', {\n                        weekday: 'long',\n                        month: 'long',\n                        day: 'numeric',\n                      })}\n                </h3>\n\n                <div className=\"space-y-3\">\n                  {items.map((queueItem) => (\n                    <Card key={queueItem.content.id} className=\"p-4\">\n                      <div className=\"flex items-start gap-4\">\n                        {/* Status Icon */}\n                        <div className=\"mt-1\">{getStatusIcon(queueItem.status)}</div>\n\n                        {/* Content Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <div className=\"flex items-center gap-2\">\n                              {getStatusBadge(queueItem.status)}\n                              <span className=\"text-sm text-muted-foreground\">\n                                {getTimeUntilPublish(queueItem.content.scheduled_time)}\n                              </span>\n                            </div>\n\n                            {/* Actions */}\n                            <div className=\"flex items-center gap-2\">\n                              {queueItem.status === 'pending' && (\n                                <>\n                                  {/* Show Schedule button for drafts, Publish Now for scheduled */}\n                                  {queueItem.content.status === 'draft' ? (\n                                    <Button\n                                      size=\"sm\"\n                                      onClick={() => handleReschedule(queueItem.content)}\n                                    >\n                                      <Clock className=\"w-4 h-4 mr-1\" />\n                                      Schedule\n                                    </Button>\n                                  ) : (\n                                    <>\n                                      {enableApprovalWorkflow && (\n                                        <Button size=\"sm\" variant=\"outline\">\n                                          <CheckCircle className=\"w-4 h-4 mr-1\" />\n                                          Approve\n                                        </Button>\n                                      )}\n                                      <Button\n                                        size=\"sm\"\n                                        onClick={() => handlePublish(queueItem.content)}\n                                        disabled={publishing.has(queueItem.content.id)}\n                                      >\n                                        <Send className=\"w-4 h-4 mr-1\" />\n                                        Publish Now\n                                      </Button>\n                                    </>\n                                  )}\n                                </>\n                              )}\n\n                              {queueItem.status === 'failed' && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleRetry(queueItem.content)}\n                                  disabled={publishing.has(queueItem.content.id)}\n                                >\n                                  <RefreshCw className=\"w-4 h-4 mr-1\" />\n                                  Retry\n                                </Button>\n                              )}\n\n                              {queueItem.status !== 'published' && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleReschedule(queueItem.content)}\n                                >\n                                  <Clock className=\"w-4 h-4 mr-1\" />\n                                  Reschedule\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n\n                          {/* Content Preview */}\n                          <ContentItem\n                            item={queueItem.content}\n                            compact\n                            onSchedule={handleSchedule}\n                          />\n\n                          {/* Error Display */}\n                          {queueItem.error && (\n                            <div className=\"mt-2 p-2 bg-red-50 border border-red-200 rounded flex items-start gap-2\">\n                              <AlertCircle className=\"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0\" />\n                              <div className=\"text-sm text-red-700\">\n                                <span className=\"font-semibold\">Publishing Error: </span>\n                                {queueItem.error}\n                                {queueItem.retry_count && queueItem.retry_count > 0 && (\n                                  <span className=\"block mt-1 text-xs\">\n                                    Retried {queueItem.retry_count} time(s)\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            ))}\n        </div>\n      )}\n\n      {/* Auto-refresh indicator */}\n      <div className=\"mt-4 text-xs text-muted-foreground text-center\">\n        Auto-refreshes every 30 seconds ‚Ä¢ Real-time status updates\n      </div>\n    </Card>\n  );\n}\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","import * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\nimport { cn } from '@/lib/utils'\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      'relative h-4 w-full overflow-hidden rounded-full bg-secondary',\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","/**\n * Industry Selector Component\n * Allows users to select their industry for content generation\n * Task 14 - Production Ready Implementation\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Briefcase } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\n\nexport interface IndustrySelectorProps {\n  brandId: string;\n  value?: string;\n  onChange: (industry: string) => void;\n  autoSave?: boolean;\n}\n\nconst INDUSTRIES = [\n  { id: 'restaurant', name: 'Restaurant / Food Service', emoji: 'üçΩÔ∏è' },\n  { id: 'cpa', name: 'CPA / Accounting', emoji: 'üìä' },\n  { id: 'realtor', name: 'Real Estate', emoji: 'üè†' },\n  { id: 'dentist', name: 'Dental / Healthcare', emoji: 'ü¶∑' },\n  { id: 'consultant', name: 'Consulting / Professional Services', emoji: 'üíº' },\n  { id: 'attorney', name: 'Legal Services / Attorney', emoji: '‚öñÔ∏è' },\n  { id: 'contractor', name: 'Contractor / Construction', emoji: 'üî®' },\n  { id: 'salon', name: 'Beauty Salon / Spa', emoji: 'üíá' },\n  { id: 'fitness', name: 'Gym / Fitness Center', emoji: 'üí™' },\n  { id: 'retail', name: 'Retail Store', emoji: 'üõçÔ∏è' },\n  { id: 'plumber', name: 'Plumbing Services', emoji: 'üö∞' },\n  { id: 'electrician', name: 'Electrical Services', emoji: '‚ö°' },\n  { id: 'hvac', name: 'HVAC Services', emoji: '‚ùÑÔ∏è' },\n  { id: 'auto', name: 'Auto Repair / Mechanic', emoji: 'üîß' },\n  { id: 'cleaning', name: 'Cleaning Services', emoji: 'üßπ' },\n];\n\nexport function IndustrySelector({\n  brandId,\n  value,\n  onChange,\n  autoSave = false,\n}: IndustrySelectorProps) {\n  const [selectedIndustry, setSelectedIndustry] = useState<string>(value || '');\n  const [isSaving, setIsSaving] = useState(false);\n\n  useEffect(() => {\n    if (value) {\n      setSelectedIndustry(value);\n    }\n  }, [value]);\n\n  const handleChange = async (industry: string) => {\n    setSelectedIndustry(industry);\n    onChange(industry);\n\n    // Auto-save to database if enabled\n    if (autoSave && brandId) {\n      setIsSaving(true);\n      try {\n        const { error } = await supabase\n          .from('brands')\n          .update({ industry })\n          .eq('id', brandId);\n\n        if (error) {\n          console.error('Failed to save industry:', error);\n        }\n      } catch (error) {\n        console.error('Error saving industry:', error);\n      } finally {\n        setIsSaving(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-sm font-medium\">Industry</Label>\n      <Select value={selectedIndustry} onValueChange={handleChange} disabled={isSaving}>\n        <SelectTrigger className=\"w-full\">\n          <SelectValue placeholder=\"Select your industry\" />\n        </SelectTrigger>\n        <SelectContent>\n          {INDUSTRIES.map((industry) => (\n            <SelectItem key={industry.id} value={industry.id}>\n              <span className=\"flex items-center gap-2\">\n                <span>{industry.emoji}</span>\n                <span>{industry.name}</span>\n              </span>\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n      {isSaving && <p className=\"text-xs text-muted-foreground\">Saving...</p>}\n    </div>\n  );\n}\n\n/**\n * Industry Selector Card - Full card variant for onboarding/settings\n */\nexport function IndustrySelectorCard({\n  brandId,\n  value,\n  onChange,\n  autoSave = false,\n}: IndustrySelectorProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Briefcase className=\"h-5 w-5\" />\n          Select Your Industry\n        </CardTitle>\n        <CardDescription>\n          This helps us create content that's perfect for your business type\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <IndustrySelector\n          brandId={brandId}\n          value={value}\n          onChange={onChange}\n          autoSave={autoSave}\n        />\n      </CardContent>\n    </Card>\n  );\n}\n","/**\n * Competitive Insights Tab\n * Full competitive analysis powered by 16+ intelligence sources\n */\n\nimport React, { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Alert, AlertDescription } from '@/components/ui/alert'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Progress } from '@/components/ui/progress'\nimport { Loader2, Search, TrendingUp, TrendingDown, Minus, Target, Zap, AlertTriangle } from 'lucide-react'\nimport { IndustrySelector } from './IndustrySelector'\nimport { competitiveIntelligence } from '@/services/intelligence/competitive-intelligence.service'\nimport type {\n  Competitor,\n  CompetitorProfile,\n  ScoredOpportunity\n} from '@/services/intelligence/competitive-intelligence.service'\n\ninterface CompetitiveInsightsProps {\n  brandId: string\n  brandDomain?: string\n  onGenerateContent?: (opportunity: ScoredOpportunity) => void\n}\n\nexport function CompetitiveInsights({\n  brandId,\n  brandDomain,\n  onGenerateContent\n}: CompetitiveInsightsProps) {\n  // Form state\n  const [industry, setIndustry] = useState('')\n  const [location, setLocation] = useState('')\n  const [ourDomain, setOurDomain] = useState(brandDomain || '')\n\n  // Analysis state\n  const [step, setStep] = useState<'input' | 'discovering' | 'profiling' | 'analyzing' | 'results'>('input')\n  const [progress, setProgress] = useState(0)\n  const [statusMessage, setStatusMessage] = useState('')\n  const [error, setError] = useState<string | null>(null)\n\n  // Results\n  const [competitors, setCompetitors] = useState<Competitor[]>([])\n  const [ourProfile, setOurProfile] = useState<CompetitorProfile | null>(null)\n  const [competitorProfiles, setCompetitorProfiles] = useState<CompetitorProfile[]>([])\n  const [opportunities, setOpportunities] = useState<ScoredOpportunity[]>([])\n\n  /**\n   * Run full competitive analysis\n   */\n  const handleAnalyze = async () => {\n    if (!industry || !ourDomain) {\n      setError('Please enter your domain and select an industry')\n      return\n    }\n\n    try {\n      setError(null)\n      setProgress(0)\n\n      // Step 1: Discover competitors\n      setStep('discovering')\n      setStatusMessage('Discovering competitors...')\n      setProgress(10)\n\n      const discovered = await competitiveIntelligence.discoverCompetitors({\n        industry,\n        location: location || undefined,\n        ourDomain,\n        limit: 5\n      })\n\n      setCompetitors(discovered)\n      setProgress(25)\n\n      if (discovered.length === 0) {\n        setError('No competitors found. Try a different industry or location.')\n        setStep('input')\n        return\n      }\n\n      // Step 2: Profile all competitors (including ourselves)\n      setStep('profiling')\n      setStatusMessage(`Profiling ${discovered.length + 1} companies...`)\n      setProgress(30)\n\n      const allDomains = [\n        { domain: ourDomain, name: 'Your Business', url: `https://${ourDomain}`, source: 'manual' as const },\n        ...discovered\n      ]\n\n      const profiles: CompetitorProfile[] = []\n\n      for (let i = 0; i < allDomains.length; i++) {\n        const comp = allDomains[i]\n        setStatusMessage(`Profiling ${comp.name}... (${i + 1}/${allDomains.length})`)\n\n        try {\n          const profile = await competitiveIntelligence.profileCompetitor(comp)\n          profiles.push(profile)\n        } catch (err) {\n          console.warn(`Failed to profile ${comp.name}:`, err)\n        }\n\n        setProgress(30 + ((i + 1) / allDomains.length) * 40)\n      }\n\n      const [our, ...comps] = profiles\n      setOurProfile(our)\n      setCompetitorProfiles(comps)\n\n      // Step 3: Analyze gaps\n      setStep('analyzing')\n      setStatusMessage('Analyzing competitive gaps...')\n      setProgress(75)\n\n      const [contentGaps, messagingGaps, performanceGaps] = await Promise.all([\n        competitiveIntelligence.findContentGaps({\n          ourDomain,\n          competitors: discovered.map(c => c.domain),\n          limit: 20\n        }),\n        competitiveIntelligence.findMessagingGaps({\n          ourProfile: our,\n          competitorProfiles: comps\n        }),\n        competitiveIntelligence.findPerformanceGaps({\n          ourProfile: our,\n          competitorProfiles: comps\n        })\n      ])\n\n      setProgress(90)\n\n      // Step 4: Score opportunities\n      setStatusMessage('Scoring opportunities...')\n\n      const scored = await competitiveIntelligence.scoreOpportunities({\n        contentGaps,\n        messagingGaps,\n        performanceGaps\n      })\n\n      setOpportunities(scored)\n      setProgress(100)\n\n      // Show results\n      setStep('results')\n\n    } catch (err) {\n      console.error('Competitive analysis failed:', err)\n      setError(err instanceof Error ? err.message : 'Analysis failed')\n      setStep('input')\n    }\n  }\n\n  /**\n   * Render opportunity card\n   */\n  const renderOpportunity = (opp: ScoredOpportunity) => {\n    const difficultyColor =\n      opp.difficulty === 'easy' ? 'text-green-600' :\n      opp.difficulty === 'medium' ? 'text-yellow-600' : 'text-red-600'\n\n    const typeIcon = opp.type === 'content' ? Target : opp.type === 'messaging' ? Zap : AlertTriangle\n\n    return (\n      <Card key={`${opp.type}-${opp.title}`} className=\"hover:shadow-lg transition-shadow\">\n        <CardHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                {React.createElement(typeIcon, { className: \"h-5 w-5 text-primary\" })}\n                <Badge variant=\"outline\">{opp.type}</Badge>\n                <Badge className={difficultyColor}>{opp.difficulty}</Badge>\n              </div>\n              <CardTitle className=\"text-lg\">{opp.title}</CardTitle>\n              <CardDescription className=\"mt-2\">{opp.description}</CardDescription>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-3xl font-bold text-primary\">{opp.roiScore}</div>\n              <div className=\"text-xs text-muted-foreground\">ROI Score</div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {/* Estimated Impact */}\n            {opp.estimatedImpact.traffic && (\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Est. Traffic:</span>\n                <span className=\"font-medium\">{opp.estimatedImpact.traffic.toLocaleString()}/mo</span>\n              </div>\n            )}\n\n            {/* Actionable */}\n            <Alert>\n              <AlertDescription className=\"text-sm\">\n                <strong>Action:</strong> {opp.actionable}\n              </AlertDescription>\n            </Alert>\n\n            {/* Generate Content Button */}\n            {onGenerateContent && opp.type === 'content' && (\n              <Button\n                onClick={() => onGenerateContent(opp)}\n                className=\"w-full\"\n                variant=\"outline\"\n              >\n                <Zap className=\"mr-2 h-4 w-4\" />\n                Generate Content for This Opportunity\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h2 className=\"text-2xl font-bold\">Competitive Intelligence</h2>\n        <p className=\"text-muted-foreground\">\n          Analyze competitors, find gaps, and discover content opportunities\n        </p>\n      </div>\n\n      {/* Input Form */}\n      {step === 'input' && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Analyze Your Competition</CardTitle>\n            <CardDescription>\n              Powered by 16+ intelligence sources: Serper, SEMrush, Apify, Claude AI, and more\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Your Domain</label>\n                <Input\n                  type=\"text\"\n                  placeholder=\"example.com\"\n                  value={ourDomain}\n                  onChange={(e) => setOurDomain(e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Industry</label>\n                <IndustrySelector\n                  brandId={brandId}\n                  value={industry}\n                  onChange={setIndustry}\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Location (Optional)</label>\n              <Input\n                type=\"text\"\n                placeholder=\"New York, NY\"\n                value={location}\n                onChange={(e) => setLocation(e.target.value)}\n              />\n            </div>\n\n            {error && (\n              <Alert variant=\"destructive\">\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n\n            <Button\n              onClick={handleAnalyze}\n              disabled={!industry || !ourDomain}\n              className=\"w-full\"\n              size=\"lg\"\n            >\n              <Search className=\"mr-2 h-4 w-4\" />\n              Run Competitive Analysis\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Loading States */}\n      {(step === 'discovering' || step === 'profiling' || step === 'analyzing') && (\n        <Card>\n          <CardContent className=\"py-12\">\n            <div className=\"flex flex-col items-center justify-center gap-4\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n              <div className=\"text-center w-full max-w-md\">\n                <p className=\"text-lg font-medium mb-2\">{statusMessage}</p>\n                <Progress value={progress} className=\"w-full\" />\n                <p className=\"text-sm text-muted-foreground mt-2\">{Math.round(progress)}% complete</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Results */}\n      {step === 'results' && (\n        <div className=\"space-y-6\">\n          {/* Summary Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold\">{competitors.length}</div>\n                  <div className=\"text-sm text-muted-foreground\">Competitors Found</div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold\">\n                    {opportunities.filter(o => o.type === 'content').length}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">Content Gaps</div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold\">\n                    {opportunities.filter(o => o.type === 'messaging').length}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">Messaging Gaps</div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-3xl font-bold\">\n                    {opportunities.filter(o => o.roiScore >= 70).length}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">High-ROI Opportunities</div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Opportunities Tabs */}\n          <Tabs defaultValue=\"all\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"all\">All ({opportunities.length})</TabsTrigger>\n              <TabsTrigger value=\"content\">\n                Content ({opportunities.filter(o => o.type === 'content').length})\n              </TabsTrigger>\n              <TabsTrigger value=\"messaging\">\n                Messaging ({opportunities.filter(o => o.type === 'messaging').length})\n              </TabsTrigger>\n              <TabsTrigger value=\"performance\">\n                Performance ({opportunities.filter(o => o.type === 'performance').length})\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"all\" className=\"space-y-4 mt-6\">\n              {opportunities.slice(0, 20).map(renderOpportunity)}\n            </TabsContent>\n\n            <TabsContent value=\"content\" className=\"space-y-4 mt-6\">\n              {opportunities.filter(o => o.type === 'content').slice(0, 20).map(renderOpportunity)}\n            </TabsContent>\n\n            <TabsContent value=\"messaging\" className=\"space-y-4 mt-6\">\n              {opportunities.filter(o => o.type === 'messaging').slice(0, 20).map(renderOpportunity)}\n            </TabsContent>\n\n            <TabsContent value=\"performance\" className=\"space-y-4 mt-6\">\n              {opportunities.filter(o => o.type === 'performance').slice(0, 20).map(renderOpportunity)}\n            </TabsContent>\n          </Tabs>\n\n          {/* Run New Analysis Button */}\n          <div className=\"flex justify-center\">\n            <Button\n              onClick={() => {\n                setStep('input')\n                setOpportunities([])\n                setCompetitors([])\n                setProgress(0)\n              }}\n              variant=\"outline\"\n            >\n              <Search className=\"mr-2 h-4 w-4\" />\n              Run New Analysis\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","/**\n * Generation Progress Component\n * Shows real-time progress during content generation\n * Task 12 - Production Ready Implementation\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Progress } from '@/components/ui/progress';\nimport { Loader2, CheckCircle, Sparkles } from 'lucide-react';\n\nexport interface GenerationProgressProps {\n  isOpen: boolean;\n  current: number;\n  total: number;\n  currentStep: string;\n  isComplete?: boolean;\n}\n\nexport function GenerationProgress({\n  isOpen,\n  current,\n  total,\n  currentStep,\n  isComplete = false,\n}: GenerationProgressProps) {\n  const percentage = total > 0 ? Math.round((current / total) * 100) : 0;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={() => {}}>\n      <DialogContent className=\"sm:max-w-md\" onPointerDownOutside={(e) => e.preventDefault()}>\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {isComplete ? (\n              <>\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                Generation Complete!\n              </>\n            ) : (\n              <>\n                <Sparkles className=\"h-5 w-5 text-blue-500\" />\n                Creating Your Content\n              </>\n            )}\n          </DialogTitle>\n          <DialogDescription>\n            {isComplete\n              ? `Successfully generated ${total} professional posts!`\n              : 'Your brand-specific content is being generated...'}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Progress Bar */}\n          <div className=\"space-y-2\">\n            <Progress value={percentage} className=\"w-full\" />\n            <div className=\"flex justify-between text-sm text-muted-foreground\">\n              <span>\n                {current} of {total} posts\n              </span>\n              <span>{percentage}%</span>\n            </div>\n          </div>\n\n          {/* Current Step */}\n          {!isComplete && (\n            <div className=\"flex items-center gap-2 text-sm\">\n              <Loader2 className=\"h-4 w-4 animate-spin text-blue-500\" />\n              <span className=\"text-muted-foreground\">{currentStep}</span>\n            </div>\n          )}\n\n          {/* Encouraging Messages */}\n          {isComplete && (\n            <div className=\"rounded-lg bg-green-50 dark:bg-green-900/20 p-4 text-sm text-green-700 dark:text-green-300\">\n              <p className=\"font-medium mb-1\">Your content is ready!</p>\n              <p className=\"text-xs\">\n                All posts have been enhanced with AI and scored for quality. Review and schedule\n                them now.\n              </p>\n            </div>\n          )}\n\n          {!isComplete && (\n            <div className=\"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-4 text-sm text-blue-700 dark:text-blue-300\">\n              <p className=\"text-xs\">\n                Each post is being personalized with your brand voice and optimized for engagement.\n                This typically takes 45-60 seconds.\n              </p>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n/**\n * Hook to manage generation progress state\n */\nexport function useGenerationProgress() {\n  const [progress, setProgress] = React.useState({\n    isOpen: false,\n    current: 0,\n    total: 30,\n    currentStep: '',\n    isComplete: false,\n  });\n\n  const startProgress = (total: number = 30) => {\n    setProgress({\n      isOpen: true,\n      current: 0,\n      total,\n      currentStep: 'Loading your brand data...',\n      isComplete: false,\n    });\n  };\n\n  const updateProgress = (current: number, step: string) => {\n    setProgress((prev) => ({\n      ...prev,\n      current,\n      currentStep: step,\n    }));\n  };\n\n  const completeProgress = () => {\n    setProgress((prev) => ({\n      ...prev,\n      current: prev.total,\n      currentStep: '',\n      isComplete: true,\n    }));\n\n    // Auto-close after 2 seconds\n    setTimeout(() => {\n      closeProgress();\n    }, 2000);\n  };\n\n  const closeProgress = () => {\n    setProgress({\n      isOpen: false,\n      current: 0,\n      total: 30,\n      currentStep: '',\n      isComplete: false,\n    });\n  };\n\n  return {\n    progress,\n    startProgress,\n    updateProgress,\n    completeProgress,\n    closeProgress,\n  };\n}\n","/**\n * ContentCalendarHub Component\n * Main hub integrating all content calendar features\n * Integrates with Optimize section of MIRROR\n * Task 3.6 - Complete Content Calendar Hub Integration\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Plus,\n  Grid,\n  Search,\n  Filter,\n  Calendar as CalendarIcon,\n  Clock,\n  CheckCircle,\n  Send,\n  Lightbulb,\n  Sparkles,\n  Loader2,\n  Trash2,\n  TrendingUp,\n} from 'lucide-react';\nimport { CalendarView } from './CalendarView';\nimport { OpportunityFeed } from './OpportunityFeed';\nimport { ContentGenerator } from './ContentGenerator';\nimport { BulkContentGenerator } from './BulkContentGenerator';\nimport { PublishingQueue } from './PublishingQueue';\nimport { CompetitiveInsights } from './CompetitiveInsights';\nimport { GenerationProgress, useGenerationProgress } from './GenerationProgress';\nimport { IndustrySelector } from './IndustrySelector';\nimport { ContentCalendarService } from '@/services/content-calendar.service';\nimport { analyticsService } from '@/services/analytics.service';\nimport { deepContextBuilder } from '@/services/intelligence/deepcontext-builder.service';\nimport { generateSynapses } from '@/services/synapse/SynapseGenerator';\nimport { SynapseContentGenerator } from '@/services/synapse/generation/SynapseContentGenerator';\nimport { supabase } from '@/lib/supabase';\nimport type { ContentItem, ContentPillar, Platform } from '@/types/content-calendar.types';\nimport type { SynapseContent } from '@/types/synapse/synapseContent.types';\n\ninterface ContentCalendarHubProps {\n  brandId: string;\n  userId: string;\n  pillars?: ContentPillar[];\n}\n\nexport function ContentCalendarHub({ brandId, userId, pillars = [] }: ContentCalendarHubProps) {\n  const [activeTab, setActiveTab] = useState<'calendar' | 'queue' | 'generator' | 'opportunities' | 'insights'>(\n    'calendar'\n  );\n  const [showContentGenerator, setShowContentGenerator] = useState(false);\n  const [showBulkGenerator, setShowBulkGenerator] = useState(false);\n  const [selectedContent, setSelectedContent] = useState<ContentItem | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [isGeneratingMagic, setIsGeneratingMagic] = useState(false);\n  const [brandIndustry, setBrandIndustry] = useState<string>('');\n  const [brandUrl, setBrandUrl] = useState<string>('');\n  const [generationFrequency, setGenerationFrequency] = useState<'post' | 'day' | 'week' | 'month'>('month');\n\n  // Progress indicator\n  const { progress, startProgress, updateProgress, completeProgress, closeProgress } =\n    useGenerationProgress();\n\n  // Filters and search\n  const [platformFilter, setPlatformFilter] = useState<Platform | 'all'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [dateRange, setDateRange] = useState({\n    start: new Date().toISOString().split('T')[0],\n    end: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n  });\n\n  // Stats\n  const [stats, setStats] = useState({\n    total: 0,\n    scheduled: 0,\n    published: 0,\n    pending: 0,\n  });\n\n  /**\n   * Load stats\n   */\n  const loadStats = async () => {\n    try {\n      const items = await ContentCalendarService.getContentItems(\n        brandId,\n        new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n        new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()\n      );\n\n      setStats({\n        total: items.length,\n        scheduled: items.filter(i => i.status === 'scheduled').length,\n        published: items.filter(i => i.status === 'published').length,\n        pending: items.filter(i => i.status === 'draft').length,\n      });\n    } catch (error) {\n      console.error('Failed to load stats:', error);\n    }\n  };\n\n  /**\n   * Load brand industry on mount\n   */\n  useEffect(() => {\n    const loadBrandIndustry = async () => {\n      try {\n        const { data } = await supabase\n          .from('brands')\n          .select('industry')\n          .eq('id', brandId)\n          .single();\n\n        if (data?.industry) {\n          setBrandIndustry(data.industry);\n        }\n      } catch (error) {\n        console.error('Failed to load brand industry:', error);\n      }\n    };\n\n    loadBrandIndustry();\n  }, [brandId]);\n\n  /**\n   * Load stats on mount and when refreshing\n   */\n  useEffect(() => {\n    loadStats();\n  }, [refreshKey, brandId]);\n\n  /**\n   * Handle content item click\n   */\n  const handleContentClick = (content: ContentItem) => {\n    setSelectedContent(content);\n    // Could open edit modal here\n  };\n\n  /**\n   * Handle refresh after actions\n   */\n  const handleRefresh = () => {\n    setRefreshKey(prev => prev + 1);\n    loadStats();\n  };\n\n\n  /**\n   * Get count based on frequency selection\n   */\n  const getGenerationCount = () => {\n    const count = (() => {\n      switch (generationFrequency) {\n        case 'post':\n          return 1;\n        case 'day':\n          return 3;\n        case 'week':\n          return 7;\n        case 'month':\n          return 30;\n        default:\n          return 30;\n      }\n    })();\n    console.log(`[Generation] Frequency: ${generationFrequency}, Count: ${count}`);\n    return count;\n  };\n\n  /**\n   * Get button text based on frequency\n   */\n  const getGenerationButtonText = () => {\n    switch (generationFrequency) {\n      case 'post':\n        return 'Generate 1 Post';\n      case 'day':\n        return 'Generate Today (3 Posts)';\n      case 'week':\n        return 'Generate This Week (7 Posts)';\n      case 'month':\n        return 'Generate This Month (30 Posts)';\n      default:\n        return 'Generate Content';\n    }\n  };\n\n  /**\n   * Handle Magic Generation - Generate posts using Synapse breakthrough discovery\n   */\n  const handleMagicGeneration = async () => {\n    if (isGeneratingMagic) return;\n\n    if (!brandUrl || !brandIndustry) {\n      alert('Please enter your business URL and select an industry to generate breakthrough content');\n      return;\n    }\n\n    const count = getGenerationCount();\n    console.log(`[Synapse Generation] Starting with count: ${count}`);\n    const startTime = Date.now();\n    setIsGeneratingMagic(true);\n    startProgress(count);\n\n    try {\n      // Extract business name from URL\n      const businessName = new URL(brandUrl).hostname.replace('www.', '').split('.')[0];\n\n      // Step 1: Gather intelligence from multiple APIs\n      updateProgress(0, 'Gathering intelligence from multiple APIs...');\n\n      const result = await deepContextBuilder.buildDeepContext({\n        brandId,\n        brandData: {\n          name: businessName,\n          industry: brandIndustry,\n          location: { city: 'New York', state: 'NY' }\n        }\n      });\n\n      const intelligence = result.context;\n      console.log(`[Synapse] Collected ${result.metadata.dataPointsCollected} data points from ${result.metadata.dataSourcesUsed.length} sources`);\n\n      // Step 2: Discover breakthrough insights\n      updateProgress(Math.floor(count * 0.3), 'Discovering breakthrough connections...');\n\n      const insights = await generateSynapses({\n        business: {\n          name: businessName,\n          industry: brandIndustry,\n          location: {\n            city: 'New York',\n            state: 'NY'\n          }\n        },\n        intelligence: intelligence\n      });\n\n      console.log(`[Synapse] Found ${insights.synapses.length} breakthrough insights`);\n\n      if (insights.synapses.length === 0) {\n        closeProgress();\n        alert('No breakthrough insights discovered. Try a different URL or industry.');\n        return;\n      }\n\n      // Step 3: Generate content from ALL insights (use up to count)\n      updateProgress(Math.floor(count * 0.5), 'Generating breakthrough content...');\n\n      const contentGenerator = new SynapseContentGenerator();\n      const allContent: SynapseContent[] = [];\n\n      // Generate content from each insight until we have enough\n      for (let i = 0; i < Math.min(insights.synapses.length, count); i++) {\n        const insight = insights.synapses[i];\n        const generationResult = await contentGenerator.generate([insight], {\n          name: businessName,\n          industry: brandIndustry,\n          targetAudience: 'business owners',\n          brandVoice: 'professional',\n          contentGoals: ['engagement']\n        }, {\n          maxContent: 2,\n          formats: ['hook-post'],\n          platform: 'linkedin'\n        });\n\n        allContent.push(...generationResult.content);\n        updateProgress(Math.floor(count * 0.5) + i, `Generated ${allContent.length} pieces...`);\n      }\n\n      console.log(`[Synapse] Generated ${allContent.length} content pieces`);\n\n      // Step 4: Save to calendar with scheduling\n      updateProgress(Math.floor(count * 0.9), 'Scheduling your content...');\n\n      let savedCount = 0;\n      const now = new Date();\n\n      for (let i = 0; i < allContent.length; i++) {\n        const item = allContent[i];\n\n        // Map platform\n        const platformMap: Record<string, Platform> = {\n          'linkedin': 'linkedin',\n          'twitter': 'twitter',\n          'facebook': 'facebook',\n          'instagram': 'instagram',\n          'tiktok': 'tiktok',\n        };\n\n        const synapseplatform = item.meta.platform?.[0] || 'linkedin';\n        const platform = platformMap[synapseplatform] || 'linkedin';\n\n        // Combine content sections\n        const contentText = [\n          item.content.headline,\n          item.content.hook,\n          item.content.body,\n          item.content.cta,\n        ].filter(Boolean).join('\\n\\n');\n\n        // Build intelligence badges\n        const badges: string[] = [\n          `Synapse Discovery`,\n          `Engagement: ${Math.round(item.prediction.engagementScore * 100)}%`,\n          `Viral Potential: ${Math.round(item.prediction.viralPotential * 100)}%`,\n        ];\n\n        if (item.provenance?.psychologyTrigger) {\n          badges.push(`Psychology: ${item.provenance.psychologyTrigger}`);\n        }\n\n        // Calculate scheduled time (spread across next days)\n        const scheduledDate = new Date(now);\n        scheduledDate.setDate(now.getDate() + i);\n        scheduledDate.setHours(10, 0, 0, 0);\n\n        await ContentCalendarService.createContentItem({\n          brand_id: brandId,\n          user_id: userId,\n          platform,\n          content_text: contentText,\n          generation_mode: 'synapse',\n          synapse_score: item.prediction.engagementScore,\n          intelligence_badges: badges,\n          hashtags: item.content.hashtags,\n          status: 'scheduled',\n          scheduled_time: scheduledDate.toISOString(),\n        });\n\n        savedCount++;\n      }\n\n      console.log(`[Synapse] Saved ${savedCount} posts to calendar`);\n\n      // Track analytics\n      analyticsService.trackContentGeneration({\n        count: savedCount,\n        industry: brandIndustry,\n        duration: Date.now() - startTime,\n        avgScore: allContent.reduce((sum, c) => sum + c.prediction.engagementScore, 0) / allContent.length,\n        successCount: savedCount,\n      });\n\n      // Complete progress\n      completeProgress();\n\n      // Refresh calendar\n      setTimeout(() => {\n        handleRefresh();\n      }, 2000);\n\n    } catch (error) {\n      console.error('Synapse generation failed:', error);\n\n      analyticsService.trackError({\n        type: 'synapse_generation_failed',\n        message: error instanceof Error ? error.message : 'Unknown error',\n        context: { brandId, industry: brandIndustry },\n      });\n\n      closeProgress();\n      alert('Generation failed. Please check your URL and try again.');\n    } finally {\n      setIsGeneratingMagic(false);\n    }\n  };\n\n  /**\n   * Clear all content for this brand\n   */\n  const handleClearAll = async () => {\n    if (!confirm('Are you sure you want to delete ALL content? This cannot be undone.')) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('content_calendar_items')\n        .delete()\n        .eq('brand_id', brandId);\n\n      if (error) throw error;\n\n      console.log('[ContentCalendarHub] Cleared all content for brand:', brandId);\n      handleRefresh();\n    } catch (error) {\n      console.error('[ContentCalendarHub] Failed to clear content:', error);\n      alert('Failed to clear content. Check console for details.');\n    }\n  };\n\n  /**\n   * Handle Synapse content generation from insights\n   * Converts SynapseContent to ContentItem and saves to calendar\n   */\n  const handleSynapseContentGenerated = async (synapseContent: SynapseContent[]) => {\n    console.log('[ContentCalendarHub] Processing Synapse content:', synapseContent.length, 'items');\n\n    try {\n      let savedCount = 0;\n      const now = new Date();\n\n      for (let i = 0; i < synapseContent.length; i++) {\n        const item = synapseContent[i];\n\n        // Map platform from Synapse format to ContentItem format\n        const platformMap: Record<string, Platform> = {\n          'linkedin': 'linkedin',\n          'twitter': 'twitter',\n          'facebook': 'facebook',\n          'instagram': 'instagram',\n          'tiktok': 'tiktok',\n        };\n\n        // Get the first platform or default to linkedin\n        const synapseplatform = item.meta.platform?.[0] || 'linkedin';\n        const platform = platformMap[synapseplatform] || 'linkedin';\n\n        // Combine content sections into text\n        const contentText = [\n          item.content.headline,\n          item.content.hook,\n          item.content.body,\n          item.content.cta,\n        ].filter(Boolean).join('\\n\\n');\n\n        // Build intelligence badges from provenance and predictions\n        const badges: string[] = [\n          `Synapse Discovery`,\n          `Engagement Score: ${Math.round(item.prediction.engagementScore * 100)}%`,\n          `Viral Potential: ${Math.round(item.prediction.viralPotential * 100)}%`,\n        ];\n\n        if (item.provenance?.psychologyTrigger) {\n          badges.push(`Psychology: ${item.provenance.psychologyTrigger}`);\n        }\n\n        if (item.provenance?.dataSourcesUsed?.length) {\n          badges.push(`Data Sources: ${item.provenance.dataSourcesUsed.length}`);\n        }\n\n        // Calculate scheduled time (spread across next 7 days)\n        const scheduledDate = new Date(now);\n        scheduledDate.setDate(now.getDate() + i);\n        scheduledDate.setHours(10, 0, 0, 0);\n\n        // Save to database\n        const savedItem = await ContentCalendarService.createContentItem({\n          brand_id: brandId,\n          user_id: userId,\n          platform,\n          content_text: contentText,\n          generation_mode: 'synapse',\n          synapse_score: item.prediction.engagementScore,\n          intelligence_badges: badges,\n          hashtags: item.content.hashtags,\n          status: 'scheduled',\n          scheduled_time: scheduledDate.toISOString(),\n        });\n\n        console.log('[ContentCalendarHub] Saved Synapse content:', savedItem.id);\n        savedCount++;\n      }\n\n      console.log(`[ContentCalendarHub] Saved ${savedCount}/${synapseContent.length} Synapse content items`);\n\n      // Track analytics\n      analyticsService.trackContentGeneration({\n        count: savedCount,\n        industry: brandIndustry,\n        duration: 0,\n        avgScore: synapseContent.reduce((sum, c) => sum + c.prediction.engagementScore, 0) / synapseContent.length,\n        successCount: savedCount,\n      });\n\n      // Refresh calendar\n      handleRefresh();\n\n      // Switch to calendar view to show new content\n      setActiveTab('calendar');\n\n    } catch (error) {\n      console.error('[ContentCalendarHub] Failed to save Synapse content:', error);\n      alert('Failed to save content. Check console for details.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Stats */}\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2\">Content Calendar</h1>\n        <p className=\"text-muted-foreground mb-4\">\n          Plan, schedule, and publish content across all platforms\n        </p>\n\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <CalendarIcon className=\"w-5 h-5 text-blue-500\" />\n              <div>\n                <p className=\"text-2xl font-bold\">{stats.total}</p>\n                <p className=\"text-xs text-muted-foreground\">Total Content</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-5 h-5 text-orange-500\" />\n              <div>\n                <p className=\"text-2xl font-bold\">{stats.scheduled}</p>\n                <p className=\"text-xs text-muted-foreground\">Scheduled</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <CheckCircle className=\"w-5 h-5 text-green-500\" />\n              <div>\n                <p className=\"text-2xl font-bold\">{stats.published}</p>\n                <p className=\"text-xs text-muted-foreground\">Published</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <Send className=\"w-5 h-5 text-gray-500\" />\n              <div>\n                <p className=\"text-2xl font-bold\">{stats.pending}</p>\n                <p className=\"text-xs text-muted-foreground\">Pending</p>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <Card className=\"p-4\">\n        <div className=\"flex flex-col md:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1\">\n            <Label className=\"text-xs text-muted-foreground mb-1\">Search Content</Label>\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by text, hashtags, or description...\"\n                value={searchQuery}\n                onChange={e => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          {/* Platform Filter */}\n          <div className=\"w-full md:w-48\">\n            <Label className=\"text-xs text-muted-foreground mb-1\">Platform</Label>\n            <Select value={platformFilter} onValueChange={v => setPlatformFilter(v as Platform | 'all')}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Platforms</SelectItem>\n                <SelectItem value=\"instagram\">Instagram</SelectItem>\n                <SelectItem value=\"facebook\">Facebook</SelectItem>\n                <SelectItem value=\"twitter\">Twitter</SelectItem>\n                <SelectItem value=\"linkedin\">LinkedIn</SelectItem>\n                <SelectItem value=\"tiktok\">TikTok</SelectItem>\n                <SelectItem value=\"email\">Email</SelectItem>\n                <SelectItem value=\"blog\">Blog</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Business URL */}\n          <div className=\"w-full md:w-64\">\n            <Label className=\"text-xs text-muted-foreground mb-1\">Business URL</Label>\n            <Input\n              type=\"url\"\n              placeholder=\"https://yourbusiness.com\"\n              value={brandUrl}\n              onChange={(e) => setBrandUrl(e.target.value)}\n            />\n          </div>\n\n          {/* Industry Selector */}\n          <div className=\"w-full md:w-56\">\n            <IndustrySelector\n              brandId={brandId}\n              value={brandIndustry}\n              onChange={setBrandIndustry}\n              autoSave={true}\n            />\n          </div>\n\n          {/* Date Range */}\n          <div className=\"flex gap-2\">\n            <div className=\"w-full md:w-40\">\n              <Label className=\"text-xs text-muted-foreground mb-1\">Start Date</Label>\n              <Input\n                type=\"date\"\n                value={dateRange.start}\n                onChange={e => setDateRange({ ...dateRange, start: e.target.value })}\n              />\n            </div>\n            <div className=\"w-full md:w-40\">\n              <Label className=\"text-xs text-muted-foreground mb-1\">End Date</Label>\n              <Input\n                type=\"date\"\n                value={dateRange.end}\n                onChange={e => setDateRange({ ...dateRange, end: e.target.value })}\n              />\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* Action Buttons and Tabs */}\n      <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\n        <div className=\"flex flex-wrap gap-2 items-center\">\n          <div className=\"flex flex-col gap-1\">\n            <Label className=\"text-xs text-muted-foreground\">Generate</Label>\n            <Select\n              value={generationFrequency}\n              onValueChange={(v) => {\n                console.log(`[Frequency] Changed to: ${v}`);\n                setGenerationFrequency(v as 'post' | 'day' | 'week' | 'month');\n              }}\n            >\n              <SelectTrigger className=\"w-44\">\n                <SelectValue placeholder=\"Select frequency\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"post\">One Post (1)</SelectItem>\n                <SelectItem value=\"day\">One Day (3 posts)</SelectItem>\n                <SelectItem value=\"week\">One Week (7 posts)</SelectItem>\n                <SelectItem value=\"month\">One Month (30 posts)</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex flex-col gap-1\">\n            <Label className=\"text-xs text-muted-foreground opacity-0\">Action</Label>\n            <Button\n              size=\"lg\"\n              onClick={handleMagicGeneration}\n              disabled={isGeneratingMagic}\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\n            >\n              {isGeneratingMagic ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <Sparkles className=\"w-4 h-4 mr-2\" />\n                  {getGenerationButtonText()}\n                </>\n              )}\n            </Button>\n          </div>\n          <Button onClick={() => setShowContentGenerator(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Content\n          </Button>\n          <Button variant=\"outline\" onClick={() => setShowBulkGenerator(true)}>\n            <Grid className=\"w-4 h-4 mr-2\" />\n            Bulk Generate\n          </Button>\n          <Button variant=\"destructive\" onClick={handleClearAll}>\n            <Trash2 className=\"w-4 h-4 mr-2\" />\n            Clear All\n          </Button>\n        </div>\n\n        <Tabs\n          value={activeTab}\n          onValueChange={v =>\n            setActiveTab(v as 'calendar' | 'queue' | 'generator' | 'opportunities' | 'insights')\n          }\n        >\n          <TabsList>\n            <TabsTrigger value=\"calendar\">\n              <CalendarIcon className=\"w-4 h-4 mr-2\" />\n              Calendar\n            </TabsTrigger>\n            <TabsTrigger value=\"queue\">\n              <Clock className=\"w-4 h-4 mr-2\" />\n              Queue\n            </TabsTrigger>\n            <TabsTrigger value=\"generator\">\n              <Grid className=\"w-4 h-4 mr-2\" />\n              Generator\n            </TabsTrigger>\n            <TabsTrigger value=\"opportunities\">\n              <Lightbulb className=\"w-4 h-4 mr-2\" />\n              Opportunities\n            </TabsTrigger>\n            <TabsTrigger value=\"insights\">\n              <TrendingUp className=\"w-4 h-4 mr-2\" />\n              Competitive Intel\n            </TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      {/* Main Content Area */}\n      <Tabs value={activeTab} onValueChange={v => setActiveTab(v as any)}>\n        <TabsContent value=\"calendar\" className=\"mt-0\">\n          <CalendarView\n            key={`calendar-${refreshKey}`}\n            brandId={brandId}\n            onEventClick={handleContentClick}\n            onEventDrop={handleRefresh}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"queue\" className=\"mt-0\">\n          <PublishingQueue\n            key={`queue-${refreshKey}`}\n            brandId={brandId}\n            days={7}\n            enableApprovalWorkflow={false}\n            onRefresh={handleRefresh}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"generator\" className=\"mt-0\">\n          <Card className=\"p-8 text-center\">\n            <Grid className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n            <h3 className=\"text-xl font-bold mb-2\">Bulk Content Generator</h3>\n            <p className=\"text-muted-foreground mb-6\">\n              Generate multiple posts at once across platforms and date ranges\n            </p>\n            <Button onClick={() => setShowBulkGenerator(true)} size=\"lg\">\n              <Grid className=\"w-4 h-4 mr-2\" />\n              Open Bulk Generator\n            </Button>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"opportunities\" className=\"mt-0\">\n          <OpportunityFeed\n            brandId={brandId}\n            userId={userId}\n            onGenerateFromOpportunity={() => {\n              // Opportunity generator is handled within OpportunityFeed\n            }}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"insights\" className=\"mt-0\">\n          <CompetitiveInsights\n            brandId={brandId}\n            brandDomain={brandUrl}\n          />\n        </TabsContent>\n      </Tabs>\n\n      {/* Floating Action Button */}\n      <div className=\"fixed bottom-8 right-8 z-50\">\n        <Button\n          size=\"lg\"\n          className=\"rounded-full shadow-lg h-14 w-14 p-0\"\n          onClick={() => setShowContentGenerator(true)}\n        >\n          <Plus className=\"w-6 h-6\" />\n        </Button>\n      </div>\n\n      {/* Content Generator Modal */}\n      <ContentGenerator\n        open={showContentGenerator}\n        onClose={() => setShowContentGenerator(false)}\n        brandId={brandId}\n        userId={userId}\n        pillars={pillars}\n        onContentCreated={handleRefresh}\n      />\n\n      {/* Bulk Content Generator Modal */}\n      <BulkContentGenerator\n        open={showBulkGenerator}\n        onClose={() => setShowBulkGenerator(false)}\n        brandId={brandId}\n        userId={userId}\n        pillars={pillars}\n        onContentCreated={handleRefresh}\n      />\n\n      {/* Generation Progress Indicator */}\n      <GenerationProgress\n        isOpen={progress.isOpen}\n        current={progress.current}\n        total={progress.total}\n        currentStep={progress.currentStep}\n        isComplete={progress.isComplete}\n      />\n    </div>\n  );\n}\n"],"names":["cn","inputs","twMerge","clsx","buttonVariants","cva","Button","React.forwardRef","className","variant","size","asChild","props","ref","Comp","Slot","jsx","Input","type","badgeVariants","Badge","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","children","jsxs","DialogPrimitive.Content","DialogPrimitive.Close","X","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","ProvenanceViewer","provenance","expanded","setExpanded","useState","expandedSources","setExpandedSources","toggleSource","source","prev","ChevronDown","ChevronRight","idx","candidate","topic","platform","insight","i","sourceGroup","dataPoint","dpIdx","step","stage","_a","EdginessSlider","value","onChange","isDragging","setIsDragging","rangeInfo","level","e","CharacterCountBadge","validation","compact","statusColors","StatusIcon","CheckCircle","AlertCircle","XCircle","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","labelVariants","Label","LabelPrimitive.Root","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUp","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","position","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","Check","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","PLATFORM_LIMITS","ContentCalendarService","row","item","brandId","startDate","endDate","query","supabase","data","error","id","dbRow","updates","dbUpdates","db","original","_","created_at","updated_at","published_time","platform_post_id","rest","date","existingContent","limits","dayOfWeek","recommendations","time","reasoning","a","b","hour","dayName","score","minIntervalMs","rec","recTime","content","contentTime","scheduledTime","platformContent","c","conflicts","scheduledDate","contentDate","itemId","items","strategy","scheduled","optimalTimes","selectedTime","scheduledItem","times","midIndex","params","functions","start","end","days","postsPerDay","day","currentDate","pillar","generationResult","variation","pillarCounts","distribution","rand","cumulative","mode","badges","_b","result","PLATFORM_COLORS","STATUS_COLORS","CalendarView","onEventClick","onEventDrop","contentItems","setContentItems","events","setEvents","loading","setLoading","view","setView","dateRange","setDateRange","loadContent","useCallback","calendarEvents","useEffect","handleEventClick","clickInfo","contentItem","handleEventDrop","dropInfo","newDate","handleDatesSet","arg","changeView","newView","getFullCalendarView","renderEventContent","eventInfo","getPlatformIcon","Calendar","Grid3x3","Clock","List","color","status","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","listPlugin","OpportunityDetectorService","now","opportunityId","opportunity","context","diffMs","hours","minutes","urgency","colors","samples","created","sample","Textarea","PLATFORMS","ContentGenerator","open","onClose","userId","pillars","onContentCreated","setPlatform","setTopic","pillarId","setPillarId","setMode","generating","setGenerating","variations","setVariations","selectedVariation","setSelectedVariation","editedContent","setEditedContent","saving","setSaving","edginess","setEdginess","characterValidation","setCharacterValidation","characterValidator","CharacterValidator","mockContent","totalValidation","v","handleGenerate","mockVariations","handleSelectVariation","variationId","handleSaveToCalendar","selectedVar","p","Info","Zap","Sparkles","Fragment","word","trigger","Edit","Save","OpportunityFeed","onGenerateFromOpportunity","autoRefreshInterval","opportunities","setOpportunities","selectedOpportunity","setSelectedOpportunity","showGenerator","setShowGenerator","dismissing","setDismissing","loadOpportunities","interval","timer","handleDismiss","opp","next","handleGeneratePost","getCountdownText","timing","getCountdownColor","TrendingUp","RefreshCw","icon","typeLabel","urgencyColor","countdownText","countdownColor","action","AlertTriangle","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","VariantModal","variants","onSelectVariant","handleCopy","text","getFullText","getStrategyColor","Loader2","Copy","diff","RegenerationModal","section","onSelectOption","onRegenerate","getSectionLabel","sec","option","index","ProvenanceModal","synapseToUserFacing","QualityRating","showScore","showLabel","rating","label","sizeClasses","textSizeClasses","starClass","textClass","starColor","star","Star","PLATFORM_ICONS","Instagram","Twitter","Linkedin","Facebook","Mail","FileText","ContentItem","onEdit","onDelete","onDuplicate","onUpdate","onSchedule","variantModalOpen","setVariantModalOpen","regenerationModalOpen","setRegenerationModalOpen","provenanceModalOpen","setProvenanceModalOpen","scheduleDialogOpen","setScheduleDialogOpen","scheduledDateTime","setScheduledDateTime","generatingVariants","setGeneratingVariants","setVariants","regeneratingSection","setRegeneratingSection","regenerationResult","setRegenerationResult","variantGenerator","VariantGenerator","sectionRegenerator","SectionRegenerator","formatDateTime","dateString","handleSchedule","tomorrow","defaultDateTime","confirmSchedule","getContentPreview","maxLength","getIntelligenceBadgeIcon","badge","handleGenerateVariants","extractSection","mockBusiness","handleSelectVariant","updatedItem","handleRegenerateSection","mockInsight","handleSelectRegeneration","optionIndex","updatedContent","applied","lines","l","getProvenance","CalendarIcon","Trash2","target","parent","Heart","MessageCircle","Share2","Eye","ViewIcon","BulkContentGenerator","setStep","selectedPlatforms","setSelectedPlatforms","pillarDistribution","setPillarDistribution","generatedContent","setGeneratedContent","selectedItems","setSelectedItems","scheduling","setScheduling","React","equalPercentage","togglePlatform","updatePillarPercentage","percentage","total","sum","toggleItemSelection","handleScheduleAll","itemsToSchedule","getDaysCovered","handleClose","dist","checked","CheckCircle2","PublishingQueue","enableApprovalWorkflow","onRefresh","queueItems","setQueueItems","publishing","setPublishing","loadQueue","getItemStatus","q","handlePublish","handleRetry","handleReschedule","promptText","defaultValue","newTime","getStatusIcon","getStatusBadge","styles","getTimeUntilPublish","groupedItems","acc","Send","Icon","count","queueItem","alertVariants","Alert","AlertTitle","AlertDescription","Progress","ProgressPrimitive.Root","ProgressPrimitive.Indicator","INDUSTRIES","IndustrySelector","autoSave","selectedIndustry","setSelectedIndustry","isSaving","setIsSaving","handleChange","industry","CompetitiveInsights","brandDomain","onGenerateContent","setIndustry","location","setLocation","ourDomain","setOurDomain","progress","setProgress","statusMessage","setStatusMessage","setError","competitors","setCompetitors","ourProfile","setOurProfile","competitorProfiles","setCompetitorProfiles","handleAnalyze","discovered","competitiveIntelligence","allDomains","profiles","comp","profile","err","our","comps","contentGaps","messagingGaps","performanceGaps","scored","renderOpportunity","difficultyColor","typeIcon","Target","Search","o","GenerationProgress","isOpen","current","currentStep","isComplete","useGenerationProgress","startProgress","updateProgress","completeProgress","closeProgress","ContentCalendarHub","activeTab","setActiveTab","showContentGenerator","setShowContentGenerator","showBulkGenerator","setShowBulkGenerator","selectedContent","setSelectedContent","refreshKey","setRefreshKey","isGeneratingMagic","setIsGeneratingMagic","brandIndustry","setBrandIndustry","brandUrl","setBrandUrl","generationFrequency","setGenerationFrequency","platformFilter","setPlatformFilter","searchQuery","setSearchQuery","stats","setStats","loadStats","handleContentClick","handleRefresh","getGenerationCount","getGenerationButtonText","handleMagicGeneration","startTime","businessName","deepContextBuilder","intelligence","insights","generateSynapses","contentGenerator","SynapseContentGenerator","allContent","savedCount","platformMap","synapseplatform","contentText","analyticsService","handleClearAll","Plus","Grid","Lightbulb"],"mappings":"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"}